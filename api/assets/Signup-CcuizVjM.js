import{j as e,r as o,c as P,d as V,b as q,e as L,t as I,f as M,g as F,h as R,i as b,B as C,R as E,L as Z}from"./index-Dye69HlV.js";import{I as y}from"./input-D5Hq01DW.js";import{a as $,g as m,u as B}from"./useLogin-D08xO2ox.js";function H(){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 24 24",width:"20",className:"mr-2",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"}),e.jsx("path",{d:"M1 1h22v22H1z",fill:"none"})]})}const O=()=>{const s=$(),[t,c]=o.useState(!1),[j,u]=o.useState(null),[h,r]=o.useState(!1),{dispatch:w}=P(),f=async(g,N,n,d)=>{u(null),r(!0);try{const a=await V(q,g,N);if(!a||!a.user)throw r(!1),new Error("Não foi possível realizar o cadastro.");await L(a.user,{displayName:d});const x=I;await M(F(R,"users",a.user.uid),{id:a.user.uid,online:!0,createdAt:x,email:g,name:d,phone:n,user_agent:navigator.userAgent,origin:window.location.href.split("?")[0],fbp:m("_fbp"),fbc:m("_fbc"),utm:{source:s.get("utm_source")||m("utm_source"),medium:s.get("utm_medium")||m("utm_medium"),campaign:s.get("utm_campaign")||m("utm_campaign"),term:s.get("utm_term")||m("utm_term"),content:s.get("utm_content")||m("utm_content")},sck:s.get("sck")||m("sck")}),w({type:"LOGIN",payload:a.user}),t||(r(!1),u(null))}catch(a){t||(console.log(a.message),u(a.message),r(!1))}};return o.useEffect(()=>()=>c(!0),[]),{error:j,isPending:h,signup:f}},W=s=>{const t=s.trim().split(" ");return t.length<2||!t[0]||!t[1]?(console.log("invalid full name: "+s),{isValidName:!1,message:"Insira seu nome completo, incluindo nome e sobrenome."}):{isValidFullName:!0,message:""}},G=s=>{const t=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,c=s.startsWith(".")||s.startsWith("@")||s.endsWith(".");return!t.test(s)||c?{isValidEmail:!1,message:"Insira um e-mail válido."}:{isValidEmail:!0,message:""}},T=s=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/.test(s)?{isValidPassword:!0,message:""}:{isValidPassword:!1,message:"A senha precisa ter pelo menos 8 caracteres, incluindo 1 letra maiúscula, 1 letra minúscula, 1 número e 1 caractere especial."};function U(){const{authenticateWithGoogle:s,isPending:t}=B(),[c,j]=o.useState(""),[u,h]=o.useState(""),[r,w]=o.useState(""),[f,g]=o.useState(""),{signup:N,error:n,isPending:d}=O(),[a,x]=o.useState("");function z(l){const i=l.split("@");if(i.length!==2)return;const p=i[1],v={"outlok.com":"outlook.com","otlook.com":"outlook.com","gamil.com":"gmail.com","gmial.com":"gmail.com","gmail.co":"gmail.com","gmai.com":"gmail.com","hotmal.com":"hotmail.com","hotmai.com":"hotmail.com","hotmial.com":"hotmail.com","live.con":"live.com","live.cmo":"live.com","live.cm":"live.com"};v[p]?g(`Você quis dizer ${i[0]}@${v[p]}?`):g("")}const A=l=>{l.preventDefault();const{isValidFullName:i,message:p}=W(c),{isValidEmail:v,message:S}=G(u),{isValidPassword:_,message:k}=T(r);if(!i||!v||!_){x({type:"error",message:p||S||k});return}N(u,r,c)};return o.useEffect(()=>{n&&(n.includes("email-already-in-use")?x({type:"error",message:"O e-mail informado já está em uso."}):n.includes("weak-password")?x({type:"error",message:"A senha informada é muito fraca."}):n.includes("invalid-email")?x({type:"error",message:"O e-mail informado é inválido."}):(console.log(n),x({type:"error",message:"Ocorreu um erro ao criar a conta. Tente novamente."})))},[n]),e.jsxs("div",{className:"flex flex-col-reverse xl:flex-row 2xl:gap-20 xl:h-screen w-full xl:px-20 2xl:px-40 xl:py-20 2xl:py-0",children:[e.jsx("div",{className:"xl:w-1/2 xl:h-[90%] 2xl:h-[80%] my-auto bg-muted rounded-xl px-5 sm:p-12 py-8 flex justify-center items-center",children:e.jsxs("div",{children:[e.jsx(b,{}),e.jsx("h2",{className:"mt-12 sm:mt-10 2xl:mt-16 text-4xl leading-[44px] sm:leading-[50px] font-medium",children:"Lorem ipsum dolor sit amet consectetur, adipisicing elit."}),e.jsx("p",{className:"mt-4 sm:mt-6 2xl:mt-10 text-muted-foreground",children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Labore debitis dolore, dicta fugiat iure quia! Hic facilis aut ducimus aliquam blanditiis ex ea. Ipsa omnis quas impedit maiores ad unde?"}),e.jsx("div",{className:"bg-foreground text-background p-5 sm:p-8 rounded-xl mt-[8%] leading-6 2xl:leading-8",children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eveniet quasi molestias molestiae, pariatur, doloribus neque saepe sit hic quis sequi nulla non quidem accusantium harum ipsa minima adipisci iure obcaecati!"})]})}),e.jsx("div",{className:"flex flex-col justify-center xl:w-1/2 px-5 md:px-20 py-[15%] sm:h-auto",children:e.jsxs("div",{children:[e.jsx("div",{className:"sm:hidden mx-auto w-fit",children:e.jsx(b,{})}),e.jsx("h1",{className:"mt-12 sm:mt-0 text-3xl font-medium text-center sm:text-left",children:"Cadastre-se agora"}),e.jsx("p",{className:"mt-2 text-muted-foreground font-normal text-lg text-center sm:text-left",children:"Crie sua conta agora mesmo"}),e.jsxs(C,{size:"xl",variant:"outline",className:"mt-6 text-lg w-full",disabled:t||d,onClick:s,children:[t&&e.jsx(E,{className:"w-5 h-5 mr-2 animate-spin"}),e.jsx(H,{}),t?"Aguardando...":"Entrar com a conta Google"]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-primary-foreground px-2 text-muted-foreground",children:"Ou continue com"})})]}),e.jsxs("form",{onSubmit:A,children:[e.jsx("p",{className:"text-muted-foreground mb-2.5",children:"Nome completo"}),e.jsx(y,{type:"text",autoComplete:"name",value:c,onChange:l=>{const i=l.target.value;(i===""||/^[A-Za-z\s]+$/.test(i))&&j(i)}}),e.jsx("p",{className:"mt-2.5 text-muted-foreground mb-2.5",children:"E-mail"}),e.jsx(y,{type:"email",autoComplete:"email",value:u,onChange:l=>{const i=l.target.value.trim().toLowerCase();(i===""||/^[a-zA-Z0-9._%+-@]+$/.test(i))&&h(i),z(l.target.value)}}),f&&e.jsx("p",{className:"text-muted-foreground text-sm mt-1.5",role:"button",onClick:()=>{h(f.split("Você quis dizer ")[1].replace("?","")),g("")},children:f}),e.jsx("p",{className:"mt-2.5 text-muted-foreground mb-2.5",children:"Senha"}),e.jsx(y,{type:"password",autoComplete:"new-password",value:r,onChange:l=>w(l.target.value)}),e.jsxs(C,{disabled:d||t,size:"xl",className:"mt-6 text-lg w-full",children:[d&&e.jsx(E,{className:"w-5 h-5 mr-2 animate-spin"}),d?"Criando a conta...":"Criar minha conta"]})]}),a&&a.type==="error"&&e.jsx("p",{className:"text-left text-red-500 mt-4",children:a.message}),e.jsxs("div",{className:"mt-12 sm:mt-6 flex justify-center gap-2 text-lg",children:[e.jsx("p",{children:"Já tem uma conta?"}),e.jsx(Z,{to:"/login",className:"text-primary underline",children:"Entre agora."})]})]})})]})}export{U as default};
