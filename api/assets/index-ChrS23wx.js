import{A as f,c as k,aa as R,r as t,j as e,au as w,q as E,g as x,h as j,o as P}from"./index-Dye69HlV.js";import{U as C}from"./utensils-CVgCMBcr.js";import{B as d}from"./bell-Dgigarda.js";import{D as S}from"./dog-BTx2Crur.js";import{C as z}from"./circle-check-D_uw7URp.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l=f("BellOff",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=f("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=f("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=f("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]),K=()=>{const{user:r}=k(),{toast:n}=R(),[a,g]=t.useState({foodReminders:!1,walkReminders:!1,trainingReminders:!1,vaccineReminders:!1,generalUpdates:!1}),[N,y]=t.useState(!0),[u,m]=t.useState(null),[c,h]=t.useState("default");t.useEffect(()=>{(async()=>{if("Notification"in window){const i=await Notification.permission;h(i)}})()},[]),t.useEffect(()=>{(async()=>{if(r)try{const i=await E(x(j,"users",r.uid));i.exists()&&i.data().notificationSettings&&g(i.data().notificationSettings)}catch(i){console.error("Error fetching notification settings:",i),n({variant:"destructive",title:"Erro ao carregar configura√ß√µes",description:"N√£o foi poss√≠vel carregar suas prefer√™ncias de notifica√ß√£o."})}finally{y(!1)}})()},[r]);const v=async()=>{if("Notification"in window)try{const s=await Notification.requestPermission();h(s),n(s==="granted"?{title:"Notifica√ß√µes ativadas",description:"Voc√™ receber√° notifica√ß√µes sobre as atividades do seu pet."}:{variant:"destructive",title:"Permiss√£o negada",description:"Voc√™ precisa permitir notifica√ß√µes nas configura√ß√µes do seu navegador."})}catch(s){console.error("Error requesting notification permission:",s),n({variant:"destructive",title:"Erro",description:"N√£o foi poss√≠vel solicitar permiss√£o para notifica√ß√µes."})}},o=async s=>{if(console.log("Iniciando handleToggle para:",s),console.log("Estado atual:",a[s]),console.log("Permiss√£o de notifica√ß√£o:",c),c!=="granted"&&(console.log("Solicitando permiss√£o de notifica√ß√£o..."),await v(),c!=="granted")){console.log("Permiss√£o de notifica√ß√£o n√£o concedida");return}const i={...a,[s]:!a[s]};if(console.log("Novas configura√ß√µes:",i),g(i),r)try{console.log("Atualizando configura√ß√µes no Firestore..."),await P(x(j,"users",r.uid),{notificationSettings:i}),console.log("Configura√ß√µes atualizadas com sucesso no Firestore"),m("success"),i[s]&&(console.log("Enviando notifica√ß√£o de teste..."),b({foodReminders:"üçΩÔ∏è Lembrete de Alimenta√ß√£o",walkReminders:"ü¶Æ Lembrete de Passeio",trainingReminders:"üéØ Lembrete de Treinamento",vaccineReminders:"üíâ Lembrete de Vacina",generalUpdates:"üì¢ Atualiza√ß√£o Geral"}[s])),n({title:"Configura√ß√µes salvas",description:"Suas prefer√™ncias de notifica√ß√£o foram atualizadas."}),setTimeout(()=>m(null),3e3)}catch(p){console.error("Erro ao atualizar configura√ß√µes:",p),m("error"),n({variant:"destructive",title:"Erro ao salvar",description:"N√£o foi poss√≠vel salvar suas prefer√™ncias de notifica√ß√£o."}),setTimeout(()=>m(null),3e3)}else console.log("Usu√°rio n√£o autenticado")},b=s=>{if(console.log("Tentando enviar notifica√ß√£o:",s),c==="granted"){console.log("Permiss√£o concedida, criando notifica√ß√£o...");try{const i=new Notification(s,{body:"Esta √© uma notifica√ß√£o de teste para verificar se est√° funcionando.",icon:"/favicon.ico"});console.log("Notifica√ß√£o criada com sucesso:",i)}catch(i){console.error("Erro ao criar notifica√ß√£o:",i)}}else console.log("Permiss√£o de notifica√ß√£o n√£o concedida")};return N?e.jsx("div",{className:"notifications-container",children:e.jsx("div",{className:"loading",children:"Carregando configura√ß√µes..."})}):e.jsxs("div",{className:"notifications-container",children:[e.jsx("h1",{children:"Configura√ß√µes de Notifica√ß√µes"}),e.jsxs("p",{className:"description",children:["Gerencie suas prefer√™ncias de notifica√ß√µes para receber alertas sobre atividades do seu pet.",c!=="granted"&&e.jsx("button",{className:"permission-button",onClick:v,children:"Permitir Notifica√ß√µes"})]}),e.jsxs("div",{className:"settings-grid",children:[e.jsxs("div",{className:`setting-item ${a.foodReminders?"active":""}`,onClick:()=>o("foodReminders"),role:"button",tabIndex:0,onKeyPress:s=>s.key==="Enter"&&o("foodReminders"),children:[e.jsxs("div",{className:"setting-info",children:[e.jsx(C,{className:"setting-icon"}),e.jsxs("div",{children:[e.jsx("h3",{children:"Lembretes de Alimenta√ß√£o"}),e.jsx("p",{children:"Receba notifica√ß√µes sobre hor√°rios de alimenta√ß√£o"})]})]}),e.jsx("div",{className:"toggle-indicator",children:a.foodReminders?e.jsx(d,{}):e.jsx(l,{})})]}),e.jsxs("div",{className:`setting-item ${a.walkReminders?"active":""}`,onClick:()=>o("walkReminders"),role:"button",tabIndex:0,onKeyPress:s=>s.key==="Enter"&&o("walkReminders"),children:[e.jsxs("div",{className:"setting-info",children:[e.jsx(S,{className:"setting-icon"}),e.jsxs("div",{children:[e.jsx("h3",{children:"Lembretes de Passeio"}),e.jsx("p",{children:"Alertas para hor√°rios de passeio"})]})]}),e.jsx("div",{className:"toggle-indicator",children:a.walkReminders?e.jsx(d,{}):e.jsx(l,{})})]}),e.jsxs("div",{className:`setting-item ${a.trainingReminders?"active":""}`,onClick:()=>o("trainingReminders"),role:"button",tabIndex:0,onKeyPress:s=>s.key==="Enter"&&o("trainingReminders"),children:[e.jsxs("div",{className:"setting-info",children:[e.jsx(T,{className:"setting-icon"}),e.jsxs("div",{children:[e.jsx("h3",{children:"Lembretes de Treinamento"}),e.jsx("p",{children:"Notifica√ß√µes sobre sess√µes de treinamento"})]})]}),e.jsx("div",{className:"toggle-indicator",children:a.trainingReminders?e.jsx(d,{}):e.jsx(l,{})})]}),e.jsxs("div",{className:`setting-item ${a.vaccineReminders?"active":""}`,onClick:()=>o("vaccineReminders"),role:"button",tabIndex:0,onKeyPress:s=>s.key==="Enter"&&o("vaccineReminders"),children:[e.jsxs("div",{className:"setting-info",children:[e.jsx(w,{className:"setting-icon"}),e.jsxs("div",{children:[e.jsx("h3",{children:"Lembretes de Vacina"}),e.jsx("p",{children:"Alertas para datas de vacina√ß√£o"})]})]}),e.jsx("div",{className:"toggle-indicator",children:a.vaccineReminders?e.jsx(d,{}):e.jsx(l,{})})]}),e.jsxs("div",{className:`setting-item ${a.generalUpdates?"active":""}`,onClick:()=>o("generalUpdates"),role:"button",tabIndex:0,onKeyPress:s=>s.key==="Enter"&&o("generalUpdates"),children:[e.jsxs("div",{className:"setting-info",children:[e.jsx(A,{className:"setting-icon"}),e.jsxs("div",{children:[e.jsx("h3",{children:"Atualiza√ß√µes Gerais"}),e.jsx("p",{children:"Notifica√ß√µes sobre novidades e atualiza√ß√µes"})]})]}),e.jsx("div",{className:"toggle-indicator",children:a.generalUpdates?e.jsx(d,{}):e.jsx(l,{})})]})]}),u==="success"&&e.jsxs("div",{className:"status-message success",children:[e.jsx(z,{className:"status-icon"}),"Configura√ß√µes salvas com sucesso"]}),u==="error"&&e.jsxs("div",{className:"status-message error",children:[e.jsx(L,{className:"status-icon"}),"Erro ao salvar configura√ß√µes"]})]})};export{K as default};
