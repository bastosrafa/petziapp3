import{u as v,r as c,j as e,av as j,aw as b,ax as g}from"./index-Dye69HlV.js";const N=()=>{const p=v(),[s,m]=c.useState(!1),[u,o]=c.useState(null),[a,h]=c.useState({type:"bug",title:"",description:"",file:null}),f=async n=>{n.preventDefault(),m(!0),o(null);const r=new FormData;r.append("type",a.type),r.append("title",a.title),r.append("description",a.description),a.file&&r.append("file",a.file);try{const t=await fetch("https://api.petziapp.com/api/report-problem",{method:"POST",body:r,credentials:"include",headers:{Accept:"application/json"}}),d=await t.json();t.ok?(alert("Relatório enviado com sucesso! Obrigado por nos ajudar a melhorar o PetziApp."),p("/")):o(d.message||"Erro ao enviar relatório. Por favor, tente novamente.")}catch(t){t.name==="TypeError"&&t.message.includes("Failed to fetch")?o("Erro de conexão. Verifique sua internet e tente novamente."):o("Erro ao enviar relatório. Por favor, tente novamente mais tarde.")}finally{m(!1)}},l=n=>{const{name:r,value:t,files:d}=n.target;if(r==="file"){const i=d[0];if(i&&i.size>5*1024*1024){alert("O arquivo é muito grande. O tamanho máximo permitido é 5MB."),n.target.value="";return}h(x=>({...x,file:i}))}else h(i=>({...i,[r]:t}))};return e.jsxs("div",{className:"report-container",children:[e.jsxs("div",{className:"report-header",children:[e.jsx("button",{className:"back-button",onClick:()=>p(-1),children:e.jsx(j,{})}),e.jsx("h1",{children:"Reportar Problema"})]}),u&&e.jsx("div",{className:"error-message",children:u}),e.jsxs("form",{className:"report-form",onSubmit:f,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"type",children:"Tipo de Problema"}),e.jsxs("select",{id:"type",name:"type",value:a.type,onChange:l,required:!0,disabled:s,children:[e.jsx("option",{value:"bug",children:"Bug/Erro"}),e.jsx("option",{value:"feature",children:"Sugestão de Melhoria"}),e.jsx("option",{value:"content",children:"Problema de Conteúdo"}),e.jsx("option",{value:"other",children:"Outro"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"title",children:"Título"}),e.jsx("input",{type:"text",id:"title",name:"title",value:a.title,onChange:l,placeholder:"Descreva brevemente o problema",required:!0,disabled:s})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"description",children:"Descrição Detalhada"}),e.jsx("textarea",{id:"description",name:"description",value:a.description,onChange:l,placeholder:"Descreva o problema em detalhes",required:!0,disabled:s})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"file",children:"Anexar Arquivo (opcional, máximo 5MB)"}),e.jsxs("div",{className:"file-input-wrapper",children:[e.jsx("input",{type:"file",id:"file",name:"file",onChange:l,className:"file-input",disabled:s}),e.jsxs("label",{htmlFor:"file",className:"file-label",children:[e.jsx(b,{}),a.file?a.file.name:"Escolher arquivo"]})]})]}),e.jsx("button",{type:"submit",className:"submit-button",disabled:s,children:s?"Enviando...":e.jsxs(e.Fragment,{children:[e.jsx(g,{}),"Enviar Relatório"]})})]})]})};export{N as default};
