const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-C6tSW6R_.js","assets/input-D5Hq01DW.js","assets/useLogin-D08xO2ox.js","assets/Login.module-B6YCkDsh.js","assets/Login-ByuyvIje.css","assets/Signup-CcuizVjM.js","assets/Recover-Cl3J5MRx.js","assets/Home-DUcXHnaL.js","assets/card-BZnMbDN5.js","assets/index-BYHbKHUD.js","assets/styled-components.browser.esm--5_Wn-ai.js","assets/index-BEgXPogn.css","assets/Profile-CifhFPOZ.js","assets/Profile-BPL2joFX.css","assets/Onboarding-1klAsVmF.js","assets/Content-BU9tvtIm.js","assets/trash-2-BpMvl8tP.js","assets/lock-BfhswHb_.js","assets/map-pin-lBLI5vIS.js","assets/users-DQaJ2eXR.js","assets/droplets-m0QRMEgr.js","assets/triangle-alert-8qwZl-cm.js","assets/index-BRc3gxY8.js","assets/config-CJOQn1u_.js","assets/dog-BTx2Crur.js","assets/index-DC6XDsyU.js","assets/ModuleCompletionPopup-BxaocN1j.js","assets/index-D4x0O_Ul.js","assets/Behavior1-CsoG-TDr.js","assets/Behavior2-J10O8qQw.js","assets/Behavior3-Cd51p6wW.js","assets/Behavior4-C-CGhiKB.js","assets/Behavior5-Dd0skT2T.js","assets/index-DZtpemRo.js","assets/index-CVwATjzb.js","assets/index-ijajo3Mj.js","assets/index-CckdP5sZ.js","assets/index-_gu0-adU.js","assets/index-TL3IBvcq.js","assets/circle-check-big-5MRl4p2p.js","assets/index-CVNfKgZp.js","assets/chevron-down-DFj8oiUy.js","assets/utensils-CVgCMBcr.js","assets/index-w2Ws4Msb.js","assets/bell-Dgigarda.js","assets/shield-DDiNMdHY.js","assets/index-CTnWlK8f.css","assets/index-ChrS23wx.js","assets/circle-check-D_uw7URp.js","assets/index-BH6Bferi.css","assets/index-BLm4bh5T.js","assets/phone-Bjehf9tt.js","assets/index-DSFw7EYj.css","assets/index-CN9iQ1Kq.js","assets/circle-alert-FT1qK4Sd.js","assets/index-DPRcUko9.css","assets/index-CxF9PEeA.js","assets/index-Cyiju6Hr.css","assets/index-IR0i_ucf.js","assets/styles-DAXxUocq.css","assets/Success-COBrDSWP.js","assets/index-DRgcTdL3.js","assets/index-b6uNRADO.css"])))=>i.map(i=>d[i]);
function E2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Ry(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var B1={exports:{}},wf={},z1={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cu=Symbol.for("react.element"),T2=Symbol.for("react.portal"),I2=Symbol.for("react.fragment"),b2=Symbol.for("react.strict_mode"),S2=Symbol.for("react.profiler"),R2=Symbol.for("react.provider"),A2=Symbol.for("react.context"),P2=Symbol.for("react.forward_ref"),C2=Symbol.for("react.suspense"),k2=Symbol.for("react.memo"),x2=Symbol.for("react.lazy"),CE=Symbol.iterator;function D2(t){return t===null||typeof t!="object"?null:(t=CE&&t[CE]||t["@@iterator"],typeof t=="function"?t:null)}var q1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W1=Object.assign,K1={};function $a(t,e,n){this.props=t,this.context=e,this.refs=K1,this.updater=n||q1}$a.prototype.isReactComponent={};$a.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$a.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function G1(){}G1.prototype=$a.prototype;function Ay(t,e,n){this.props=t,this.context=e,this.refs=K1,this.updater=n||q1}var Py=Ay.prototype=new G1;Py.constructor=Ay;W1(Py,$a.prototype);Py.isPureReactComponent=!0;var kE=Array.isArray,H1=Object.prototype.hasOwnProperty,Cy={current:null},Q1={key:!0,ref:!0,__self:!0,__source:!0};function Y1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)H1.call(e,r)&&!Q1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:cu,type:t,key:s,ref:o,props:i,_owner:Cy.current}}function N2(t,e){return{$$typeof:cu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ky(t){return typeof t=="object"&&t!==null&&t.$$typeof===cu}function O2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xE=/\/+/g;function am(t,e){return typeof t=="object"&&t!==null&&t.key!=null?O2(""+t.key):e.toString(36)}function jd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case cu:case T2:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+am(o,0):r,kE(i)?(n="",t!=null&&(n=t.replace(xE,"$&/")+"/"),jd(i,e,n,"",function(u){return u})):i!=null&&(ky(i)&&(i=N2(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(xE,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",kE(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+am(s,a);o+=jd(s,e,n,l,i)}else if(l=D2(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+am(s,a++),o+=jd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function nd(t,e,n){if(t==null)return t;var r=[],i=0;return jd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function L2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nn={current:null},Bd={transition:null},V2={ReactCurrentDispatcher:nn,ReactCurrentBatchConfig:Bd,ReactCurrentOwner:Cy};function X1(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:nd,forEach:function(t,e,n){nd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return nd(t,function(){e++}),e},toArray:function(t){return nd(t,function(e){return e})||[]},only:function(t){if(!ky(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=$a;oe.Fragment=I2;oe.Profiler=S2;oe.PureComponent=Ay;oe.StrictMode=b2;oe.Suspense=C2;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V2;oe.act=X1;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=W1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Cy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)H1.call(e,l)&&!Q1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:cu,type:t.type,key:i,ref:s,props:r,_owner:o}};oe.createContext=function(t){return t={$$typeof:A2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:R2,_context:t},t.Consumer=t};oe.createElement=Y1;oe.createFactory=function(t){var e=Y1.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:P2,render:t}};oe.isValidElement=ky;oe.lazy=function(t){return{$$typeof:x2,_payload:{_status:-1,_result:t},_init:L2}};oe.memo=function(t,e){return{$$typeof:k2,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=Bd.transition;Bd.transition={};try{t()}finally{Bd.transition=e}};oe.unstable_act=X1;oe.useCallback=function(t,e){return nn.current.useCallback(t,e)};oe.useContext=function(t){return nn.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return nn.current.useDeferredValue(t)};oe.useEffect=function(t,e){return nn.current.useEffect(t,e)};oe.useId=function(){return nn.current.useId()};oe.useImperativeHandle=function(t,e,n){return nn.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return nn.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return nn.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return nn.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return nn.current.useReducer(t,e,n)};oe.useRef=function(t){return nn.current.useRef(t)};oe.useState=function(t){return nn.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return nn.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return nn.current.useTransition()};oe.version="18.3.1";z1.exports=oe;var m=z1.exports;const Re=Ry(m),J1=E2({__proto__:null,default:Re},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M2=m,F2=Symbol.for("react.element"),$2=Symbol.for("react.fragment"),U2=Object.prototype.hasOwnProperty,j2=M2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,B2={key:!0,ref:!0,__self:!0,__source:!0};function Z1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)U2.call(e,r)&&!B2.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:F2,type:t,key:s,ref:o,props:i,_owner:j2.current}}wf.Fragment=$2;wf.jsx=Z1;wf.jsxs=Z1;B1.exports=wf;var P=B1.exports,_g={},eS={exports:{}},kn={},tS={exports:{}},nS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,ee){var te=W.length;W.push(ee);e:for(;0<te;){var we=te-1>>>1,ae=W[we];if(0<i(ae,ee))W[we]=ee,W[te]=ae,te=we;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var ee=W[0],te=W.pop();if(te!==ee){W[0]=te;e:for(var we=0,ae=W.length,ie=ae>>>1;we<ie;){var Dn=2*(we+1)-1,Ar=W[Dn],Pr=Dn+1,Cr=W[Pr];if(0>i(Ar,te))Pr<ae&&0>i(Cr,Ar)?(W[we]=Cr,W[Pr]=te,we=Pr):(W[we]=Ar,W[Dn]=te,we=Dn);else if(Pr<ae&&0>i(Cr,te))W[we]=Cr,W[Pr]=te,we=Pr;else break e}}return ee}function i(W,ee){var te=W.sortIndex-ee.sortIndex;return te!==0?te:W.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,p=3,v=!1,E=!1,_=!1,I=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(W){for(var ee=n(u);ee!==null;){if(ee.callback===null)r(u);else if(ee.startTime<=W)r(u),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=n(u)}}function D(W){if(_=!1,b(W),!E)if(n(l)!==null)E=!0,tt(V);else{var ee=n(u);ee!==null&&gt(D,ee.startTime-W)}}function V(W,ee){E=!1,_&&(_=!1,w(T),T=-1),v=!0;var te=p;try{for(b(ee),h=n(l);h!==null&&(!(h.expirationTime>ee)||W&&!N());){var we=h.callback;if(typeof we=="function"){h.callback=null,p=h.priorityLevel;var ae=we(h.expirationTime<=ee);ee=t.unstable_now(),typeof ae=="function"?h.callback=ae:h===n(l)&&r(l),b(ee)}else r(l);h=n(l)}if(h!==null)var ie=!0;else{var Dn=n(u);Dn!==null&&gt(D,Dn.startTime-ee),ie=!1}return ie}finally{h=null,p=te,v=!1}}var $=!1,R=null,T=-1,A=5,k=-1;function N(){return!(t.unstable_now()-k<A)}function x(){if(R!==null){var W=t.unstable_now();k=W;var ee=!0;try{ee=R(!0,W)}finally{ee?C():($=!1,R=null)}}else $=!1}var C;if(typeof y=="function")C=function(){y(x)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,Le=J.port2;J.port1.onmessage=x,C=function(){Le.postMessage(null)}}else C=function(){I(x,0)};function tt(W){R=W,$||($=!0,C())}function gt(W,ee){T=I(function(){W(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){E||v||(E=!0,tt(V))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(p){case 1:case 2:case 3:var ee=3;break;default:ee=p}var te=p;p=ee;try{return W()}finally{p=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,ee){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var te=p;p=W;try{return ee()}finally{p=te}},t.unstable_scheduleCallback=function(W,ee,te){var we=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?we+te:we):te=we,W){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=te+ae,W={id:d++,callback:ee,priorityLevel:W,startTime:te,expirationTime:ae,sortIndex:-1},te>we?(W.sortIndex=te,e(u,W),n(l)===null&&W===n(u)&&(_?(w(T),T=-1):_=!0,gt(D,te-we))):(W.sortIndex=ae,e(l,W),E||v||(E=!0,tt(V))),W},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(W){var ee=p;return function(){var te=p;p=ee;try{return W.apply(this,arguments)}finally{p=te}}}})(nS);tS.exports=nS;var z2=tS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q2=m,Pn=z2;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rS=new Set,wc={};function lo(t,e){ha(t,e),ha(t+"Capture",e)}function ha(t,e){for(wc[t]=e,t=0;t<e.length;t++)rS.add(e[t])}var Kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wg=Object.prototype.hasOwnProperty,W2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,DE={},NE={};function K2(t){return wg.call(NE,t)?!0:wg.call(DE,t)?!1:W2.test(t)?NE[t]=!0:(DE[t]=!0,!1)}function G2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function H2(t,e,n,r){if(e===null||typeof e>"u"||G2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){kt[t]=new rn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];kt[e]=new rn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){kt[t]=new rn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){kt[t]=new rn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){kt[t]=new rn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){kt[t]=new rn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){kt[t]=new rn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){kt[t]=new rn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){kt[t]=new rn(t,5,!1,t.toLowerCase(),null,!1,!1)});var xy=/[\-:]([a-z])/g;function Dy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(xy,Dy);kt[e]=new rn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(xy,Dy);kt[e]=new rn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(xy,Dy);kt[e]=new rn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){kt[t]=new rn(t,1,!1,t.toLowerCase(),null,!1,!1)});kt.xlinkHref=new rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){kt[t]=new rn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ny(t,e,n,r){var i=kt.hasOwnProperty(e)?kt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(H2(e,n,i,r)&&(n=null),r||i===null?K2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ei=q2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rd=Symbol.for("react.element"),Fo=Symbol.for("react.portal"),$o=Symbol.for("react.fragment"),Oy=Symbol.for("react.strict_mode"),Eg=Symbol.for("react.profiler"),iS=Symbol.for("react.provider"),sS=Symbol.for("react.context"),Ly=Symbol.for("react.forward_ref"),Tg=Symbol.for("react.suspense"),Ig=Symbol.for("react.suspense_list"),Vy=Symbol.for("react.memo"),vi=Symbol.for("react.lazy"),oS=Symbol.for("react.offscreen"),OE=Symbol.iterator;function wl(t){return t===null||typeof t!="object"?null:(t=OE&&t[OE]||t["@@iterator"],typeof t=="function"?t:null)}var ze=Object.assign,lm;function Ul(t){if(lm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lm=e&&e[1]||""}return`
`+lm+t}var cm=!1;function um(t,e){if(!t||cm)return"";cm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{cm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ul(t):""}function Q2(t){switch(t.tag){case 5:return Ul(t.type);case 16:return Ul("Lazy");case 13:return Ul("Suspense");case 19:return Ul("SuspenseList");case 0:case 2:case 15:return t=um(t.type,!1),t;case 11:return t=um(t.type.render,!1),t;case 1:return t=um(t.type,!0),t;default:return""}}function bg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $o:return"Fragment";case Fo:return"Portal";case Eg:return"Profiler";case Oy:return"StrictMode";case Tg:return"Suspense";case Ig:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sS:return(t.displayName||"Context")+".Consumer";case iS:return(t._context.displayName||"Context")+".Provider";case Ly:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vy:return e=t.displayName||null,e!==null?e:bg(t.type)||"Memo";case vi:e=t._payload,t=t._init;try{return bg(t(e))}catch{}}return null}function Y2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bg(e);case 8:return e===Oy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $i(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function aS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function X2(t){var e=aS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function id(t){t._valueTracker||(t._valueTracker=X2(t))}function lS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=aS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function yh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sg(t,e){var n=e.checked;return ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function LE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=$i(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cS(t,e){e=e.checked,e!=null&&Ny(t,"checked",e,!1)}function Rg(t,e){cS(t,e);var n=$i(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ag(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ag(t,e.type,$i(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function VE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ag(t,e,n){(e!=="number"||yh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var jl=Array.isArray;function Xo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+$i(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Pg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ME(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(jl(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$i(n)}}function uS(t,e){var n=$i(e.value),r=$i(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function FE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function dS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?dS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sd,hS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sd=sd||document.createElement("div"),sd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ec(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ec={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},J2=["Webkit","ms","Moz","O"];Object.keys(ec).forEach(function(t){J2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ec[e]=ec[t]})});function fS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ec.hasOwnProperty(t)&&ec[t]?(""+e).trim():e+"px"}function pS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=fS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Z2=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kg(t,e){if(e){if(Z2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function xg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dg=null;function My(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ng=null,Jo=null,Zo=null;function $E(t){if(t=hu(t)){if(typeof Ng!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Sf(e),Ng(t.stateNode,t.type,e))}}function mS(t){Jo?Zo?Zo.push(t):Zo=[t]:Jo=t}function gS(){if(Jo){var t=Jo,e=Zo;if(Zo=Jo=null,$E(t),e)for(t=0;t<e.length;t++)$E(e[t])}}function vS(t,e){return t(e)}function yS(){}var dm=!1;function _S(t,e,n){if(dm)return t(e,n);dm=!0;try{return vS(t,e,n)}finally{dm=!1,(Jo!==null||Zo!==null)&&(yS(),gS())}}function Tc(t,e){var n=t.stateNode;if(n===null)return null;var r=Sf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Og=!1;if(Kr)try{var El={};Object.defineProperty(El,"passive",{get:function(){Og=!0}}),window.addEventListener("test",El,El),window.removeEventListener("test",El,El)}catch{Og=!1}function eO(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var tc=!1,_h=null,wh=!1,Lg=null,tO={onError:function(t){tc=!0,_h=t}};function nO(t,e,n,r,i,s,o,a,l){tc=!1,_h=null,eO.apply(tO,arguments)}function rO(t,e,n,r,i,s,o,a,l){if(nO.apply(this,arguments),tc){if(tc){var u=_h;tc=!1,_h=null}else throw Error(B(198));wh||(wh=!0,Lg=u)}}function co(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function wS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function UE(t){if(co(t)!==t)throw Error(B(188))}function iO(t){var e=t.alternate;if(!e){if(e=co(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return UE(i),t;if(s===r)return UE(i),e;s=s.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function ES(t){return t=iO(t),t!==null?TS(t):null}function TS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=TS(t);if(e!==null)return e;t=t.sibling}return null}var IS=Pn.unstable_scheduleCallback,jE=Pn.unstable_cancelCallback,sO=Pn.unstable_shouldYield,oO=Pn.unstable_requestPaint,nt=Pn.unstable_now,aO=Pn.unstable_getCurrentPriorityLevel,Fy=Pn.unstable_ImmediatePriority,bS=Pn.unstable_UserBlockingPriority,Eh=Pn.unstable_NormalPriority,lO=Pn.unstable_LowPriority,SS=Pn.unstable_IdlePriority,Ef=null,vr=null;function cO(t){if(vr&&typeof vr.onCommitFiberRoot=="function")try{vr.onCommitFiberRoot(Ef,t,void 0,(t.current.flags&128)===128)}catch{}}var Yn=Math.clz32?Math.clz32:hO,uO=Math.log,dO=Math.LN2;function hO(t){return t>>>=0,t===0?32:31-(uO(t)/dO|0)|0}var od=64,ad=4194304;function Bl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Th(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Bl(a):(s&=o,s!==0&&(r=Bl(s)))}else o=n&~i,o!==0?r=Bl(o):s!==0&&(r=Bl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Yn(e),i=1<<n,r|=t[n],e&=~i;return r}function fO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Yn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=fO(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Vg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function RS(){var t=od;return od<<=1,!(od&4194240)&&(od=64),t}function hm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function uu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yn(e),t[e]=n}function mO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Yn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function $y(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Yn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Te=0;function AS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var PS,Uy,CS,kS,xS,Mg=!1,ld=[],Pi=null,Ci=null,ki=null,Ic=new Map,bc=new Map,_i=[],gO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function BE(t,e){switch(t){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":Ci=null;break;case"mouseover":case"mouseout":ki=null;break;case"pointerover":case"pointerout":Ic.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bc.delete(e.pointerId)}}function Tl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=hu(e),e!==null&&Uy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function vO(t,e,n,r,i){switch(e){case"focusin":return Pi=Tl(Pi,t,e,n,r,i),!0;case"dragenter":return Ci=Tl(Ci,t,e,n,r,i),!0;case"mouseover":return ki=Tl(ki,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ic.set(s,Tl(Ic.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,bc.set(s,Tl(bc.get(s)||null,t,e,n,r,i)),!0}return!1}function DS(t){var e=Rs(t.target);if(e!==null){var n=co(e);if(n!==null){if(e=n.tag,e===13){if(e=wS(n),e!==null){t.blockedOn=e,xS(t.priority,function(){CS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Fg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Dg=r,n.target.dispatchEvent(r),Dg=null}else return e=hu(n),e!==null&&Uy(e),t.blockedOn=n,!1;e.shift()}return!0}function zE(t,e,n){zd(t)&&n.delete(e)}function yO(){Mg=!1,Pi!==null&&zd(Pi)&&(Pi=null),Ci!==null&&zd(Ci)&&(Ci=null),ki!==null&&zd(ki)&&(ki=null),Ic.forEach(zE),bc.forEach(zE)}function Il(t,e){t.blockedOn===e&&(t.blockedOn=null,Mg||(Mg=!0,Pn.unstable_scheduleCallback(Pn.unstable_NormalPriority,yO)))}function Sc(t){function e(i){return Il(i,t)}if(0<ld.length){Il(ld[0],t);for(var n=1;n<ld.length;n++){var r=ld[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Pi!==null&&Il(Pi,t),Ci!==null&&Il(Ci,t),ki!==null&&Il(ki,t),Ic.forEach(e),bc.forEach(e),n=0;n<_i.length;n++)r=_i[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_i.length&&(n=_i[0],n.blockedOn===null);)DS(n),n.blockedOn===null&&_i.shift()}var ea=ei.ReactCurrentBatchConfig,Ih=!0;function _O(t,e,n,r){var i=Te,s=ea.transition;ea.transition=null;try{Te=1,jy(t,e,n,r)}finally{Te=i,ea.transition=s}}function wO(t,e,n,r){var i=Te,s=ea.transition;ea.transition=null;try{Te=4,jy(t,e,n,r)}finally{Te=i,ea.transition=s}}function jy(t,e,n,r){if(Ih){var i=Fg(t,e,n,r);if(i===null)Tm(t,e,r,bh,n),BE(t,r);else if(vO(i,t,e,n,r))r.stopPropagation();else if(BE(t,r),e&4&&-1<gO.indexOf(t)){for(;i!==null;){var s=hu(i);if(s!==null&&PS(s),s=Fg(t,e,n,r),s===null&&Tm(t,e,r,bh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Tm(t,e,r,null,n)}}var bh=null;function Fg(t,e,n,r){if(bh=null,t=My(r),t=Rs(t),t!==null)if(e=co(t),e===null)t=null;else if(n=e.tag,n===13){if(t=wS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bh=t,null}function NS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aO()){case Fy:return 1;case bS:return 4;case Eh:case lO:return 16;case SS:return 536870912;default:return 16}default:return 16}}var Ii=null,By=null,qd=null;function OS(){if(qd)return qd;var t,e=By,n=e.length,r,i="value"in Ii?Ii.value:Ii.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return qd=i.slice(t,1<r?1-r:void 0)}function Wd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cd(){return!0}function qE(){return!1}function xn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?cd:qE,this.isPropagationStopped=qE,this}return ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cd)},persist:function(){},isPersistent:cd}),e}var Ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zy=xn(Ua),du=ze({},Ua,{view:0,detail:0}),EO=xn(du),fm,pm,bl,Tf=ze({},du,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bl&&(bl&&t.type==="mousemove"?(fm=t.screenX-bl.screenX,pm=t.screenY-bl.screenY):pm=fm=0,bl=t),fm)},movementY:function(t){return"movementY"in t?t.movementY:pm}}),WE=xn(Tf),TO=ze({},Tf,{dataTransfer:0}),IO=xn(TO),bO=ze({},du,{relatedTarget:0}),mm=xn(bO),SO=ze({},Ua,{animationName:0,elapsedTime:0,pseudoElement:0}),RO=xn(SO),AO=ze({},Ua,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),PO=xn(AO),CO=ze({},Ua,{data:0}),KE=xn(CO),kO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=DO[t])?!!e[t]:!1}function qy(){return NO}var OO=ze({},du,{key:function(t){if(t.key){var e=kO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qy,charCode:function(t){return t.type==="keypress"?Wd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),LO=xn(OO),VO=ze({},Tf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),GE=xn(VO),MO=ze({},du,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qy}),FO=xn(MO),$O=ze({},Ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),UO=xn($O),jO=ze({},Tf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),BO=xn(jO),zO=[9,13,27,32],Wy=Kr&&"CompositionEvent"in window,nc=null;Kr&&"documentMode"in document&&(nc=document.documentMode);var qO=Kr&&"TextEvent"in window&&!nc,LS=Kr&&(!Wy||nc&&8<nc&&11>=nc),HE=" ",QE=!1;function VS(t,e){switch(t){case"keyup":return zO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Uo=!1;function WO(t,e){switch(t){case"compositionend":return MS(e);case"keypress":return e.which!==32?null:(QE=!0,HE);case"textInput":return t=e.data,t===HE&&QE?null:t;default:return null}}function KO(t,e){if(Uo)return t==="compositionend"||!Wy&&VS(t,e)?(t=OS(),qd=By=Ii=null,Uo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return LS&&e.locale!=="ko"?null:e.data;default:return null}}var GO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function YE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!GO[t.type]:e==="textarea"}function FS(t,e,n,r){mS(r),e=Sh(e,"onChange"),0<e.length&&(n=new zy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var rc=null,Rc=null;function HO(t){QS(t,0)}function If(t){var e=zo(t);if(lS(e))return t}function QO(t,e){if(t==="change")return e}var $S=!1;if(Kr){var gm;if(Kr){var vm="oninput"in document;if(!vm){var XE=document.createElement("div");XE.setAttribute("oninput","return;"),vm=typeof XE.oninput=="function"}gm=vm}else gm=!1;$S=gm&&(!document.documentMode||9<document.documentMode)}function JE(){rc&&(rc.detachEvent("onpropertychange",US),Rc=rc=null)}function US(t){if(t.propertyName==="value"&&If(Rc)){var e=[];FS(e,Rc,t,My(t)),_S(HO,e)}}function YO(t,e,n){t==="focusin"?(JE(),rc=e,Rc=n,rc.attachEvent("onpropertychange",US)):t==="focusout"&&JE()}function XO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return If(Rc)}function JO(t,e){if(t==="click")return If(e)}function ZO(t,e){if(t==="input"||t==="change")return If(e)}function eL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jn=typeof Object.is=="function"?Object.is:eL;function Ac(t,e){if(Jn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!wg.call(e,i)||!Jn(t[i],e[i]))return!1}return!0}function ZE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function eT(t,e){var n=ZE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ZE(n)}}function jS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function BS(){for(var t=window,e=yh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yh(t.document)}return e}function Ky(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tL(t){var e=BS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&jS(n.ownerDocument.documentElement,n)){if(r!==null&&Ky(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=eT(n,s);var o=eT(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nL=Kr&&"documentMode"in document&&11>=document.documentMode,jo=null,$g=null,ic=null,Ug=!1;function tT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ug||jo==null||jo!==yh(r)||(r=jo,"selectionStart"in r&&Ky(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ic&&Ac(ic,r)||(ic=r,r=Sh($g,"onSelect"),0<r.length&&(e=new zy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=jo)))}function ud(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bo={animationend:ud("Animation","AnimationEnd"),animationiteration:ud("Animation","AnimationIteration"),animationstart:ud("Animation","AnimationStart"),transitionend:ud("Transition","TransitionEnd")},ym={},zS={};Kr&&(zS=document.createElement("div").style,"AnimationEvent"in window||(delete Bo.animationend.animation,delete Bo.animationiteration.animation,delete Bo.animationstart.animation),"TransitionEvent"in window||delete Bo.transitionend.transition);function bf(t){if(ym[t])return ym[t];if(!Bo[t])return t;var e=Bo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zS)return ym[t]=e[n];return t}var qS=bf("animationend"),WS=bf("animationiteration"),KS=bf("animationstart"),GS=bf("transitionend"),HS=new Map,nT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zi(t,e){HS.set(t,e),lo(e,[t])}for(var _m=0;_m<nT.length;_m++){var wm=nT[_m],rL=wm.toLowerCase(),iL=wm[0].toUpperCase()+wm.slice(1);Zi(rL,"on"+iL)}Zi(qS,"onAnimationEnd");Zi(WS,"onAnimationIteration");Zi(KS,"onAnimationStart");Zi("dblclick","onDoubleClick");Zi("focusin","onFocus");Zi("focusout","onBlur");Zi(GS,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);lo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lo("onBeforeInput",["compositionend","keypress","textInput","paste"]);lo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sL=new Set("cancel close invalid load scroll toggle".split(" ").concat(zl));function rT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,rO(r,e,void 0,t),t.currentTarget=null}function QS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;rT(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;rT(i,a,u),s=l}}}if(wh)throw t=Lg,wh=!1,Lg=null,t}function xe(t,e){var n=e[Wg];n===void 0&&(n=e[Wg]=new Set);var r=t+"__bubble";n.has(r)||(YS(e,t,2,!1),n.add(r))}function Em(t,e,n){var r=0;e&&(r|=4),YS(n,t,r,e)}var dd="_reactListening"+Math.random().toString(36).slice(2);function Pc(t){if(!t[dd]){t[dd]=!0,rS.forEach(function(n){n!=="selectionchange"&&(sL.has(n)||Em(n,!1,t),Em(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[dd]||(e[dd]=!0,Em("selectionchange",!1,e))}}function YS(t,e,n,r){switch(NS(e)){case 1:var i=_O;break;case 4:i=wO;break;default:i=jy}n=i.bind(null,e,n,t),i=void 0,!Og||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Tm(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Rs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}_S(function(){var u=s,d=My(n),h=[];e:{var p=HS.get(t);if(p!==void 0){var v=zy,E=t;switch(t){case"keypress":if(Wd(n)===0)break e;case"keydown":case"keyup":v=LO;break;case"focusin":E="focus",v=mm;break;case"focusout":E="blur",v=mm;break;case"beforeblur":case"afterblur":v=mm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=WE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=IO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=FO;break;case qS:case WS:case KS:v=RO;break;case GS:v=UO;break;case"scroll":v=EO;break;case"wheel":v=BO;break;case"copy":case"cut":case"paste":v=PO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=GE}var _=(e&4)!==0,I=!_&&t==="scroll",w=_?p!==null?p+"Capture":null:p;_=[];for(var y=u,b;y!==null;){b=y;var D=b.stateNode;if(b.tag===5&&D!==null&&(b=D,w!==null&&(D=Tc(y,w),D!=null&&_.push(Cc(y,D,b)))),I)break;y=y.return}0<_.length&&(p=new v(p,E,null,n,d),h.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&n!==Dg&&(E=n.relatedTarget||n.fromElement)&&(Rs(E)||E[Gr]))break e;if((v||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,v?(E=n.relatedTarget||n.toElement,v=u,E=E?Rs(E):null,E!==null&&(I=co(E),E!==I||E.tag!==5&&E.tag!==6)&&(E=null)):(v=null,E=u),v!==E)){if(_=WE,D="onMouseLeave",w="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(_=GE,D="onPointerLeave",w="onPointerEnter",y="pointer"),I=v==null?p:zo(v),b=E==null?p:zo(E),p=new _(D,y+"leave",v,n,d),p.target=I,p.relatedTarget=b,D=null,Rs(d)===u&&(_=new _(w,y+"enter",E,n,d),_.target=b,_.relatedTarget=I,D=_),I=D,v&&E)t:{for(_=v,w=E,y=0,b=_;b;b=Io(b))y++;for(b=0,D=w;D;D=Io(D))b++;for(;0<y-b;)_=Io(_),y--;for(;0<b-y;)w=Io(w),b--;for(;y--;){if(_===w||w!==null&&_===w.alternate)break t;_=Io(_),w=Io(w)}_=null}else _=null;v!==null&&iT(h,p,v,_,!1),E!==null&&I!==null&&iT(h,I,E,_,!0)}}e:{if(p=u?zo(u):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var V=QO;else if(YE(p))if($S)V=ZO;else{V=XO;var $=YO}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(V=JO);if(V&&(V=V(t,u))){FS(h,V,n,d);break e}$&&$(t,p,u),t==="focusout"&&($=p._wrapperState)&&$.controlled&&p.type==="number"&&Ag(p,"number",p.value)}switch($=u?zo(u):window,t){case"focusin":(YE($)||$.contentEditable==="true")&&(jo=$,$g=u,ic=null);break;case"focusout":ic=$g=jo=null;break;case"mousedown":Ug=!0;break;case"contextmenu":case"mouseup":case"dragend":Ug=!1,tT(h,n,d);break;case"selectionchange":if(nL)break;case"keydown":case"keyup":tT(h,n,d)}var R;if(Wy)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Uo?VS(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(LS&&n.locale!=="ko"&&(Uo||T!=="onCompositionStart"?T==="onCompositionEnd"&&Uo&&(R=OS()):(Ii=d,By="value"in Ii?Ii.value:Ii.textContent,Uo=!0)),$=Sh(u,T),0<$.length&&(T=new KE(T,t,null,n,d),h.push({event:T,listeners:$}),R?T.data=R:(R=MS(n),R!==null&&(T.data=R)))),(R=qO?WO(t,n):KO(t,n))&&(u=Sh(u,"onBeforeInput"),0<u.length&&(d=new KE("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=R))}QS(h,e)})}function Cc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Tc(t,n),s!=null&&r.unshift(Cc(t,s,i)),s=Tc(t,e),s!=null&&r.push(Cc(t,s,i))),t=t.return}return r}function Io(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function iT(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Tc(n,s),l!=null&&o.unshift(Cc(n,l,a))):i||(l=Tc(n,s),l!=null&&o.push(Cc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var oL=/\r\n?/g,aL=/\u0000|\uFFFD/g;function sT(t){return(typeof t=="string"?t:""+t).replace(oL,`
`).replace(aL,"")}function hd(t,e,n){if(e=sT(e),sT(t)!==e&&n)throw Error(B(425))}function Rh(){}var jg=null,Bg=null;function zg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qg=typeof setTimeout=="function"?setTimeout:void 0,lL=typeof clearTimeout=="function"?clearTimeout:void 0,oT=typeof Promise=="function"?Promise:void 0,cL=typeof queueMicrotask=="function"?queueMicrotask:typeof oT<"u"?function(t){return oT.resolve(null).then(t).catch(uL)}:qg;function uL(t){setTimeout(function(){throw t})}function Im(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Sc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Sc(e)}function xi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function aT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ja=Math.random().toString(36).slice(2),ar="__reactFiber$"+ja,kc="__reactProps$"+ja,Gr="__reactContainer$"+ja,Wg="__reactEvents$"+ja,dL="__reactListeners$"+ja,hL="__reactHandles$"+ja;function Rs(t){var e=t[ar];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gr]||n[ar]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=aT(t);t!==null;){if(n=t[ar])return n;t=aT(t)}return e}t=n,n=t.parentNode}return null}function hu(t){return t=t[ar]||t[Gr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Sf(t){return t[kc]||null}var Kg=[],qo=-1;function es(t){return{current:t}}function Ne(t){0>qo||(t.current=Kg[qo],Kg[qo]=null,qo--)}function Ae(t,e){qo++,Kg[qo]=t.current,t.current=e}var Ui={},Bt=es(Ui),mn=es(!1),Us=Ui;function fa(t,e){var n=t.type.contextTypes;if(!n)return Ui;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function gn(t){return t=t.childContextTypes,t!=null}function Ah(){Ne(mn),Ne(Bt)}function lT(t,e,n){if(Bt.current!==Ui)throw Error(B(168));Ae(Bt,e),Ae(mn,n)}function XS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(B(108,Y2(t)||"Unknown",i));return ze({},n,r)}function Ph(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ui,Us=Bt.current,Ae(Bt,t),Ae(mn,mn.current),!0}function cT(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=XS(t,e,Us),r.__reactInternalMemoizedMergedChildContext=t,Ne(mn),Ne(Bt),Ae(Bt,t)):Ne(mn),Ae(mn,n)}var Lr=null,Rf=!1,bm=!1;function JS(t){Lr===null?Lr=[t]:Lr.push(t)}function fL(t){Rf=!0,JS(t)}function ts(){if(!bm&&Lr!==null){bm=!0;var t=0,e=Te;try{var n=Lr;for(Te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Lr=null,Rf=!1}catch(i){throw Lr!==null&&(Lr=Lr.slice(t+1)),IS(Fy,ts),i}finally{Te=e,bm=!1}}return null}var Wo=[],Ko=0,Ch=null,kh=0,Nn=[],On=0,js=null,Mr=1,Fr="";function gs(t,e){Wo[Ko++]=kh,Wo[Ko++]=Ch,Ch=t,kh=e}function ZS(t,e,n){Nn[On++]=Mr,Nn[On++]=Fr,Nn[On++]=js,js=t;var r=Mr;t=Fr;var i=32-Yn(r)-1;r&=~(1<<i),n+=1;var s=32-Yn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Mr=1<<32-Yn(e)+i|n<<i|r,Fr=s+t}else Mr=1<<s|n<<i|r,Fr=t}function Gy(t){t.return!==null&&(gs(t,1),ZS(t,1,0))}function Hy(t){for(;t===Ch;)Ch=Wo[--Ko],Wo[Ko]=null,kh=Wo[--Ko],Wo[Ko]=null;for(;t===js;)js=Nn[--On],Nn[On]=null,Fr=Nn[--On],Nn[On]=null,Mr=Nn[--On],Nn[On]=null}var Rn=null,bn=null,Me=!1,Qn=null;function eR(t,e){var n=Ln(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function uT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rn=t,bn=xi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rn=t,bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=js!==null?{id:Mr,overflow:Fr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ln(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Rn=t,bn=null,!0):!1;default:return!1}}function Gg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hg(t){if(Me){var e=bn;if(e){var n=e;if(!uT(t,e)){if(Gg(t))throw Error(B(418));e=xi(n.nextSibling);var r=Rn;e&&uT(t,e)?eR(r,n):(t.flags=t.flags&-4097|2,Me=!1,Rn=t)}}else{if(Gg(t))throw Error(B(418));t.flags=t.flags&-4097|2,Me=!1,Rn=t}}}function dT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rn=t}function fd(t){if(t!==Rn)return!1;if(!Me)return dT(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zg(t.type,t.memoizedProps)),e&&(e=bn)){if(Gg(t))throw tR(),Error(B(418));for(;e;)eR(t,e),e=xi(e.nextSibling)}if(dT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bn=xi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bn=null}}else bn=Rn?xi(t.stateNode.nextSibling):null;return!0}function tR(){for(var t=bn;t;)t=xi(t.nextSibling)}function pa(){bn=Rn=null,Me=!1}function Qy(t){Qn===null?Qn=[t]:Qn.push(t)}var pL=ei.ReactCurrentBatchConfig;function Sl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function pd(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hT(t){var e=t._init;return e(t._payload)}function nR(t){function e(w,y){if(t){var b=w.deletions;b===null?(w.deletions=[y],w.flags|=16):b.push(y)}}function n(w,y){if(!t)return null;for(;y!==null;)e(w,y),y=y.sibling;return null}function r(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function i(w,y){return w=Li(w,y),w.index=0,w.sibling=null,w}function s(w,y,b){return w.index=b,t?(b=w.alternate,b!==null?(b=b.index,b<y?(w.flags|=2,y):b):(w.flags|=2,y)):(w.flags|=1048576,y)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,y,b,D){return y===null||y.tag!==6?(y=xm(b,w.mode,D),y.return=w,y):(y=i(y,b),y.return=w,y)}function l(w,y,b,D){var V=b.type;return V===$o?d(w,y,b.props.children,D,b.key):y!==null&&(y.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===vi&&hT(V)===y.type)?(D=i(y,b.props),D.ref=Sl(w,y,b),D.return=w,D):(D=Jd(b.type,b.key,b.props,null,w.mode,D),D.ref=Sl(w,y,b),D.return=w,D)}function u(w,y,b,D){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=Dm(b,w.mode,D),y.return=w,y):(y=i(y,b.children||[]),y.return=w,y)}function d(w,y,b,D,V){return y===null||y.tag!==7?(y=Ls(b,w.mode,D,V),y.return=w,y):(y=i(y,b),y.return=w,y)}function h(w,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=xm(""+y,w.mode,b),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case rd:return b=Jd(y.type,y.key,y.props,null,w.mode,b),b.ref=Sl(w,null,y),b.return=w,b;case Fo:return y=Dm(y,w.mode,b),y.return=w,y;case vi:var D=y._init;return h(w,D(y._payload),b)}if(jl(y)||wl(y))return y=Ls(y,w.mode,b,null),y.return=w,y;pd(w,y)}return null}function p(w,y,b,D){var V=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return V!==null?null:a(w,y,""+b,D);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case rd:return b.key===V?l(w,y,b,D):null;case Fo:return b.key===V?u(w,y,b,D):null;case vi:return V=b._init,p(w,y,V(b._payload),D)}if(jl(b)||wl(b))return V!==null?null:d(w,y,b,D,null);pd(w,b)}return null}function v(w,y,b,D,V){if(typeof D=="string"&&D!==""||typeof D=="number")return w=w.get(b)||null,a(y,w,""+D,V);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case rd:return w=w.get(D.key===null?b:D.key)||null,l(y,w,D,V);case Fo:return w=w.get(D.key===null?b:D.key)||null,u(y,w,D,V);case vi:var $=D._init;return v(w,y,b,$(D._payload),V)}if(jl(D)||wl(D))return w=w.get(b)||null,d(y,w,D,V,null);pd(y,D)}return null}function E(w,y,b,D){for(var V=null,$=null,R=y,T=y=0,A=null;R!==null&&T<b.length;T++){R.index>T?(A=R,R=null):A=R.sibling;var k=p(w,R,b[T],D);if(k===null){R===null&&(R=A);break}t&&R&&k.alternate===null&&e(w,R),y=s(k,y,T),$===null?V=k:$.sibling=k,$=k,R=A}if(T===b.length)return n(w,R),Me&&gs(w,T),V;if(R===null){for(;T<b.length;T++)R=h(w,b[T],D),R!==null&&(y=s(R,y,T),$===null?V=R:$.sibling=R,$=R);return Me&&gs(w,T),V}for(R=r(w,R);T<b.length;T++)A=v(R,w,T,b[T],D),A!==null&&(t&&A.alternate!==null&&R.delete(A.key===null?T:A.key),y=s(A,y,T),$===null?V=A:$.sibling=A,$=A);return t&&R.forEach(function(N){return e(w,N)}),Me&&gs(w,T),V}function _(w,y,b,D){var V=wl(b);if(typeof V!="function")throw Error(B(150));if(b=V.call(b),b==null)throw Error(B(151));for(var $=V=null,R=y,T=y=0,A=null,k=b.next();R!==null&&!k.done;T++,k=b.next()){R.index>T?(A=R,R=null):A=R.sibling;var N=p(w,R,k.value,D);if(N===null){R===null&&(R=A);break}t&&R&&N.alternate===null&&e(w,R),y=s(N,y,T),$===null?V=N:$.sibling=N,$=N,R=A}if(k.done)return n(w,R),Me&&gs(w,T),V;if(R===null){for(;!k.done;T++,k=b.next())k=h(w,k.value,D),k!==null&&(y=s(k,y,T),$===null?V=k:$.sibling=k,$=k);return Me&&gs(w,T),V}for(R=r(w,R);!k.done;T++,k=b.next())k=v(R,w,T,k.value,D),k!==null&&(t&&k.alternate!==null&&R.delete(k.key===null?T:k.key),y=s(k,y,T),$===null?V=k:$.sibling=k,$=k);return t&&R.forEach(function(x){return e(w,x)}),Me&&gs(w,T),V}function I(w,y,b,D){if(typeof b=="object"&&b!==null&&b.type===$o&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case rd:e:{for(var V=b.key,$=y;$!==null;){if($.key===V){if(V=b.type,V===$o){if($.tag===7){n(w,$.sibling),y=i($,b.props.children),y.return=w,w=y;break e}}else if($.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===vi&&hT(V)===$.type){n(w,$.sibling),y=i($,b.props),y.ref=Sl(w,$,b),y.return=w,w=y;break e}n(w,$);break}else e(w,$);$=$.sibling}b.type===$o?(y=Ls(b.props.children,w.mode,D,b.key),y.return=w,w=y):(D=Jd(b.type,b.key,b.props,null,w.mode,D),D.ref=Sl(w,y,b),D.return=w,w=D)}return o(w);case Fo:e:{for($=b.key;y!==null;){if(y.key===$)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(w,y.sibling),y=i(y,b.children||[]),y.return=w,w=y;break e}else{n(w,y);break}else e(w,y);y=y.sibling}y=Dm(b,w.mode,D),y.return=w,w=y}return o(w);case vi:return $=b._init,I(w,y,$(b._payload),D)}if(jl(b))return E(w,y,b,D);if(wl(b))return _(w,y,b,D);pd(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(w,y.sibling),y=i(y,b),y.return=w,w=y):(n(w,y),y=xm(b,w.mode,D),y.return=w,w=y),o(w)):n(w,y)}return I}var ma=nR(!0),rR=nR(!1),xh=es(null),Dh=null,Go=null,Yy=null;function Xy(){Yy=Go=Dh=null}function Jy(t){var e=xh.current;Ne(xh),t._currentValue=e}function Qg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ta(t,e){Dh=t,Yy=Go=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dn=!0),t.firstContext=null)}function Un(t){var e=t._currentValue;if(Yy!==t)if(t={context:t,memoizedValue:e,next:null},Go===null){if(Dh===null)throw Error(B(308));Go=t,Dh.dependencies={lanes:0,firstContext:t}}else Go=Go.next=t;return e}var As=null;function Zy(t){As===null?As=[t]:As.push(t)}function iR(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Zy(e)):(n.next=i.next,i.next=n),e.interleaved=n,Hr(t,r)}function Hr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var yi=!1;function e_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Di(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Hr(t,n)}return i=r.interleaved,i===null?(e.next=e,Zy(r)):(e.next=i.next,i.next=e),r.interleaved=e,Hr(t,n)}function Kd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$y(t,n)}}function fT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nh(t,e,n,r){var i=t.updateQueue;yi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=u=l=null,a=s;do{var p=a.lane,v=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,_=a;switch(p=e,v=n,_.tag){case 1:if(E=_.payload,typeof E=="function"){h=E.call(v,h,p);break e}h=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=_.payload,p=typeof E=="function"?E.call(v,h,p):E,p==null)break e;h=ze({},h,p);break e;case 2:yi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else v={eventTime:v,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=v,l=h):d=d.next=v,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);zs|=o,t.lanes=o,t.memoizedState=h}}function pT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var fu={},yr=es(fu),xc=es(fu),Dc=es(fu);function Ps(t){if(t===fu)throw Error(B(174));return t}function t_(t,e){switch(Ae(Dc,e),Ae(xc,t),Ae(yr,fu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cg(e,t)}Ne(yr),Ae(yr,e)}function ga(){Ne(yr),Ne(xc),Ne(Dc)}function oR(t){Ps(Dc.current);var e=Ps(yr.current),n=Cg(e,t.type);e!==n&&(Ae(xc,t),Ae(yr,n))}function n_(t){xc.current===t&&(Ne(yr),Ne(xc))}var Ue=es(0);function Oh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sm=[];function r_(){for(var t=0;t<Sm.length;t++)Sm[t]._workInProgressVersionPrimary=null;Sm.length=0}var Gd=ei.ReactCurrentDispatcher,Rm=ei.ReactCurrentBatchConfig,Bs=0,je=null,ht=null,yt=null,Lh=!1,sc=!1,Nc=0,mL=0;function Vt(){throw Error(B(321))}function i_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jn(t[n],e[n]))return!1;return!0}function s_(t,e,n,r,i,s){if(Bs=s,je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gd.current=t===null||t.memoizedState===null?_L:wL,t=n(r,i),sc){s=0;do{if(sc=!1,Nc=0,25<=s)throw Error(B(301));s+=1,yt=ht=null,e.updateQueue=null,Gd.current=EL,t=n(r,i)}while(sc)}if(Gd.current=Vh,e=ht!==null&&ht.next!==null,Bs=0,yt=ht=je=null,Lh=!1,e)throw Error(B(300));return t}function o_(){var t=Nc!==0;return Nc=0,t}function sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?je.memoizedState=yt=t:yt=yt.next=t,yt}function jn(){if(ht===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var e=yt===null?je.memoizedState:yt.next;if(e!==null)yt=e,ht=t;else{if(t===null)throw Error(B(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},yt===null?je.memoizedState=yt=t:yt=yt.next=t}return yt}function Oc(t,e){return typeof e=="function"?e(t):e}function Am(t){var e=jn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=ht,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((Bs&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,je.lanes|=d,zs|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Jn(r,e.memoizedState)||(dn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,je.lanes|=s,zs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pm(t){var e=jn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Jn(s,e.memoizedState)||(dn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function aR(){}function lR(t,e){var n=je,r=jn(),i=e(),s=!Jn(r.memoizedState,i);if(s&&(r.memoizedState=i,dn=!0),r=r.queue,a_(dR.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,Lc(9,uR.bind(null,n,r,i,e),void 0,null),wt===null)throw Error(B(349));Bs&30||cR(n,e,i)}return i}function cR(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function uR(t,e,n,r){e.value=n,e.getSnapshot=r,hR(e)&&fR(t)}function dR(t,e,n){return n(function(){hR(e)&&fR(t)})}function hR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jn(t,n)}catch{return!0}}function fR(t){var e=Hr(t,1);e!==null&&Xn(e,t,1,-1)}function mT(t){var e=sr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oc,lastRenderedState:t},e.queue=t,t=t.dispatch=yL.bind(null,je,t),[e.memoizedState,t]}function Lc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function pR(){return jn().memoizedState}function Hd(t,e,n,r){var i=sr();je.flags|=t,i.memoizedState=Lc(1|e,n,void 0,r===void 0?null:r)}function Af(t,e,n,r){var i=jn();r=r===void 0?null:r;var s=void 0;if(ht!==null){var o=ht.memoizedState;if(s=o.destroy,r!==null&&i_(r,o.deps)){i.memoizedState=Lc(e,n,s,r);return}}je.flags|=t,i.memoizedState=Lc(1|e,n,s,r)}function gT(t,e){return Hd(8390656,8,t,e)}function a_(t,e){return Af(2048,8,t,e)}function mR(t,e){return Af(4,2,t,e)}function gR(t,e){return Af(4,4,t,e)}function vR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yR(t,e,n){return n=n!=null?n.concat([t]):null,Af(4,4,vR.bind(null,e,t),n)}function l_(){}function _R(t,e){var n=jn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&i_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function wR(t,e){var n=jn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&i_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ER(t,e,n){return Bs&21?(Jn(n,e)||(n=RS(),je.lanes|=n,zs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dn=!0),t.memoizedState=n)}function gL(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var r=Rm.transition;Rm.transition={};try{t(!1),e()}finally{Te=n,Rm.transition=r}}function TR(){return jn().memoizedState}function vL(t,e,n){var r=Oi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},IR(t))bR(e,n);else if(n=iR(t,e,n,r),n!==null){var i=Xt();Xn(n,t,r,i),SR(n,e,r)}}function yL(t,e,n){var r=Oi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(IR(t))bR(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Jn(a,o)){var l=e.interleaved;l===null?(i.next=i,Zy(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=iR(t,e,i,r),n!==null&&(i=Xt(),Xn(n,t,r,i),SR(n,e,r))}}function IR(t){var e=t.alternate;return t===je||e!==null&&e===je}function bR(t,e){sc=Lh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function SR(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$y(t,n)}}var Vh={readContext:Un,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},_L={readContext:Un,useCallback:function(t,e){return sr().memoizedState=[t,e===void 0?null:e],t},useContext:Un,useEffect:gT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Hd(4194308,4,vR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hd(4,2,t,e)},useMemo:function(t,e){var n=sr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=sr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vL.bind(null,je,t),[r.memoizedState,t]},useRef:function(t){var e=sr();return t={current:t},e.memoizedState=t},useState:mT,useDebugValue:l_,useDeferredValue:function(t){return sr().memoizedState=t},useTransition:function(){var t=mT(!1),e=t[0];return t=gL.bind(null,t[1]),sr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=je,i=sr();if(Me){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),wt===null)throw Error(B(349));Bs&30||cR(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,gT(dR.bind(null,r,s,t),[t]),r.flags|=2048,Lc(9,uR.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=sr(),e=wt.identifierPrefix;if(Me){var n=Fr,r=Mr;n=(r&~(1<<32-Yn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Nc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=mL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},wL={readContext:Un,useCallback:_R,useContext:Un,useEffect:a_,useImperativeHandle:yR,useInsertionEffect:mR,useLayoutEffect:gR,useMemo:wR,useReducer:Am,useRef:pR,useState:function(){return Am(Oc)},useDebugValue:l_,useDeferredValue:function(t){var e=jn();return ER(e,ht.memoizedState,t)},useTransition:function(){var t=Am(Oc)[0],e=jn().memoizedState;return[t,e]},useMutableSource:aR,useSyncExternalStore:lR,useId:TR,unstable_isNewReconciler:!1},EL={readContext:Un,useCallback:_R,useContext:Un,useEffect:a_,useImperativeHandle:yR,useInsertionEffect:mR,useLayoutEffect:gR,useMemo:wR,useReducer:Pm,useRef:pR,useState:function(){return Pm(Oc)},useDebugValue:l_,useDeferredValue:function(t){var e=jn();return ht===null?e.memoizedState=t:ER(e,ht.memoizedState,t)},useTransition:function(){var t=Pm(Oc)[0],e=jn().memoizedState;return[t,e]},useMutableSource:aR,useSyncExternalStore:lR,useId:TR,unstable_isNewReconciler:!1};function Gn(t,e){if(t&&t.defaultProps){e=ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Yg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Pf={isMounted:function(t){return(t=t._reactInternals)?co(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xt(),i=Oi(t),s=Br(r,i);s.payload=e,n!=null&&(s.callback=n),e=Di(t,s,i),e!==null&&(Xn(e,t,i,r),Kd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xt(),i=Oi(t),s=Br(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Di(t,s,i),e!==null&&(Xn(e,t,i,r),Kd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xt(),r=Oi(t),i=Br(n,r);i.tag=2,e!=null&&(i.callback=e),e=Di(t,i,r),e!==null&&(Xn(e,t,r,n),Kd(e,t,r))}};function vT(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ac(n,r)||!Ac(i,s):!0}function RR(t,e,n){var r=!1,i=Ui,s=e.contextType;return typeof s=="object"&&s!==null?s=Un(s):(i=gn(e)?Us:Bt.current,r=e.contextTypes,s=(r=r!=null)?fa(t,i):Ui),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Pf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function yT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Pf.enqueueReplaceState(e,e.state,null)}function Xg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},e_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Un(s):(s=gn(e)?Us:Bt.current,i.context=fa(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Yg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Pf.enqueueReplaceState(i,i.state,null),Nh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function va(t,e){try{var n="",r=e;do n+=Q2(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Cm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Jg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var TL=typeof WeakMap=="function"?WeakMap:Map;function AR(t,e,n){n=Br(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Fh||(Fh=!0,lv=r),Jg(t,e)},n}function PR(t,e,n){n=Br(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Jg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Jg(t,e),typeof r!="function"&&(Ni===null?Ni=new Set([this]):Ni.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function _T(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new TL;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=VL.bind(null,t,e,n),e.then(t,t))}function wT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ET(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Br(-1,1),e.tag=2,Di(n,e,1))),n.lanes|=1),t)}var IL=ei.ReactCurrentOwner,dn=!1;function Gt(t,e,n,r){e.child=t===null?rR(e,null,n,r):ma(e,t.child,n,r)}function TT(t,e,n,r,i){n=n.render;var s=e.ref;return ta(e,i),r=s_(t,e,n,r,s,i),n=o_(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qr(t,e,i)):(Me&&n&&Gy(e),e.flags|=1,Gt(t,e,r,i),e.child)}function IT(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!g_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,CR(t,e,s,r,i)):(t=Jd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ac,n(o,r)&&t.ref===e.ref)return Qr(t,e,i)}return e.flags|=1,t=Li(s,r),t.ref=e.ref,t.return=e,e.child=t}function CR(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ac(s,r)&&t.ref===e.ref)if(dn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(dn=!0);else return e.lanes=t.lanes,Qr(t,e,i)}return Zg(t,e,n,r,i)}function kR(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Qo,wn),wn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(Qo,wn),wn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ae(Qo,wn),wn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ae(Qo,wn),wn|=r;return Gt(t,e,i,n),e.child}function xR(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zg(t,e,n,r,i){var s=gn(n)?Us:Bt.current;return s=fa(e,s),ta(e,i),n=s_(t,e,n,r,s,i),r=o_(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qr(t,e,i)):(Me&&r&&Gy(e),e.flags|=1,Gt(t,e,n,i),e.child)}function bT(t,e,n,r,i){if(gn(n)){var s=!0;Ph(e)}else s=!1;if(ta(e,i),e.stateNode===null)Qd(t,e),RR(e,n,r),Xg(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Un(u):(u=gn(n)?Us:Bt.current,u=fa(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&yT(e,o,r,u),yi=!1;var p=e.memoizedState;o.state=p,Nh(e,r,o,i),l=e.memoizedState,a!==r||p!==l||mn.current||yi?(typeof d=="function"&&(Yg(e,n,d,r),l=e.memoizedState),(a=yi||vT(e,n,a,r,p,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,sR(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Gn(e.type,a),o.props=u,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Un(l):(l=gn(n)?Us:Bt.current,l=fa(e,l));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&yT(e,o,r,l),yi=!1,p=e.memoizedState,o.state=p,Nh(e,r,o,i);var E=e.memoizedState;a!==h||p!==E||mn.current||yi?(typeof v=="function"&&(Yg(e,n,v,r),E=e.memoizedState),(u=yi||vT(e,n,u,r,p,E,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return ev(t,e,n,r,s,i)}function ev(t,e,n,r,i,s){xR(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&cT(e,n,!1),Qr(t,e,s);r=e.stateNode,IL.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ma(e,t.child,null,s),e.child=ma(e,null,a,s)):Gt(t,e,a,s),e.memoizedState=r.state,i&&cT(e,n,!0),e.child}function DR(t){var e=t.stateNode;e.pendingContext?lT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&lT(t,e.context,!1),t_(t,e.containerInfo)}function ST(t,e,n,r,i){return pa(),Qy(i),e.flags|=256,Gt(t,e,n,r),e.child}var tv={dehydrated:null,treeContext:null,retryLane:0};function nv(t){return{baseLanes:t,cachePool:null,transitions:null}}function NR(t,e,n){var r=e.pendingProps,i=Ue.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ae(Ue,i&1),t===null)return Hg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=xf(o,r,0,null),t=Ls(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=nv(n),e.memoizedState=tv,t):c_(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return bL(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Li(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Li(a,s):(s=Ls(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?nv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=tv,r}return s=t.child,t=s.sibling,r=Li(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function c_(t,e){return e=xf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function md(t,e,n,r){return r!==null&&Qy(r),ma(e,t.child,null,n),t=c_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bL(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Cm(Error(B(422))),md(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=xf({mode:"visible",children:r.children},i,0,null),s=Ls(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ma(e,t.child,null,o),e.child.memoizedState=nv(o),e.memoizedState=tv,s);if(!(e.mode&1))return md(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(B(419)),r=Cm(s,r,void 0),md(t,e,o,r)}if(a=(o&t.childLanes)!==0,dn||a){if(r=wt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Hr(t,i),Xn(r,t,i,-1))}return m_(),r=Cm(Error(B(421))),md(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=ML.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,bn=xi(i.nextSibling),Rn=e,Me=!0,Qn=null,t!==null&&(Nn[On++]=Mr,Nn[On++]=Fr,Nn[On++]=js,Mr=t.id,Fr=t.overflow,js=e),e=c_(e,r.children),e.flags|=4096,e)}function RT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qg(t.return,e,n)}function km(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function OR(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Gt(t,e,r.children,n),r=Ue.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&RT(t,n,e);else if(t.tag===19)RT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae(Ue,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Oh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),km(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Oh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}km(e,!0,n,null,s);break;case"together":km(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Li(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Li(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function SL(t,e,n){switch(e.tag){case 3:DR(e),pa();break;case 5:oR(e);break;case 1:gn(e.type)&&Ph(e);break;case 4:t_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ae(xh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae(Ue,Ue.current&1),e.flags|=128,null):n&e.child.childLanes?NR(t,e,n):(Ae(Ue,Ue.current&1),t=Qr(t,e,n),t!==null?t.sibling:null);Ae(Ue,Ue.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return OR(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ae(Ue,Ue.current),r)break;return null;case 22:case 23:return e.lanes=0,kR(t,e,n)}return Qr(t,e,n)}var LR,rv,VR,MR;LR=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rv=function(){};VR=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ps(yr.current);var s=null;switch(n){case"input":i=Sg(t,i),r=Sg(t,r),s=[];break;case"select":i=ze({},i,{value:void 0}),r=ze({},r,{value:void 0}),s=[];break;case"textarea":i=Pg(t,i),r=Pg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Rh)}kg(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(wc.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(wc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&xe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};MR=function(t,e,n,r){n!==r&&(e.flags|=4)};function Rl(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function RL(t,e,n){var r=e.pendingProps;switch(Hy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return gn(e.type)&&Ah(),Mt(e),null;case 3:return r=e.stateNode,ga(),Ne(mn),Ne(Bt),r_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qn!==null&&(dv(Qn),Qn=null))),rv(t,e),Mt(e),null;case 5:n_(e);var i=Ps(Dc.current);if(n=e.type,t!==null&&e.stateNode!=null)VR(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return Mt(e),null}if(t=Ps(yr.current),fd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ar]=e,r[kc]=s,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(i=0;i<zl.length;i++)xe(zl[i],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":LE(r,s),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},xe("invalid",r);break;case"textarea":ME(r,s),xe("invalid",r)}kg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&hd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&hd(r.textContent,a,t),i=["children",""+a]):wc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xe("scroll",r)}switch(n){case"input":id(r),VE(r,s,!0);break;case"textarea":id(r),FE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Rh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=dS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ar]=e,t[kc]=r,LR(t,e,!1,!1),e.stateNode=t;e:{switch(o=xg(n,r),n){case"dialog":xe("cancel",t),xe("close",t),i=r;break;case"iframe":case"object":case"embed":xe("load",t),i=r;break;case"video":case"audio":for(i=0;i<zl.length;i++)xe(zl[i],t);i=r;break;case"source":xe("error",t),i=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),i=r;break;case"details":xe("toggle",t),i=r;break;case"input":LE(t,r),i=Sg(t,r),xe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ze({},r,{value:void 0}),xe("invalid",t);break;case"textarea":ME(t,r),i=Pg(t,r),xe("invalid",t);break;default:i=r}kg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?pS(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&hS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ec(t,l):typeof l=="number"&&Ec(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(wc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&xe("scroll",t):l!=null&&Ny(t,s,l,o))}switch(n){case"input":id(t),VE(t,r,!1);break;case"textarea":id(t),FE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+$i(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Xo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Xo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Rh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)MR(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Ps(Dc.current),Ps(yr.current),fd(e)){if(r=e.stateNode,n=e.memoizedProps,r[ar]=e,(s=r.nodeValue!==n)&&(t=Rn,t!==null))switch(t.tag){case 3:hd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ar]=e,e.stateNode=r}return Mt(e),null;case 13:if(Ne(Ue),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&bn!==null&&e.mode&1&&!(e.flags&128))tR(),pa(),e.flags|=98560,s=!1;else if(s=fd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[ar]=e}else pa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),s=!1}else Qn!==null&&(dv(Qn),Qn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ue.current&1?ft===0&&(ft=3):m_())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return ga(),rv(t,e),t===null&&Pc(e.stateNode.containerInfo),Mt(e),null;case 10:return Jy(e.type._context),Mt(e),null;case 17:return gn(e.type)&&Ah(),Mt(e),null;case 19:if(Ne(Ue),s=e.memoizedState,s===null)return Mt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Rl(s,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Oh(t),o!==null){for(e.flags|=128,Rl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(Ue,Ue.current&1|2),e.child}t=t.sibling}s.tail!==null&&nt()>ya&&(e.flags|=128,r=!0,Rl(s,!1),e.lanes=4194304)}else{if(!r)if(t=Oh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Rl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Me)return Mt(e),null}else 2*nt()-s.renderingStartTime>ya&&n!==1073741824&&(e.flags|=128,r=!0,Rl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=nt(),e.sibling=null,n=Ue.current,Ae(Ue,r?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return p_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function AL(t,e){switch(Hy(e),e.tag){case 1:return gn(e.type)&&Ah(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ga(),Ne(mn),Ne(Bt),r_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return n_(e),null;case 13:if(Ne(Ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));pa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne(Ue),null;case 4:return ga(),null;case 10:return Jy(e.type._context),null;case 22:case 23:return p_(),null;case 24:return null;default:return null}}var gd=!1,Ut=!1,PL=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Ho(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(t,e,r)}else n.current=null}function iv(t,e,n){try{n()}catch(r){He(t,e,r)}}var AT=!1;function CL(t,e){if(jg=Ih,t=BS(),Ky(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,p=null;t:for(;;){for(var v;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(v=h.firstChild)!==null;)p=h,h=v;for(;;){if(h===t)break t;if(p===n&&++u===i&&(a=o),p===s&&++d===r&&(l=o),(v=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=v}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bg={focusedElem:t,selectionRange:n},Ih=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var _=E.memoizedProps,I=E.memoizedState,w=e.stateNode,y=w.getSnapshotBeforeUpdate(e.elementType===e.type?_:Gn(e.type,_),I);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(D){He(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return E=AT,AT=!1,E}function oc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&iv(e,n,s)}i=i.next}while(i!==r)}}function Cf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function sv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function FR(t){var e=t.alternate;e!==null&&(t.alternate=null,FR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ar],delete e[kc],delete e[Wg],delete e[dL],delete e[hL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $R(t){return t.tag===5||t.tag===3||t.tag===4}function PT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$R(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ov(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Rh));else if(r!==4&&(t=t.child,t!==null))for(ov(t,e,n),t=t.sibling;t!==null;)ov(t,e,n),t=t.sibling}function av(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(av(t,e,n),t=t.sibling;t!==null;)av(t,e,n),t=t.sibling}var bt=null,Hn=!1;function di(t,e,n){for(n=n.child;n!==null;)UR(t,e,n),n=n.sibling}function UR(t,e,n){if(vr&&typeof vr.onCommitFiberUnmount=="function")try{vr.onCommitFiberUnmount(Ef,n)}catch{}switch(n.tag){case 5:Ut||Ho(n,e);case 6:var r=bt,i=Hn;bt=null,di(t,e,n),bt=r,Hn=i,bt!==null&&(Hn?(t=bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):bt.removeChild(n.stateNode));break;case 18:bt!==null&&(Hn?(t=bt,n=n.stateNode,t.nodeType===8?Im(t.parentNode,n):t.nodeType===1&&Im(t,n),Sc(t)):Im(bt,n.stateNode));break;case 4:r=bt,i=Hn,bt=n.stateNode.containerInfo,Hn=!0,di(t,e,n),bt=r,Hn=i;break;case 0:case 11:case 14:case 15:if(!Ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&iv(n,e,o),i=i.next}while(i!==r)}di(t,e,n);break;case 1:if(!Ut&&(Ho(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){He(n,e,a)}di(t,e,n);break;case 21:di(t,e,n);break;case 22:n.mode&1?(Ut=(r=Ut)||n.memoizedState!==null,di(t,e,n),Ut=r):di(t,e,n);break;default:di(t,e,n)}}function CT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new PL),e.forEach(function(r){var i=FL.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Wn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:bt=a.stateNode,Hn=!1;break e;case 3:bt=a.stateNode.containerInfo,Hn=!0;break e;case 4:bt=a.stateNode.containerInfo,Hn=!0;break e}a=a.return}if(bt===null)throw Error(B(160));UR(s,o,i),bt=null,Hn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){He(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jR(e,t),e=e.sibling}function jR(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wn(e,t),ir(t),r&4){try{oc(3,t,t.return),Cf(3,t)}catch(_){He(t,t.return,_)}try{oc(5,t,t.return)}catch(_){He(t,t.return,_)}}break;case 1:Wn(e,t),ir(t),r&512&&n!==null&&Ho(n,n.return);break;case 5:if(Wn(e,t),ir(t),r&512&&n!==null&&Ho(n,n.return),t.flags&32){var i=t.stateNode;try{Ec(i,"")}catch(_){He(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&cS(i,s),xg(a,o);var u=xg(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?pS(i,h):d==="dangerouslySetInnerHTML"?hS(i,h):d==="children"?Ec(i,h):Ny(i,d,h,u)}switch(a){case"input":Rg(i,s);break;case"textarea":uS(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?Xo(i,!!s.multiple,v,!1):p!==!!s.multiple&&(s.defaultValue!=null?Xo(i,!!s.multiple,s.defaultValue,!0):Xo(i,!!s.multiple,s.multiple?[]:"",!1))}i[kc]=s}catch(_){He(t,t.return,_)}}break;case 6:if(Wn(e,t),ir(t),r&4){if(t.stateNode===null)throw Error(B(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){He(t,t.return,_)}}break;case 3:if(Wn(e,t),ir(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Sc(e.containerInfo)}catch(_){He(t,t.return,_)}break;case 4:Wn(e,t),ir(t);break;case 13:Wn(e,t),ir(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(h_=nt())),r&4&&CT(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ut=(u=Ut)||d,Wn(e,t),Ut=u):Wn(e,t),ir(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Q=t,d=t.child;d!==null;){for(h=Q=d;Q!==null;){switch(p=Q,v=p.child,p.tag){case 0:case 11:case 14:case 15:oc(4,p,p.return);break;case 1:Ho(p,p.return);var E=p.stateNode;if(typeof E.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(_){He(r,n,_)}}break;case 5:Ho(p,p.return);break;case 22:if(p.memoizedState!==null){xT(h);continue}}v!==null?(v.return=p,Q=v):xT(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=fS("display",o))}catch(_){He(t,t.return,_)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(_){He(t,t.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Wn(e,t),ir(t),r&4&&CT(t);break;case 21:break;default:Wn(e,t),ir(t)}}function ir(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($R(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ec(i,""),r.flags&=-33);var s=PT(t);av(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=PT(t);ov(t,a,o);break;default:throw Error(B(161))}}catch(l){He(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kL(t,e,n){Q=t,BR(t)}function BR(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||gd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ut;a=gd;var u=Ut;if(gd=o,(Ut=l)&&!u)for(Q=i;Q!==null;)o=Q,l=o.child,o.tag===22&&o.memoizedState!==null?DT(i):l!==null?(l.return=o,Q=l):DT(i);for(;s!==null;)Q=s,BR(s),s=s.sibling;Q=i,gd=a,Ut=u}kT(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Q=s):kT(t)}}function kT(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ut||Cf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ut)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Gn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&pT(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}pT(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Sc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Ut||e.flags&512&&sv(e)}catch(p){He(e,e.return,p)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function xT(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function DT(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cf(4,e)}catch(l){He(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){He(e,i,l)}}var s=e.return;try{sv(e)}catch(l){He(e,s,l)}break;case 5:var o=e.return;try{sv(e)}catch(l){He(e,o,l)}}}catch(l){He(e,e.return,l)}if(e===t){Q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Q=a;break}Q=e.return}}var xL=Math.ceil,Mh=ei.ReactCurrentDispatcher,u_=ei.ReactCurrentOwner,Fn=ei.ReactCurrentBatchConfig,me=0,wt=null,ut=null,At=0,wn=0,Qo=es(0),ft=0,Vc=null,zs=0,kf=0,d_=0,ac=null,un=null,h_=0,ya=1/0,Dr=null,Fh=!1,lv=null,Ni=null,vd=!1,bi=null,$h=0,lc=0,cv=null,Yd=-1,Xd=0;function Xt(){return me&6?nt():Yd!==-1?Yd:Yd=nt()}function Oi(t){return t.mode&1?me&2&&At!==0?At&-At:pL.transition!==null?(Xd===0&&(Xd=RS()),Xd):(t=Te,t!==0||(t=window.event,t=t===void 0?16:NS(t.type)),t):1}function Xn(t,e,n,r){if(50<lc)throw lc=0,cv=null,Error(B(185));uu(t,n,r),(!(me&2)||t!==wt)&&(t===wt&&(!(me&2)&&(kf|=n),ft===4&&wi(t,At)),vn(t,r),n===1&&me===0&&!(e.mode&1)&&(ya=nt()+500,Rf&&ts()))}function vn(t,e){var n=t.callbackNode;pO(t,e);var r=Th(t,t===wt?At:0);if(r===0)n!==null&&jE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&jE(n),e===1)t.tag===0?fL(NT.bind(null,t)):JS(NT.bind(null,t)),cL(function(){!(me&6)&&ts()}),n=null;else{switch(AS(r)){case 1:n=Fy;break;case 4:n=bS;break;case 16:n=Eh;break;case 536870912:n=SS;break;default:n=Eh}n=YR(n,zR.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zR(t,e){if(Yd=-1,Xd=0,me&6)throw Error(B(327));var n=t.callbackNode;if(na()&&t.callbackNode!==n)return null;var r=Th(t,t===wt?At:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Uh(t,r);else{e=r;var i=me;me|=2;var s=WR();(wt!==t||At!==e)&&(Dr=null,ya=nt()+500,Os(t,e));do try{OL();break}catch(a){qR(t,a)}while(!0);Xy(),Mh.current=s,me=i,ut!==null?e=0:(wt=null,At=0,e=ft)}if(e!==0){if(e===2&&(i=Vg(t),i!==0&&(r=i,e=uv(t,i))),e===1)throw n=Vc,Os(t,0),wi(t,r),vn(t,nt()),n;if(e===6)wi(t,r);else{if(i=t.current.alternate,!(r&30)&&!DL(i)&&(e=Uh(t,r),e===2&&(s=Vg(t),s!==0&&(r=s,e=uv(t,s))),e===1))throw n=Vc,Os(t,0),wi(t,r),vn(t,nt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:vs(t,un,Dr);break;case 3:if(wi(t,r),(r&130023424)===r&&(e=h_+500-nt(),10<e)){if(Th(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Xt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=qg(vs.bind(null,t,un,Dr),e);break}vs(t,un,Dr);break;case 4:if(wi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Yn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xL(r/1960))-r,10<r){t.timeoutHandle=qg(vs.bind(null,t,un,Dr),r);break}vs(t,un,Dr);break;case 5:vs(t,un,Dr);break;default:throw Error(B(329))}}}return vn(t,nt()),t.callbackNode===n?zR.bind(null,t):null}function uv(t,e){var n=ac;return t.current.memoizedState.isDehydrated&&(Os(t,e).flags|=256),t=Uh(t,e),t!==2&&(e=un,un=n,e!==null&&dv(e)),t}function dv(t){un===null?un=t:un.push.apply(un,t)}function DL(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Jn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wi(t,e){for(e&=~d_,e&=~kf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yn(e),r=1<<n;t[n]=-1,e&=~r}}function NT(t){if(me&6)throw Error(B(327));na();var e=Th(t,0);if(!(e&1))return vn(t,nt()),null;var n=Uh(t,e);if(t.tag!==0&&n===2){var r=Vg(t);r!==0&&(e=r,n=uv(t,r))}if(n===1)throw n=Vc,Os(t,0),wi(t,e),vn(t,nt()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vs(t,un,Dr),vn(t,nt()),null}function f_(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(ya=nt()+500,Rf&&ts())}}function qs(t){bi!==null&&bi.tag===0&&!(me&6)&&na();var e=me;me|=1;var n=Fn.transition,r=Te;try{if(Fn.transition=null,Te=1,t)return t()}finally{Te=r,Fn.transition=n,me=e,!(me&6)&&ts()}}function p_(){wn=Qo.current,Ne(Qo)}function Os(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,lL(n)),ut!==null)for(n=ut.return;n!==null;){var r=n;switch(Hy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ah();break;case 3:ga(),Ne(mn),Ne(Bt),r_();break;case 5:n_(r);break;case 4:ga();break;case 13:Ne(Ue);break;case 19:Ne(Ue);break;case 10:Jy(r.type._context);break;case 22:case 23:p_()}n=n.return}if(wt=t,ut=t=Li(t.current,null),At=wn=e,ft=0,Vc=null,d_=kf=zs=0,un=ac=null,As!==null){for(e=0;e<As.length;e++)if(n=As[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}As=null}return t}function qR(t,e){do{var n=ut;try{if(Xy(),Gd.current=Vh,Lh){for(var r=je.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Lh=!1}if(Bs=0,yt=ht=je=null,sc=!1,Nc=0,u_.current=null,n===null||n.return===null){ft=1,Vc=e,ut=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=At,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=wT(o);if(v!==null){v.flags&=-257,ET(v,o,a,s,e),v.mode&1&&_T(s,u,e),e=v,l=u;var E=e.updateQueue;if(E===null){var _=new Set;_.add(l),e.updateQueue=_}else E.add(l);break e}else{if(!(e&1)){_T(s,u,e),m_();break e}l=Error(B(426))}}else if(Me&&a.mode&1){var I=wT(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),ET(I,o,a,s,e),Qy(va(l,a));break e}}s=l=va(l,a),ft!==4&&(ft=2),ac===null?ac=[s]:ac.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=AR(s,l,e);fT(s,w);break e;case 1:a=l;var y=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ni===null||!Ni.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=PR(s,a,e);fT(s,D);break e}}s=s.return}while(s!==null)}GR(n)}catch(V){e=V,ut===n&&n!==null&&(ut=n=n.return);continue}break}while(!0)}function WR(){var t=Mh.current;return Mh.current=Vh,t===null?Vh:t}function m_(){(ft===0||ft===3||ft===2)&&(ft=4),wt===null||!(zs&268435455)&&!(kf&268435455)||wi(wt,At)}function Uh(t,e){var n=me;me|=2;var r=WR();(wt!==t||At!==e)&&(Dr=null,Os(t,e));do try{NL();break}catch(i){qR(t,i)}while(!0);if(Xy(),me=n,Mh.current=r,ut!==null)throw Error(B(261));return wt=null,At=0,ft}function NL(){for(;ut!==null;)KR(ut)}function OL(){for(;ut!==null&&!sO();)KR(ut)}function KR(t){var e=QR(t.alternate,t,wn);t.memoizedProps=t.pendingProps,e===null?GR(t):ut=e,u_.current=null}function GR(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=AL(n,e),n!==null){n.flags&=32767,ut=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,ut=null;return}}else if(n=RL(n,e,wn),n!==null){ut=n;return}if(e=e.sibling,e!==null){ut=e;return}ut=e=t}while(e!==null);ft===0&&(ft=5)}function vs(t,e,n){var r=Te,i=Fn.transition;try{Fn.transition=null,Te=1,LL(t,e,n,r)}finally{Fn.transition=i,Te=r}return null}function LL(t,e,n,r){do na();while(bi!==null);if(me&6)throw Error(B(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(mO(t,s),t===wt&&(ut=wt=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vd||(vd=!0,YR(Eh,function(){return na(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Fn.transition,Fn.transition=null;var o=Te;Te=1;var a=me;me|=4,u_.current=null,CL(t,n),jR(n,t),tL(Bg),Ih=!!jg,Bg=jg=null,t.current=n,kL(n),oO(),me=a,Te=o,Fn.transition=s}else t.current=n;if(vd&&(vd=!1,bi=t,$h=i),s=t.pendingLanes,s===0&&(Ni=null),cO(n.stateNode),vn(t,nt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Fh)throw Fh=!1,t=lv,lv=null,t;return $h&1&&t.tag!==0&&na(),s=t.pendingLanes,s&1?t===cv?lc++:(lc=0,cv=t):lc=0,ts(),null}function na(){if(bi!==null){var t=AS($h),e=Fn.transition,n=Te;try{if(Fn.transition=null,Te=16>t?16:t,bi===null)var r=!1;else{if(t=bi,bi=null,$h=0,me&6)throw Error(B(331));var i=me;for(me|=4,Q=t.current;Q!==null;){var s=Q,o=s.child;if(Q.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Q=u;Q!==null;){var d=Q;switch(d.tag){case 0:case 11:case 15:oc(8,d,s)}var h=d.child;if(h!==null)h.return=d,Q=h;else for(;Q!==null;){d=Q;var p=d.sibling,v=d.return;if(FR(d),d===u){Q=null;break}if(p!==null){p.return=v,Q=p;break}Q=v}}}var E=s.alternate;if(E!==null){var _=E.child;if(_!==null){E.child=null;do{var I=_.sibling;_.sibling=null,_=I}while(_!==null)}}Q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Q=o;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:oc(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,Q=w;break e}Q=s.return}}var y=t.current;for(Q=y;Q!==null;){o=Q;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Q=b;else e:for(o=y;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Cf(9,a)}}catch(V){He(a,a.return,V)}if(a===o){Q=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,Q=D;break e}Q=a.return}}if(me=i,ts(),vr&&typeof vr.onPostCommitFiberRoot=="function")try{vr.onPostCommitFiberRoot(Ef,t)}catch{}r=!0}return r}finally{Te=n,Fn.transition=e}}return!1}function OT(t,e,n){e=va(n,e),e=AR(t,e,1),t=Di(t,e,1),e=Xt(),t!==null&&(uu(t,1,e),vn(t,e))}function He(t,e,n){if(t.tag===3)OT(t,t,n);else for(;e!==null;){if(e.tag===3){OT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ni===null||!Ni.has(r))){t=va(n,t),t=PR(e,t,1),e=Di(e,t,1),t=Xt(),e!==null&&(uu(e,1,t),vn(e,t));break}}e=e.return}}function VL(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xt(),t.pingedLanes|=t.suspendedLanes&n,wt===t&&(At&n)===n&&(ft===4||ft===3&&(At&130023424)===At&&500>nt()-h_?Os(t,0):d_|=n),vn(t,e)}function HR(t,e){e===0&&(t.mode&1?(e=ad,ad<<=1,!(ad&130023424)&&(ad=4194304)):e=1);var n=Xt();t=Hr(t,e),t!==null&&(uu(t,e,n),vn(t,n))}function ML(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),HR(t,n)}function FL(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),HR(t,n)}var QR;QR=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||mn.current)dn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dn=!1,SL(t,e,n);dn=!!(t.flags&131072)}else dn=!1,Me&&e.flags&1048576&&ZS(e,kh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Qd(t,e),t=e.pendingProps;var i=fa(e,Bt.current);ta(e,n),i=s_(null,e,r,t,i,n);var s=o_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gn(r)?(s=!0,Ph(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,e_(e),i.updater=Pf,e.stateNode=i,i._reactInternals=e,Xg(e,r,t,n),e=ev(null,e,r,!0,s,n)):(e.tag=0,Me&&s&&Gy(e),Gt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Qd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=UL(r),t=Gn(r,t),i){case 0:e=Zg(null,e,r,t,n);break e;case 1:e=bT(null,e,r,t,n);break e;case 11:e=TT(null,e,r,t,n);break e;case 14:e=IT(null,e,r,Gn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gn(r,i),Zg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gn(r,i),bT(t,e,r,i,n);case 3:e:{if(DR(e),t===null)throw Error(B(387));r=e.pendingProps,s=e.memoizedState,i=s.element,sR(t,e),Nh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=va(Error(B(423)),e),e=ST(t,e,r,n,i);break e}else if(r!==i){i=va(Error(B(424)),e),e=ST(t,e,r,n,i);break e}else for(bn=xi(e.stateNode.containerInfo.firstChild),Rn=e,Me=!0,Qn=null,n=rR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pa(),r===i){e=Qr(t,e,n);break e}Gt(t,e,r,n)}e=e.child}return e;case 5:return oR(e),t===null&&Hg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,zg(r,i)?o=null:s!==null&&zg(r,s)&&(e.flags|=32),xR(t,e),Gt(t,e,o,n),e.child;case 6:return t===null&&Hg(e),null;case 13:return NR(t,e,n);case 4:return t_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ma(e,null,r,n):Gt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gn(r,i),TT(t,e,r,i,n);case 7:return Gt(t,e,e.pendingProps,n),e.child;case 8:return Gt(t,e,e.pendingProps.children,n),e.child;case 12:return Gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ae(xh,r._currentValue),r._currentValue=o,s!==null)if(Jn(s.value,o)){if(s.children===i.children&&!mn.current){e=Qr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Br(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Qg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Qg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Gt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ta(e,n),i=Un(i),r=r(i),e.flags|=1,Gt(t,e,r,n),e.child;case 14:return r=e.type,i=Gn(r,e.pendingProps),i=Gn(r.type,i),IT(t,e,r,i,n);case 15:return CR(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gn(r,i),Qd(t,e),e.tag=1,gn(r)?(t=!0,Ph(e)):t=!1,ta(e,n),RR(e,r,i),Xg(e,r,i,n),ev(null,e,r,!0,t,n);case 19:return OR(t,e,n);case 22:return kR(t,e,n)}throw Error(B(156,e.tag))};function YR(t,e){return IS(t,e)}function $L(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(t,e,n,r){return new $L(t,e,n,r)}function g_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function UL(t){if(typeof t=="function")return g_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ly)return 11;if(t===Vy)return 14}return 2}function Li(t,e){var n=t.alternate;return n===null?(n=Ln(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Jd(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")g_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $o:return Ls(n.children,i,s,e);case Oy:o=8,i|=8;break;case Eg:return t=Ln(12,n,e,i|2),t.elementType=Eg,t.lanes=s,t;case Tg:return t=Ln(13,n,e,i),t.elementType=Tg,t.lanes=s,t;case Ig:return t=Ln(19,n,e,i),t.elementType=Ig,t.lanes=s,t;case oS:return xf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case iS:o=10;break e;case sS:o=9;break e;case Ly:o=11;break e;case Vy:o=14;break e;case vi:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Ln(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ls(t,e,n,r){return t=Ln(7,t,r,e),t.lanes=n,t}function xf(t,e,n,r){return t=Ln(22,t,r,e),t.elementType=oS,t.lanes=n,t.stateNode={isHidden:!1},t}function xm(t,e,n){return t=Ln(6,t,null,e),t.lanes=n,t}function Dm(t,e,n){return e=Ln(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jL(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hm(0),this.expirationTimes=hm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function v_(t,e,n,r,i,s,o,a,l){return t=new jL(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ln(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},e_(s),t}function BL(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function XR(t){if(!t)return Ui;t=t._reactInternals;e:{if(co(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(gn(n))return XS(t,n,e)}return e}function JR(t,e,n,r,i,s,o,a,l){return t=v_(n,r,!0,t,i,s,o,a,l),t.context=XR(null),n=t.current,r=Xt(),i=Oi(n),s=Br(r,i),s.callback=e??null,Di(n,s,i),t.current.lanes=i,uu(t,i,r),vn(t,r),t}function Df(t,e,n,r){var i=e.current,s=Xt(),o=Oi(i);return n=XR(n),e.context===null?e.context=n:e.pendingContext=n,e=Br(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Di(i,e,o),t!==null&&(Xn(t,i,o,s),Kd(t,i,o)),o}function jh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function LT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function y_(t,e){LT(t,e),(t=t.alternate)&&LT(t,e)}var ZR=typeof reportError=="function"?reportError:function(t){console.error(t)};function __(t){this._internalRoot=t}Nf.prototype.render=__.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Df(t,e,null,null)};Nf.prototype.unmount=__.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;qs(function(){Df(null,t,null,null)}),e[Gr]=null}};function Nf(t){this._internalRoot=t}Nf.prototype.unstable_scheduleHydration=function(t){if(t){var e=kS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_i.length&&e!==0&&e<_i[n].priority;n++);_i.splice(n,0,t),n===0&&DS(t)}};function w_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Of(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function VT(){}function zL(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=jh(o);s.call(u)}}var o=JR(e,r,t,0,null,!1,!1,"",VT);return t._reactRootContainer=o,t[Gr]=o.current,Pc(t.nodeType===8?t.parentNode:t),qs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=jh(l);a.call(u)}}var l=v_(t,0,!1,null,null,!1,!1,"",VT);return t._reactRootContainer=l,t[Gr]=l.current,Pc(t.nodeType===8?t.parentNode:t),qs(function(){Df(e,l,n,r)}),l}function Lf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=jh(o);a.call(l)}}Df(e,o,t,i)}else o=zL(n,e,t,i,r);return jh(o)}PS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bl(e.pendingLanes);n!==0&&($y(e,n|1),vn(e,nt()),!(me&6)&&(ya=nt()+500,ts()))}break;case 13:qs(function(){var r=Hr(t,1);if(r!==null){var i=Xt();Xn(r,t,1,i)}}),y_(t,1)}};Uy=function(t){if(t.tag===13){var e=Hr(t,134217728);if(e!==null){var n=Xt();Xn(e,t,134217728,n)}y_(t,134217728)}};CS=function(t){if(t.tag===13){var e=Oi(t),n=Hr(t,e);if(n!==null){var r=Xt();Xn(n,t,e,r)}y_(t,e)}};kS=function(){return Te};xS=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};Ng=function(t,e,n){switch(e){case"input":if(Rg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Sf(r);if(!i)throw Error(B(90));lS(r),Rg(r,i)}}}break;case"textarea":uS(t,n);break;case"select":e=n.value,e!=null&&Xo(t,!!n.multiple,e,!1)}};vS=f_;yS=qs;var qL={usingClientEntryPoint:!1,Events:[hu,zo,Sf,mS,gS,f_]},Al={findFiberByHostInstance:Rs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WL={bundleType:Al.bundleType,version:Al.version,rendererPackageName:Al.rendererPackageName,rendererConfig:Al.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ei.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ES(t),t===null?null:t.stateNode},findFiberByHostInstance:Al.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yd.isDisabled&&yd.supportsFiber)try{Ef=yd.inject(WL),vr=yd}catch{}}kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qL;kn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w_(e))throw Error(B(200));return BL(t,e,null,n)};kn.createRoot=function(t,e){if(!w_(t))throw Error(B(299));var n=!1,r="",i=ZR;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=v_(t,1,!1,null,null,n,!1,r,i),t[Gr]=e.current,Pc(t.nodeType===8?t.parentNode:t),new __(e)};kn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=ES(e),t=t===null?null:t.stateNode,t};kn.flushSync=function(t){return qs(t)};kn.hydrate=function(t,e,n){if(!Of(e))throw Error(B(200));return Lf(null,t,e,!0,n)};kn.hydrateRoot=function(t,e,n){if(!w_(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=ZR;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=JR(e,null,t,1,n??null,i,!1,s,o),t[Gr]=e.current,Pc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Nf(e)};kn.render=function(t,e,n){if(!Of(e))throw Error(B(200));return Lf(null,t,e,!1,n)};kn.unmountComponentAtNode=function(t){if(!Of(t))throw Error(B(40));return t._reactRootContainer?(qs(function(){Lf(null,null,t,!1,function(){t._reactRootContainer=null,t[Gr]=null})}),!0):!1};kn.unstable_batchedUpdates=f_;kn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Of(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Lf(t,e,n,!1,r)};kn.version="18.3.1-next-f1338f8080-20240426";function eA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eA)}catch(t){console.error(t)}}eA(),eS.exports=kn;var pu=eS.exports;const tA=Ry(pu);var MT=pu;_g.createRoot=MT.createRoot,_g.hydrateRoot=MT.hydrateRoot;const KL="modulepreload",GL=function(t){return"/"+t},FT={},_e=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=GL(l),l in FT)return;FT[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":KL,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((p,v)=>{h.addEventListener("load",p),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mc(){return Mc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mc.apply(this,arguments)}var Si;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Si||(Si={}));const $T="popstate";function HL(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return hv("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Bh(i)}return YL(e,n,null,t)}function st(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function nA(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function QL(){return Math.random().toString(36).substr(2,8)}function UT(t,e){return{usr:t.state,key:t.key,idx:e}}function hv(t,e,n,r){return n===void 0&&(n=null),Mc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ba(e):e,{state:n,key:e&&e.key||r||QL()})}function Bh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ba(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function YL(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Si.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(Mc({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Si.Pop;let I=d(),w=I==null?null:I-u;u=I,l&&l({action:a,location:_.location,delta:w})}function p(I,w){a=Si.Push;let y=hv(_.location,I,w);u=d()+1;let b=UT(y,u),D=_.createHref(y);try{o.pushState(b,"",D)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(D)}s&&l&&l({action:a,location:_.location,delta:1})}function v(I,w){a=Si.Replace;let y=hv(_.location,I,w);u=d();let b=UT(y,u),D=_.createHref(y);o.replaceState(b,"",D),s&&l&&l({action:a,location:_.location,delta:0})}function E(I){let w=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof I=="string"?I:Bh(I);return y=y.replace(/ $/,"%20"),st(w,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,w)}let _={get action(){return a},get location(){return t(i,o)},listen(I){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener($T,h),l=I,()=>{i.removeEventListener($T,h),l=null}},createHref(I){return e(i,I)},createURL:E,encodeLocation(I){let w=E(I);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:v,go(I){return o.go(I)}};return _}var jT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(jT||(jT={}));function XL(t,e,n){return n===void 0&&(n="/"),JL(t,e,n)}function JL(t,e,n,r){let i=typeof e=="string"?Ba(e):e,s=E_(i.pathname||"/",n);if(s==null)return null;let o=rA(t);ZL(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=dV(s);a=lV(o[l],u)}return a}function rA(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(st(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Vi([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(st(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),rA(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:oV(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of iA(s.path))i(s,o,l)}),e}function iA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=iA(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function ZL(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:aV(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const eV=/^:[\w-]+$/,tV=3,nV=2,rV=1,iV=10,sV=-2,BT=t=>t==="*";function oV(t,e){let n=t.split("/"),r=n.length;return n.some(BT)&&(r+=sV),e&&(r+=nV),n.filter(i=>!BT(i)).reduce((i,s)=>i+(eV.test(s)?tV:s===""?rV:iV),r)}function aV(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function lV(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=cV({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),p=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Vi([s,h.pathname]),pathnameBase:mV(Vi([s,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(s=Vi([s,h.pathnameBase]))}return o}function cV(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=uV(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:p,isOptional:v}=d;if(p==="*"){let _=a[h]||"";o=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const E=a[h];return v&&!E?u[p]=void 0:u[p]=(E||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function uV(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),nA(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function dV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nA(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function E_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function hV(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ba(t):t;return{pathname:n?n.startsWith("/")?n:fV(n,e):e,search:gV(r),hash:vV(i)}}function fV(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Nm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pV(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function T_(t,e){let n=pV(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function I_(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ba(t):(i=Mc({},t),st(!i.pathname||!i.pathname.includes("?"),Nm("?","pathname","search",i)),st(!i.pathname||!i.pathname.includes("#"),Nm("#","pathname","hash",i)),st(!i.search||!i.search.includes("#"),Nm("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=hV(i,a),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Vi=t=>t.join("/").replace(/\/\/+/g,"/"),mV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),gV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function yV(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const sA=["post","put","patch","delete"];new Set(sA);const _V=["get",...sA];new Set(_V);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fc(){return Fc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fc.apply(this,arguments)}const b_=m.createContext(null),wV=m.createContext(null),ns=m.createContext(null),Vf=m.createContext(null),rs=m.createContext({outlet:null,matches:[],isDataRoute:!1}),oA=m.createContext(null);function EV(t,e){let{relative:n}=e===void 0?{}:e;za()||st(!1);let{basename:r,navigator:i}=m.useContext(ns),{hash:s,pathname:o,search:a}=lA(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Vi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function za(){return m.useContext(Vf)!=null}function qa(){return za()||st(!1),m.useContext(Vf).location}function aA(t){m.useContext(ns).static||m.useLayoutEffect(t)}function Wa(){let{isDataRoute:t}=m.useContext(rs);return t?OV():TV()}function TV(){za()||st(!1);let t=m.useContext(b_),{basename:e,future:n,navigator:r}=m.useContext(ns),{matches:i}=m.useContext(rs),{pathname:s}=qa(),o=JSON.stringify(T_(i,n.v7_relativeSplatPath)),a=m.useRef(!1);return aA(()=>{a.current=!0}),m.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=I_(u,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Vi([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,t])}function lA(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=m.useContext(ns),{matches:i}=m.useContext(rs),{pathname:s}=qa(),o=JSON.stringify(T_(i,r.v7_relativeSplatPath));return m.useMemo(()=>I_(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function IV(t,e){return bV(t,e)}function bV(t,e,n,r){za()||st(!1);let{navigator:i,static:s}=m.useContext(ns),{matches:o}=m.useContext(rs),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=qa(),h;if(e){var p;let w=typeof e=="string"?Ba(e):e;u==="/"||(p=w.pathname)!=null&&p.startsWith(u)||st(!1),h=w}else h=d;let v=h.pathname||"/",E=v;if(u!=="/"){let w=u.replace(/^\//,"").split("/");E="/"+v.replace(/^\//,"").split("/").slice(w.length).join("/")}let _=XL(t,{pathname:E}),I=CV(_&&_.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Vi([u,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:Vi([u,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),o,n,r);return e&&I?m.createElement(Vf.Provider,{value:{location:Fc({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Si.Pop}},I):I}function SV(){let t=NV(),e=yV(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},e),n?m.createElement("pre",{style:i},n):null,null)}const RV=m.createElement(SV,null);class AV extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?m.createElement(rs.Provider,{value:this.props.routeContext},m.createElement(oA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function PV(t){let{routeContext:e,match:n,children:r}=t,i=m.useContext(b_);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(rs.Provider,{value:e},r)}function CV(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||st(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:p,errors:v}=n,E=h.route.loader&&p[h.route.id]===void 0&&(!v||v[h.route.id]===void 0);if(h.route.lazy||E){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let v,E=!1,_=null,I=null;n&&(v=a&&h.route.id?a[h.route.id]:void 0,_=h.route.errorElement||RV,l&&(u<0&&p===0?(E=!0,I=null):u===p&&(E=!0,I=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),y=()=>{let b;return v?b=_:E?b=I:h.route.Component?b=m.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=d,m.createElement(PV,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:b})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?m.createElement(AV,{location:n.location,revalidation:n.revalidation,component:_,error:v,children:y(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):y()},null)}var cA=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(cA||{}),zh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(zh||{});function kV(t){let e=m.useContext(b_);return e||st(!1),e}function xV(t){let e=m.useContext(wV);return e||st(!1),e}function DV(t){let e=m.useContext(rs);return e||st(!1),e}function uA(t){let e=DV(),n=e.matches[e.matches.length-1];return n.route.id||st(!1),n.route.id}function NV(){var t;let e=m.useContext(oA),n=xV(zh.UseRouteError),r=uA(zh.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function OV(){let{router:t}=kV(cA.UseNavigateStable),e=uA(zh.UseNavigateStable),n=m.useRef(!1);return aA(()=>{n.current=!0}),m.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Fc({fromRouteId:e},s)))},[t,e])}function LV(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Om(t){let{to:e,replace:n,state:r,relative:i}=t;za()||st(!1);let{future:s,static:o}=m.useContext(ns),{matches:a}=m.useContext(rs),{pathname:l}=qa(),u=Wa(),d=I_(e,T_(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return m.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:i}),[u,h,i,n,r]),null}function de(t){st(!1)}function VV(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Si.Pop,navigator:s,static:o=!1,future:a}=t;za()&&st(!1);let l=e.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:l,navigator:s,static:o,future:Fc({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Ba(r));let{pathname:d="/",search:h="",hash:p="",state:v=null,key:E="default"}=r,_=m.useMemo(()=>{let I=E_(d,l);return I==null?null:{location:{pathname:I,search:h,hash:p,state:v,key:E},navigationType:i}},[l,d,h,p,v,E,i]);return _==null?null:m.createElement(ns.Provider,{value:u},m.createElement(Vf.Provider,{children:n,value:_}))}function zT(t){let{children:e,location:n}=t;return IV(fv(e),n)}new Promise(()=>{});function fv(t,e){e===void 0&&(e=[]);let n=[];return m.Children.forEach(t,(r,i)=>{if(!m.isValidElement(r))return;let s=[...e,i];if(r.type===m.Fragment){n.push.apply(n,fv(r.props.children,s));return}r.type!==de&&st(!1),!r.props.index||!r.props.children||st(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=fv(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pv(){return pv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pv.apply(this,arguments)}function MV(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function FV(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $V(t,e){return t.button===0&&(!e||e==="_self")&&!FV(t)}const UV=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jV="6";try{window.__reactRouterVersion=jV}catch{}const BV="startTransition",qT=J1[BV];function zV(t){let{basename:e,children:n,future:r,window:i}=t,s=m.useRef();s.current==null&&(s.current=HL({window:i,v5Compat:!0}));let o=s.current,[a,l]=m.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=m.useCallback(h=>{u&&qT?qT(()=>l(h)):l(h)},[l,u]);return m.useLayoutEffect(()=>o.listen(d),[o,d]),m.useEffect(()=>LV(r),[r]),m.createElement(VV,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const qV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_d=m.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:h}=e,p=MV(e,UV),{basename:v}=m.useContext(ns),E,_=!1;if(typeof u=="string"&&WV.test(u)&&(E=u,qV))try{let b=new URL(window.location.href),D=u.startsWith("//")?new URL(b.protocol+u):new URL(u),V=E_(D.pathname,v);D.origin===b.origin&&V!=null?u=V+D.search+D.hash:_=!0}catch{}let I=EV(u,{relative:i}),w=KV(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function y(b){r&&r(b),b.defaultPrevented||w(b)}return m.createElement("a",pv({},p,{href:E||I,onClick:_||s?r:y,ref:n,target:l}))});var WT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(WT||(WT={}));var KT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(KT||(KT={}));function KV(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Wa(),u=qa(),d=lA(t,{relative:o});return m.useCallback(h=>{if($V(h,n)){h.preventDefault();let p=r!==void 0?r:Bh(u)===Bh(d);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,d,r,i,n,t,s,o,a])}var GT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},GV=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},S_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let p=(a&15)<<2|u>>6,v=u&63;l||(v=64,o||(p=64)),r.push(n[d],n[h],n[p],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):GV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new HV;const p=s<<2|a>>4;if(r.push(p),u!==64){const v=a<<4&240|u>>2;if(r.push(v),h!==64){const E=u<<6&192|h;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class HV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QV=function(t){const e=dA(t);return S_.encodeByteArray(e,!0)},qh=function(t){return QV(t).replace(/\./g,"")},hA=function(t){try{return S_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Wh(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!YV(n)||(t[n]=Wh(t[n],e[n]));return t}function YV(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV=()=>fA().__FIREBASE_DEFAULTS__,JV=()=>{if(typeof process>"u"||typeof GT>"u")return;const t=GT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ZV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hA(t[1]);return e&&JSON.parse(e)},R_=()=>{try{return XV()||JV()||ZV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pA=()=>{var t;return(t=R_())===null||t===void 0?void 0:t.config},e4=t=>{var e;return(e=R_())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[qh(JSON.stringify(n)),qh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function t4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function A_(){var t;const e=(t=R_())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function n4(){return typeof window<"u"||gA()}function gA(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function r4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function P_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yA(){const t=qe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _A(){return!A_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ji(){try{return typeof indexedDB=="object"}catch{return!1}}function i4(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function s4(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4="FirebaseError";class Pt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=o4,Object.setPrototypeOf(this,Pt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tr.prototype.create)}}class tr{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?a4(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Pt(i,a,r)}}function a4(t,e){return t.replace(l4,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const l4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function c4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $c(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(QT(s)&&QT(o)){if(!$c(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function QT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ql(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function wA(t,e){const n=new u4(t,e);return n.subscribe.bind(n)}class u4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");d4(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Lm),i.error===void 0&&(i.error=Lm),i.complete===void 0&&(i.complete=Lm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function d4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Lm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t){return t&&t._delegate?t._delegate:t}class dt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new mv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(p4(e))try{this.getOrInitializeService({instanceIdentifier:ys})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ys){return this.instances.has(e)}getOptions(e=ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:f4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ys){return this.component?this.component.multipleInstances?e:ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function f4(t){return t===ys?void 0:t}function p4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new h4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_=[];var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const TA={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},m4=se.INFO,g4={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},v4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=g4[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mu{constructor(e){this.name=e,this._logLevel=m4,this._logHandler=v4,this._userLogHandler=null,C_.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}function y4(t){C_.forEach(e=>{e.setLogLevel(t)})}function _4(t,e){for(const n of C_){let r=null;e&&e.level&&(r=TA[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:se[s].toLowerCase(),message:a,args:o,type:i.name})}}}const w4=(t,e)=>e.some(n=>t instanceof n);let YT,XT;function E4(){return YT||(YT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function T4(){return XT||(XT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const IA=new WeakMap,gv=new WeakMap,bA=new WeakMap,Vm=new WeakMap,k_=new WeakMap;function I4(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(zr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&IA.set(n,t)}).catch(()=>{}),k_.set(e,t),e}function b4(t){if(gv.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});gv.set(t,e)}let vv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function S4(t){vv=t(vv)}function R4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mm(this),e,...n);return bA.set(r,e.sort?e.sort():[e]),zr(r)}:T4().includes(t)?function(...e){return t.apply(Mm(this),e),zr(IA.get(this))}:function(...e){return zr(t.apply(Mm(this),e))}}function A4(t){return typeof t=="function"?R4(t):(t instanceof IDBTransaction&&b4(t),w4(t,E4())?new Proxy(t,vv):t)}function zr(t){if(t instanceof IDBRequest)return I4(t);if(Vm.has(t))return Vm.get(t);const e=A4(t);return e!==t&&(Vm.set(t,e),k_.set(e,t)),e}const Mm=t=>k_.get(t);function Ga(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=zr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(zr(o.result),l.oldVersion,l.newVersion,zr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}function ra(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),zr(n).then(()=>{})}const P4=["get","getKey","getAll","getAllKeys","count"],C4=["put","add","delete","clear"],Fm=new Map;function JT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fm.get(e))return Fm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=C4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||P4.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Fm.set(e,s),s}S4(t=>({...t,get:(e,n,r)=>JT(e,n)||t.get(e,n,r),has:(e,n)=>!!JT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(x4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function x4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kh="@firebase/app",yv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr=new mu("@firebase/app"),D4="@firebase/app-compat",N4="@firebase/analytics-compat",O4="@firebase/analytics",L4="@firebase/app-check-compat",V4="@firebase/app-check",M4="@firebase/auth",F4="@firebase/auth-compat",$4="@firebase/database",U4="@firebase/data-connect",j4="@firebase/database-compat",B4="@firebase/functions",z4="@firebase/functions-compat",q4="@firebase/installations",W4="@firebase/installations-compat",K4="@firebase/messaging",G4="@firebase/messaging-compat",H4="@firebase/performance",Q4="@firebase/performance-compat",Y4="@firebase/remote-config",X4="@firebase/remote-config-compat",J4="@firebase/storage",Z4="@firebase/storage-compat",eM="@firebase/firestore",tM="@firebase/vertexai-preview",nM="@firebase/firestore-compat",rM="firebase",iM="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="[DEFAULT]",sM={[Kh]:"fire-core",[D4]:"fire-core-compat",[O4]:"fire-analytics",[N4]:"fire-analytics-compat",[V4]:"fire-app-check",[L4]:"fire-app-check-compat",[M4]:"fire-auth",[F4]:"fire-auth-compat",[$4]:"fire-rtdb",[U4]:"fire-data-connect",[j4]:"fire-rtdb-compat",[B4]:"fire-fn",[z4]:"fire-fn-compat",[q4]:"fire-iid",[W4]:"fire-iid-compat",[K4]:"fire-fcm",[G4]:"fire-fcm-compat",[H4]:"fire-perf",[Q4]:"fire-perf-compat",[Y4]:"fire-rc",[X4]:"fire-rc-compat",[J4]:"fire-gcs",[Z4]:"fire-gcs-compat",[eM]:"fire-fst",[nM]:"fire-fst-compat",[tM]:"fire-vertex","fire-js":"fire-js",[rM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=new Map,_a=new Map,wa=new Map;function Uc(t,e){try{t.container.addComponent(e)}catch(n){Yr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function SA(t,e){t.container.addOrOverwriteComponent(e)}function zt(t){const e=t.name;if(wa.has(e))return Yr.debug(`There were multiple attempts to register component ${e}.`),!1;wa.set(e,t);for(const n of zi.values())Uc(n,t);for(const n of _a.values())Uc(n,t);return!0}function Mf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function oM(t,e,n=Bi){Mf(t,e).clearInstance(n)}function RA(t){return t.options!==void 0}function Qe(t){return t.settings!==void 0}function aM(){wa.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$n=new tr("app","Firebase",lM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AA=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new dt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $n.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM extends AA{constructor(e,n,r,i){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Et(Kh,yv,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){D_(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw $n.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti=iM;function x_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Bi,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw $n.create("bad-app-name",{appName:String(i)});if(n||(n=pA()),!n)throw $n.create("no-options");const s=zi.get(i);if(s){if($c(n,s.options)&&$c(r,s.config))return s;throw $n.create("duplicate-app",{appName:i})}const o=new EA(i);for(const l of wa.values())o.addComponent(l);const a=new AA(n,r,o);return zi.set(i,a),a}function uM(t,e){if(n4()&&!gA())throw $n.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;RA(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=u=>[...u].reduce((d,h)=>Math.imul(31,d)+h.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw $n.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=_a.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new EA(s);for(const u of wa.values())a.addComponent(u);const l=new cM(n,e,s,a);return _a.set(s,l),l}function dM(t=Bi){const e=zi.get(t);if(!e&&t===Bi&&pA())return x_();if(!e)throw $n.create("no-app",{appName:t});return e}function hM(){return Array.from(zi.values())}async function D_(t){let e=!1;const n=t.name;zi.has(n)?(e=!0,zi.delete(n)):_a.has(n)&&t.decRefCount()<=0&&(_a.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Et(t,e,n){var r;let i=(r=sM[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yr.warn(a.join(" "));return}zt(new dt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function PA(t,e){if(t!==null&&typeof t!="function")throw $n.create("invalid-log-argument");_4(t,e)}function CA(t){y4(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM="firebase-heartbeat-database",pM=1,jc="firebase-heartbeat-store";let $m=null;function kA(){return $m||($m=Ga(fM,pM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jc)}catch(n){console.warn(n)}}}}).catch(t=>{throw $n.create("idb-open",{originalErrorMessage:t.message})})),$m}async function mM(t){try{const n=(await kA()).transaction(jc),r=await n.objectStore(jc).get(xA(t));return await n.done,r}catch(e){if(e instanceof Pt)Yr.warn(e.message);else{const n=$n.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yr.warn(n.message)}}}async function ZT(t,e){try{const r=(await kA()).transaction(jc,"readwrite");await r.objectStore(jc).put(e,xA(t)),await r.done}catch(n){if(n instanceof Pt)Yr.warn(n.message);else{const r=$n.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yr.warn(r.message)}}}function xA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=1024,vM=30*24*60*60*1e3;class yM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=eI();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=vM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Yr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=eI(),{heartbeatsToSend:r,unsentEntries:i}=_M(this._heartbeatsCache.heartbeats),s=qh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Yr.warn(n),""}}}function eI(){return new Date().toISOString().substring(0,10)}function _M(t,e=gM){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),tI(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),tI(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class wM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ji()?i4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await mM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ZT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ZT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function tI(t){return qh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(t){zt(new dt("platform-logger",e=>new k4(e),"PRIVATE")),zt(new dt("heartbeat",e=>new yM(e),"PRIVATE")),Et(Kh,yv,t),Et(Kh,yv,"esm2017"),Et("fire-js","")}EM("");const TM=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Pt,SDK_VERSION:ti,_DEFAULT_ENTRY_NAME:Bi,_addComponent:Uc,_addOrOverwriteComponent:SA,_apps:zi,_clearComponents:aM,_components:wa,_getProvider:Mf,_isFirebaseApp:RA,_isFirebaseServerApp:Qe,_registerComponent:zt,_removeServiceInstance:oM,_serverApps:_a,deleteApp:D_,getApp:dM,getApps:hM,initializeApp:x_,initializeServerApp:uM,onLog:PA,registerVersion:Et,setLogLevel:CA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,n){this._delegate=e,this.firebase=n,Uc(e,new dt("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),D_(this._delegate)))}_getService(e,n=Bi){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Bi){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Uc(this._delegate,e)}_addOrOverwriteComponent(e){SA(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},nI=new tr("app-compat","Firebase",bM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Et,setLogLevel:CA,onLog:PA,apps:null,SDK_VERSION:ti,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:TM}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(u){delete e[u]}function i(u){if(u=u||Bi,!HT(e,u))throw nI.create("no-app",{appName:u});return e[u]}i.App=t;function s(u,d={}){const h=x_(u,d);if(HT(e,h.name))return e[h.name];const p=new t(h,n);return e[h.name]=p,p}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const d=u.name,h=d.replace("-compat","");if(zt(u)&&u.type==="PUBLIC"){const p=(v=i())=>{if(typeof v[h]!="function")throw nI.create("invalid-app-argument",{appName:d});return v[h]()};u.serviceProps!==void 0&&Wh(p,u.serviceProps),n[h]=p,t.prototype[h]=function(...v){return this._getService.bind(this,d).apply(this,u.multipleInstances?v:[])}}return u.type==="PUBLIC"?n[h]:null}function l(u,d){return d==="serverAuth"?null:d}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(){const t=SM(IM);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:DA,extendNamespace:e,createSubscribe:wA,ErrorFactory:tr,deepExtend:Wh});function e(n){Wh(t,n)}return t}const RM=DA();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=new mu("@firebase/app-compat"),AM="@firebase/app-compat",PM="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(t){Et(AM,PM,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=fA();if(t.firebase!==void 0){rI.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&rI.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const sn=RM;CM();var kM="firebase",xM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.registerVersion(kM,xM,"app-compat");var lr=function(){return lr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},lr.apply(this,arguments)};function gu(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function DM(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}const Pl={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},bo={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function NA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OM=NM,LM=NA,OA=new tr("auth","Firebase",NA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh=new mu("@firebase/auth");function VM(t,...e){Gh.logLevel<=se.WARN&&Gh.warn(`Auth (${ti}): ${t}`,...e)}function Zd(t,...e){Gh.logLevel<=se.ERROR&&Gh.error(`Auth (${ti}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t,...e){throw O_(t,...e)}function pt(t,...e){return O_(t,...e)}function N_(t,e,n){const r=Object.assign(Object.assign({},LM()),{[e]:n});return new tr("auth","Firebase",r).create(e,{appName:t.name})}function Tt(t){return N_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ha(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&xt(t,"argument-error"),N_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function O_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return OA.create(t,...e)}function z(t,e,...n){if(!t)throw O_(e,...n)}function pr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zd(e),new Error(e)}function Zn(t,e){t||pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function L_(){return iI()==="http:"||iI()==="https:"}function iI(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(L_()||vA()||"connection"in navigator)?navigator.onLine:!0}function FM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zn(n>e,"Short delay should be less than long delay!"),this.isMobile=t4()||P_()}get(){return MM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(t,e){Zn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM=new vu(3e4,6e4);function Ze(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function et(t,e,n,r,i={}){return VA(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ka(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return r4()||(u.referrerPolicy="no-referrer"),LA.fetch()(MA(t,t.config.apiHost,n,a),u)})}async function VA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},$M),e);try{const i=new BM(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Wl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Wl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Wl(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw N_(t,d,u);xt(t,d)}}catch(i){if(i instanceof Pt)throw i;xt(t,"network-request-failed",{message:String(i)})}}async function ni(t,e,n,r,i={}){const s=await et(t,e,n,r,i);return"mfaPendingCredential"in s&&xt(t,"multi-factor-auth-required",{_serverResponse:s}),s}function MA(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?V_(t.config,i):`${t.config.apiScheme}://${i}`}function jM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class BM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(pt(this.auth,"network-request-failed")),UM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=pt(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(t){return t!==void 0&&t.getResponse!==void 0}function oI(t){return t!==void 0&&t.enterprise!==void 0}class zM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return jM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qM(t){return(await et(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function WM(t,e){return et(t,"GET","/v2/recaptchaConfig",Ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(t,e){return et(t,"POST","/v1/accounts:delete",e)}async function GM(t,e){return et(t,"POST","/v1/accounts:update",e)}async function FA(t,e){return et(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HM(t,e=!1){const n=Y(t),r=await n.getIdToken(e),i=Ff(r);z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:cc(Um(i.auth_time)),issuedAtTime:cc(Um(i.iat)),expirationTime:cc(Um(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Um(t){return Number(t)*1e3}function Ff(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Zd("JWT malformed, contained fewer than 3 sections"),null;try{const i=hA(n);return i?JSON.parse(i):(Zd("Failed to decode base64 JWT payload"),null)}catch(i){return Zd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function aI(t){const e=Ff(t);return z(e,"internal-error"),z(typeof e.exp<"u","internal-error"),z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xr(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Pt&&QM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function QM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cc(this.lastLoginAt),this.creationTime=cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Xr(t,FA(n,{idToken:r}));z(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?UA(s.providerUserInfo):[],a=XM(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new _v(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function $A(t){const e=Y(t);await zc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XM(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function UA(t){return t.map(e=>{var{providerId:n}=e,r=gu(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JM(t,e){const n=await VA(t,{},async()=>{const r=Ka({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=MA(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",LA.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ZM(t,e){return et(t,"POST","/v2/accounts:revokeToken",Ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){z(e.idToken,"internal-error"),z(typeof e.idToken<"u","internal-error"),z(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):aI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){z(e.length!==0,"internal-error");const n=aI(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await JM(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ia;return r&&(z(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(z(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ia,this.toJSON())}_performRefresh(){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(t,e){z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class $r{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=gu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new YM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _v(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Xr(this,this.stsTokenManager.getToken(this.auth,e));return z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return HM(this,e)}reload(){return $A(this)}_assign(e){this!==e&&(z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new $r(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await zc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qe(this.auth.app))return Promise.reject(Tt(this.auth));const e=await this.getIdToken();return await Xr(this,KM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,I=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:D,isAnonymous:V,providerData:$,stsTokenManager:R}=n;z(b&&R,e,"internal-error");const T=ia.fromJSON(this.name,R);z(typeof b=="string",e,"internal-error"),hi(h,e.name),hi(p,e.name),z(typeof D=="boolean",e,"internal-error"),z(typeof V=="boolean",e,"internal-error"),hi(v,e.name),hi(E,e.name),hi(_,e.name),hi(I,e.name),hi(w,e.name),hi(y,e.name);const A=new $r({uid:b,auth:e,email:p,emailVerified:D,displayName:h,isAnonymous:V,photoURL:E,phoneNumber:v,tenantId:_,stsTokenManager:T,createdAt:w,lastLoginAt:y});return $&&Array.isArray($)&&(A.providerData=$.map(k=>Object.assign({},k))),I&&(A._redirectEventId=I),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new ia;i.updateFromServerResponse(n);const s=new $r({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await zc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];z(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?UA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new ia;a.updateFromIdToken(r);const l=new $r({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new _v(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=new Map;function Sn(t){Zn(t instanceof Function,"Expected a class definition");let e=lI.get(t);return e?(Zn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,lI.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}jA.type="NONE";const Ea=jA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(t,e,n){return`firebase:${t}:${e}:${n}`}class sa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Vs(this.userKey,i.apiKey,s),this.fullPersistenceKey=Vs("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$r._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new sa(Sn(Ea),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Sn(Ea);const o=Vs(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const h=$r._fromJSON(e,d);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new sa(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new sa(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KA(e))return"Blackberry";if(GA(e))return"Webos";if(zA(e))return"Safari";if((e.includes("chrome/")||qA(e))&&!e.includes("edge/"))return"Chrome";if(yu(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function BA(t=qe()){return/firefox\//i.test(t)}function zA(t=qe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qA(t=qe()){return/crios\//i.test(t)}function WA(t=qe()){return/iemobile/i.test(t)}function yu(t=qe()){return/android/i.test(t)}function KA(t=qe()){return/blackberry/i.test(t)}function GA(t=qe()){return/webos/i.test(t)}function _u(t=qe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function e3(t=qe()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function t3(t=qe()){var e;return _u(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function n3(){return yA()&&document.documentMode===10}function HA(t=qe()){return _u(t)||yu(t)||GA(t)||KA(t)||/windows phone/i.test(t)||WA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(t,e=[]){let n;switch(t){case"Browser":n=cI(qe());break;case"Worker":n=`${cI(qe())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ti}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i3(t,e={}){return et(t,"GET","/v2/passwordPolicy",Ze(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3=6;class o3{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:s3,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uI(this),this.idTokenSubscription=new uI(this),this.beforeStateQueue=new r3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Sn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await sa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await FA(this,{idToken:e}),r=await $r._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qe(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qe(this.app))return Promise.reject(Tt(this));const n=e?Y(e):null;return n&&z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qe(this.app)?Promise.reject(Tt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qe(this.app)?Promise.reject(Tt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await i3(this),n=new o3(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new tr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ZM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Sn(e)||this._popupRedirectResolver;z(n,this,"argument-error"),this.redirectPersistenceManager=await sa.create(this,[Sn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(z(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&VM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ye(t){return Y(t)}class uI{constructor(e){this.auth=e,this.observer=null,this.addObserver=wA(n=>this.observer=n)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function l3(t){wu=t}function M_(t){return wu.loadJS(t)}function c3(){return wu.recaptchaV2Script}function u3(){return wu.recaptchaEnterpriseScript}function d3(){return wu.gapiScript}function YA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const h3="recaptcha-enterprise",f3="NO_RECAPTCHA";class p3{constructor(e){this.type=h3,this.auth=Ye(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{WM(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new zM(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;oI(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(f3)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&oI(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=u3();l.length!==0&&(l+=a),M_(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function dI(t,e,n,r=!1){const i=new p3(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function qc(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await dI(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await dI(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}function m3(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Sn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function g3(t,e,n){const r=Ye(t);z(r._canInitEmulator,r,"emulator-config-failed"),z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=XA(e),{host:o,port:a}=v3(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||y3()}function XA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function v3(t){const e=XA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:hI(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:hI(o)}}}function hI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function y3(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pr("not implemented")}_getIdTokenResponse(e){return pr("not implemented")}_linkToIdToken(e,n){return pr("not implemented")}_getReauthenticationResolver(e){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JA(t,e){return et(t,"POST","/v1/accounts:resetPassword",Ze(t,e))}async function _3(t,e){return et(t,"POST","/v1/accounts:update",e)}async function w3(t,e){return et(t,"POST","/v1/accounts:signUp",e)}async function E3(t,e){return et(t,"POST","/v1/accounts:update",Ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T3(t,e){return ni(t,"POST","/v1/accounts:signInWithPassword",Ze(t,e))}async function $f(t,e){return et(t,"POST","/v1/accounts:sendOobCode",Ze(t,e))}async function I3(t,e){return $f(t,e)}async function b3(t,e){return $f(t,e)}async function S3(t,e){return $f(t,e)}async function R3(t,e){return $f(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A3(t,e){return ni(t,"POST","/v1/accounts:signInWithEmailLink",Ze(t,e))}async function P3(t,e){return ni(t,"POST","/v1/accounts:signInWithEmailLink",Ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends Qa{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Wc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Wc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qc(e,n,"signInWithPassword",T3);case"emailLink":return A3(e,{email:this._email,oobCode:this._password});default:xt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qc(e,r,"signUpPassword",w3);case"emailLink":return P3(e,{idToken:n,email:this._email,oobCode:this._password});default:xt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qr(t,e){return ni(t,"POST","/v1/accounts:signInWithIdp",Ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3="http://localhost";class Ir extends Qa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ir(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=gu(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ir(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qr(e,n)}buildRequest(){const e={requestUri:C3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ka(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k3(t,e){return et(t,"POST","/v1/accounts:sendVerificationCode",Ze(t,e))}async function x3(t,e){return ni(t,"POST","/v1/accounts:signInWithPhoneNumber",Ze(t,e))}async function D3(t,e){const n=await ni(t,"POST","/v1/accounts:signInWithPhoneNumber",Ze(t,e));if(n.temporaryProof)throw Wl(t,"account-exists-with-different-credential",n);return n}const N3={USER_NOT_FOUND:"user-not-found"};async function O3(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return ni(t,"POST","/v1/accounts:signInWithPhoneNumber",Ze(t,n),N3)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends Qa{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ms({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ms({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return x3(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return D3(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return O3(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Ms({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function V3(t){const e=Yo(ql(t)).link,n=e?Yo(ql(e)).deep_link_id:null,r=Yo(ql(t)).deep_link_id;return(r?Yo(ql(r)).link:null)||r||n||e||t}class Uf{constructor(e){var n,r,i,s,o,a;const l=Yo(ql(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=L3((i=l.mode)!==null&&i!==void 0?i:null);z(u&&d&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=V3(e);try{return new Uf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.providerId=is.PROVIDER_ID}static credential(e,n){return Wc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Uf.parseLink(n);return z(r,"argument-error"),Wc._fromEmailAndCode(e,r.code,r.tenantId)}}is.PROVIDER_ID="password";is.EMAIL_PASSWORD_SIGN_IN_METHOD="password";is.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends ri{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class oa extends Ya{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return z("providerId"in n&&"signInMethod"in n,"argument-error"),Ir._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return z(e.idToken||e.accessToken,"argument-error"),Ir._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return oa.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return oa.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new oa(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends Ya{constructor(){super("facebook.com")}static credential(e){return Ir._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends Ya{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ir._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ur.credential(n,r)}catch{return null}}}ur.GOOGLE_SIGN_IN_METHOD="google.com";ur.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends Ya{constructor(){super("github.com")}static credential(e){return Ir._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dr.credential(e.oauthAccessToken)}catch{return null}}}dr.GITHUB_SIGN_IN_METHOD="github.com";dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3="http://localhost";class Ta extends Qa{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return qr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qr(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Ta(r,s)}static _create(e,n){return new Ta(e,n)}buildRequest(){return{requestUri:M3,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3="saml.";class Hh extends ri{constructor(e){z(e.startsWith(F3),"argument-error"),super(e)}static credentialFromResult(e){return Hh.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Hh.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Ta.fromJSON(e);return z(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Ta._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends Ya{constructor(){super("twitter.com")}static credential(e,n){return Ir._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return hr.credential(n,r)}catch{return null}}}hr.TWITTER_SIGN_IN_METHOD="twitter.com";hr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZA(t,e){return ni(t,"POST","/v1/accounts:signUp",Ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await $r._fromIdTokenResponse(e,r,i),o=fI(r);return new Bn({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=fI(r);return new Bn({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function fI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $3(t){var e;if(Qe(t.app))return Promise.reject(Tt(t));const n=Ye(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Bn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await ZA(n,{returnSecureToken:!0}),i=await Bn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh extends Pt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Qh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Qh(e,n,r,i)}}function eP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Qh._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U3(t,e){const n=Y(t);await jf(!0,n,e);const{providerUserInfo:r}=await GM(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=tP(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function F_(t,e,n=!1){const r=await Xr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bn._forOperation(t,"link",r)}async function jf(t,e,n){await zc(e);const r=tP(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";z(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nP(t,e,n=!1){const{auth:r}=t;if(Qe(r.app))return Promise.reject(Tt(r));const i="reauthenticate";try{const s=await Xr(t,eP(r,i,e,t),n);z(s.idToken,r,"internal-error");const o=Ff(s.idToken);z(o,r,"internal-error");const{sub:a}=o;return z(t.uid===a,r,"user-mismatch"),Bn._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&xt(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rP(t,e,n=!1){if(Qe(t.app))return Promise.reject(Tt(t));const r="signIn",i=await eP(t,r,e),s=await Bn._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Bf(t,e){return rP(Ye(t),e)}async function iP(t,e){const n=Y(t);return await jf(!1,n,e.providerId),F_(n,e)}async function sP(t,e){return nP(Y(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j3(t,e){return ni(t,"POST","/v1/accounts:signInWithCustomToken",Ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B3(t,e){if(Qe(t.app))return Promise.reject(Tt(t));const n=Ye(t),r=await j3(n,{token:e,returnSecureToken:!0}),i=await Bn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?$_._fromServerResponse(e,n):"totpInfo"in n?U_._fromServerResponse(e,n):xt(e,"internal-error")}}class $_ extends Eu{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new $_(n)}}class U_ extends Eu{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new U_(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(t,e,n){var r;z(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),z(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(z(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(z(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j_(t){const e=Ye(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function z3(t,e,n){const r=Ye(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&zf(r,i,n),await qc(r,i,"getOobCode",b3)}async function q3(t,e,n){await JA(Y(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&j_(t),r})}async function W3(t,e){await E3(Y(t),{oobCode:e})}async function oP(t,e){const n=Y(t),r=await JA(n,{oobCode:e}),i=r.requestType;switch(z(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":z(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":z(r.mfaInfo,n,"internal-error");default:z(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Eu._fromServerResponse(Ye(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function K3(t,e){const{data:n}=await oP(Y(t),e);return n.email}async function G3(t,e,n){if(Qe(t.app))return Promise.reject(Tt(t));const r=Ye(t),o=await qc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ZA).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&j_(t),l}),a=await Bn._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function H3(t,e,n){return Qe(t.app)?Promise.reject(Tt(t)):Bf(Y(t),is.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&j_(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q3(t,e,n){const r=Ye(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){z(a.handleCodeInApp,r,"argument-error"),a&&zf(r,o,a)}s(i,n),await qc(r,i,"getOobCode",S3)}function Y3(t,e){const n=Uf.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function X3(t,e,n){if(Qe(t.app))return Promise.reject(Tt(t));const r=Y(t),i=is.credentialWithLink(e,n||Bc());return z(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Bf(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J3(t,e){return et(t,"POST","/v1/accounts:createAuthUri",Ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z3(t,e){const n=L_()?Bc():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await J3(Y(t),r);return i||[]}async function e5(t,e){const n=Y(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&zf(n.auth,i,e);const{email:s}=await I3(n.auth,i);s!==t.email&&await t.reload()}async function t5(t,e,n){const r=Y(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&zf(r.auth,s,n);const{email:o}=await R3(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n5(t,e){return et(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aP(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Y(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Xr(r,n5(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function r5(t,e){const n=Y(t);return Qe(n.auth.app)?Promise.reject(Tt(n.auth)):lP(n,e,null)}function i5(t,e){return lP(Y(t),null,e)}async function lP(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Xr(t,_3(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s5(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=Ff(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new aa(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new o5(s,i);case"github.com":return new a5(s,i);case"google.com":return new l5(s,i);case"twitter.com":return new c5(s,i,t.screenName||null);case"custom":case"anonymous":return new aa(s,null);default:return new aa(s,r,i)}}class aa{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class cP extends aa{constructor(e,n,r,i){super(e,n,r),this.username=i}}class o5 extends aa{constructor(e,n){super(e,"facebook.com",n)}}class a5 extends cP{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class l5 extends aa{constructor(e,n){super(e,"google.com",n)}}class c5 extends cP{constructor(e,n,r){super(e,"twitter.com",n,r)}}function u5(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:s5(n)}function d5(t,e,n,r){return Y(t).onAuthStateChanged(e,n,r)}function h5(t){return Y(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Cs("enroll",e,n)}static _fromMfaPendingCredential(e){return new Cs("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Cs._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Cs._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Ye(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Eu._fromServerResponse(r,a));z(i.mfaPendingCredential,r,"internal-error");const o=Cs._fromMfaPendingCredential(i.mfaPendingCredential);return new B_(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const u=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const d=await Bn._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return z(n.user,r,"internal-error"),Bn._forOperation(n.user,n.operationType,u);default:xt(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function f5(t,e){var n;const r=Y(t),i=e;return z(e.customData.operationType,r,"argument-error"),z((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),B_._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p5(t,e){return et(t,"POST","/v2/accounts/mfaEnrollment:start",Ze(t,e))}function m5(t,e){return et(t,"POST","/v2/accounts/mfaEnrollment:finalize",Ze(t,e))}function g5(t,e){return et(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Ze(t,e))}class z_{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Eu._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new z_(e)}async getSession(){return Cs._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Xr(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Xr(this.user,g5(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const jm=new WeakMap;function v5(t){const e=Y(t);return jm.has(e)||jm.set(e,z_._fromUser(e)),jm.get(e)}const Yh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yh,"1"),this.storage.removeItem(Yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5=1e3,_5=10;class dP extends uP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=HA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);n3()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,_5):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},y5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}dP.type="LOCAL";const q_=dP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP extends uP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}hP.type="SESSION";const Ws=hP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new qf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await w5(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Tu("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const p=h;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(){return window}function T5(t){ct().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(){return typeof ct().WorkerGlobalScope<"u"&&typeof ct().importScripts=="function"}async function I5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function b5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function S5(){return W_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP="firebaseLocalStorageDb",R5=1,Xh="firebaseLocalStorage",pP="fbase_key";class Iu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Wf(t,e){return t.transaction([Xh],e?"readwrite":"readonly").objectStore(Xh)}function A5(){const t=indexedDB.deleteDatabase(fP);return new Iu(t).toPromise()}function wv(){const t=indexedDB.open(fP,R5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Xh,{keyPath:pP})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Xh)?e(r):(r.close(),await A5(),e(await wv()))})})}async function pI(t,e,n){const r=Wf(t,!0).put({[pP]:e,value:n});return new Iu(r).toPromise()}async function P5(t,e){const n=Wf(t,!1).get(e),r=await new Iu(n).toPromise();return r===void 0?null:r.value}function mI(t,e){const n=Wf(t,!0).delete(e);return new Iu(n).toPromise()}const C5=800,k5=3;class mP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>k5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return W_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qf._getInstance(S5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await I5(),!this.activeServiceWorker)return;this.sender=new E5(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||b5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wv();return await pI(e,Yh,"1"),await mI(e,Yh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>pI(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>P5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>mI(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Wf(i,!1).getAll();return new Iu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),C5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mP.type="LOCAL";const Kc=mP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(t,e){return et(t,"POST","/v2/accounts/mfaSignIn:start",Ze(t,e))}function D5(t,e){return et(t,"POST","/v2/accounts/mfaSignIn:finalize",Ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5=500,O5=6e4,wd=1e12;class L5{constructor(e){this.auth=e,this.counter=wd,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new V5(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||wd;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||wd;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||wd;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class V5{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;z(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=M5(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},O5)},N5))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function M5(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=YA("rcb"),F5=new vu(3e4,6e4);class $5{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=ct().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return z(U5(n),e,"argument-error"),this.shouldResolveImmediately(n)&&sI(ct().grecaptcha)?Promise.resolve(ct().grecaptcha):new Promise((r,i)=>{const s=ct().setTimeout(()=>{i(pt(e,"network-request-failed"))},F5.get());ct()[Bm]=()=>{ct().clearTimeout(s),delete ct()[Bm];const a=ct().grecaptcha;if(!a||!sI(a)){i(pt(e,"internal-error"));return}const l=a.render;a.render=(u,d)=>{const h=l(u,d);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${c3()}?${Ka({onload:Bm,render:"explicit",hl:n})}`;M_(o).catch(()=>{clearTimeout(s),i(pt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=ct().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function U5(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class j5{async load(e){return new L5(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="recaptcha",B5={theme:"light",type:"image"};let z5=class{constructor(e,n,r=Object.assign({},B5)){this.parameters=r,this.type=gP,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ye(e),this.isInvisible=this.parameters.size==="invisible",z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;z(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new j5:new $5,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){z(!this.parameters.sitekey,this.auth,"argument-error"),z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=ct()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){z(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){z(L_()&&!W_(),this.auth,"internal-error"),await q5(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await qM(this.auth);z(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function q5(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ms._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function W5(t,e,n){if(Qe(t.app))return Promise.reject(Tt(t));const r=Ye(t),i=await Kf(r,e,Y(n));return new K_(i,s=>Bf(r,s))}async function K5(t,e,n){const r=Y(t);await jf(!1,r,"phone");const i=await Kf(r.auth,e,Y(n));return new K_(i,s=>iP(r,s))}async function G5(t,e,n){const r=Y(t);if(Qe(r.auth.app))return Promise.reject(Tt(r.auth));const i=await Kf(r.auth,e,Y(n));return new K_(i,s=>sP(r,s))}async function Kf(t,e,n){var r;const i=await n.verify();try{z(typeof i=="string",t,"argument-error"),z(n.type===gP,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return z(o.type==="enroll",t,"internal-error"),(await p5(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{z(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return z(a,t,"missing-multi-factor-info"),(await x5(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await k3(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function H5(t,e){const n=Y(t);if(Qe(n.auth.app))return Promise.reject(Tt(n.auth));await F_(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ks=class eh{constructor(e){this.providerId=eh.PROVIDER_ID,this.auth=Ye(e)}verifyPhoneNumber(e,n){return Kf(this.auth,e,Y(n))}static credential(e,n){return Ms._fromVerification(e,n)}static credentialFromResult(e){const n=e;return eh.credentialFromTaggedObject(n)}static credentialFromError(e){return eh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Ms._fromTokenResponse(n,r):null}};Ks.PROVIDER_ID="phone";Ks.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(t,e){return e?Sn(e):(z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_ extends Qa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Q5(t){return rP(t.auth,new G_(t),t.bypassAuthState)}function Y5(t){const{auth:e,user:n}=t;return z(n,e,"internal-error"),nP(n,new G_(t),t.bypassAuthState)}async function X5(t){const{auth:e,user:n}=t;return z(n,e,"internal-error"),F_(n,new G_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Q5;case"linkViaPopup":case"linkViaRedirect":return X5;case"reauthViaPopup":case"reauthViaRedirect":return Y5;default:xt(this.auth,"internal-error")}}resolve(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=new vu(2e3,1e4);async function Z5(t,e,n){if(Qe(t.app))return Promise.reject(pt(t,"operation-not-supported-in-this-environment"));const r=Ye(t);Ha(t,e,ri);const i=uo(r,n);return new Ur(r,"signInViaPopup",e,i).executeNotNull()}async function eF(t,e,n){const r=Y(t);if(Qe(r.auth.app))return Promise.reject(pt(r.auth,"operation-not-supported-in-this-environment"));Ha(r.auth,e,ri);const i=uo(r.auth,n);return new Ur(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function tF(t,e,n){const r=Y(t);Ha(r.auth,e,ri);const i=uo(r.auth,n);return new Ur(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Ur extends vP{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ur.currentPopupAction&&Ur.currentPopupAction.cancel(),Ur.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return z(e,this.auth,"internal-error"),e}async onExecution(){Zn(this.filter.length===1,"Popup operations only handle one event");const e=Tu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ur.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,J5.get())};e()}}Ur.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF="pendingRedirect",uc=new Map;class rF extends vP{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=uc.get(this.auth._key());if(!e){try{const r=await iF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}uc.set(this.auth._key(),e)}return this.bypassAuthState||uc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iF(t,e){const n=_P(e),r=yP(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function H_(t,e){return yP(t)._set(_P(e),"true")}function sF(){uc.clear()}function Q_(t,e){uc.set(t._key(),e)}function yP(t){return Sn(t._redirectPersistence)}function _P(t){return Vs(nF,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(t,e,n){return aF(t,e,n)}async function aF(t,e,n){if(Qe(t.app))return Promise.reject(Tt(t));const r=Ye(t);Ha(t,e,ri),await r._initializationPromise;const i=uo(r,n);return await H_(i,r),i._openRedirect(r,e,"signInViaRedirect")}function lF(t,e,n){return cF(t,e,n)}async function cF(t,e,n){const r=Y(t);if(Ha(r.auth,e,ri),Qe(r.auth.app))return Promise.reject(Tt(r.auth));await r.auth._initializationPromise;const i=uo(r.auth,n);await H_(i,r.auth);const s=await wP(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function uF(t,e,n){return dF(t,e,n)}async function dF(t,e,n){const r=Y(t);Ha(r.auth,e,ri),await r.auth._initializationPromise;const i=uo(r.auth,n);await jf(!1,r,e.providerId),await H_(i,r.auth);const s=await wP(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function hF(t,e){return await Ye(t)._initializationPromise,Gf(t,e,!1)}async function Gf(t,e,n=!1){if(Qe(t.app))return Promise.reject(Tt(t));const r=Ye(t),i=uo(r,e),o=await new rF(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function wP(t){const e=Tu(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF=10*60*1e3;class EP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!TP(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(pt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fF&&this.cachedEventUids.clear(),this.cachedEventUids.has(gI(e))}saveEventToCache(e){this.cachedEventUids.add(gI(e)),this.lastProcessedEventTime=Date.now()}}function gI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function TP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IP(t,e={}){return et(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gF=/^https?/;async function vF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await IP(t);for(const n of e)try{if(yF(n))return}catch{}xt(t,"unauthorized-domain")}function yF(t){const e=Bc(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!gF.test(n))return!1;if(mF.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F=new vu(3e4,6e4);function vI(){const t=ct().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function wF(t){return new Promise((e,n)=>{var r,i,s;function o(){vI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vI(),n(pt(t,"network-request-failed"))},timeout:_F.get()})}if(!((i=(r=ct().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ct().gapi)===null||s===void 0)&&s.load)o();else{const a=YA("iframefcb");return ct()[a]=()=>{gapi.load?o():n(pt(t,"network-request-failed"))},M_(`${d3()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw th=null,e})}let th=null;function EF(t){return th=th||wF(t),th}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=new vu(5e3,15e3),IF="__/auth/iframe",bF="emulator/auth/iframe",SF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AF(t){const e=t.config;z(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?V_(e,bF):`https://${t.config.authDomain}/${IF}`,r={apiKey:e.apiKey,appName:t.name,v:ti},i=RF.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ka(r).slice(1)}`}async function PF(t){const e=await EF(t),n=ct().gapi;return z(n,t,"internal-error"),e.open({where:document.body,url:AF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SF,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=pt(t,"network-request-failed"),a=ct().setTimeout(()=>{s(o)},TF.get());function l(){ct().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kF=500,xF=600,DF="_blank",NF="http://localhost";class yI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OF(t,e,n,r=kF,i=xF){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},CF),{width:r.toString(),height:i.toString(),top:s,left:o}),u=qe().toLowerCase();n&&(a=qA(u)?DF:n),BA(u)&&(e=e||NF,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[v,E])=>`${p}${v}=${E},`,"");if(t3(u)&&a!=="_self")return LF(e||"",a),new yI(null);const h=window.open(e||"",a,d);z(h,t,"popup-blocked");try{h.focus()}catch{}return new yI(h)}function LF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF="__/auth/handler",MF="emulator/auth/handler",FF=encodeURIComponent("fac");async function Ev(t,e,n,r,i,s){z(t.config.authDomain,t,"auth-domain-config-required"),z(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ti,eventId:i};if(e instanceof ri){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",c4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))o[d]=h}if(e instanceof Ya){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${FF}=${encodeURIComponent(l)}`:"";return`${$F(t)}?${Ka(a).slice(1)}${u}`}function $F({config:t}){return t.emulator?V_(t,MF):`https://${t.authDomain}/${VF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="webStorageSupport";class UF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ws,this._completeRedirectFn=Gf,this._overrideRedirectResult=Q_}async _openPopup(e,n,r,i){var s;Zn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Ev(e,n,r,Bc(),i);return OF(e,o,Tu())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Ev(e,n,r,Bc(),i);return T5(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Zn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await PF(e),r=new EP(e);return n.register("authEvent",i=>(z(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zm,{type:zm},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[zm];o!==void 0&&n(!!o),xt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=vF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return HA()||zA()||_u()}}const jF=UF;class BF{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return pr("unexpected MultiFactorSessionType")}}}class Y_ extends BF{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Y_(e)}_finalizeEnroll(e,n,r){return m5(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return D5(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class bP{constructor(){}static assertion(e){return Y_._fromCredential(e)}}bP.FACTOR_ID="phone";var _I="@firebase/auth",wI="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WF(t){zt(new dt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;z(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QA(t)},u=new a3(r,i,s,l);return m3(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),zt(new dt("auth-internal",e=>{const n=Ye(e.getProvider("auth").getImmediate());return(r=>new zF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Et(_I,wI,qF(t)),Et(_I,wI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF=5*60;e4("authIdTokenMaxAge");function GF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}l3({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=pt("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",GF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WF("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF=2e3;async function QF(t,e,n){var r;const{BuildInfo:i}=Gs();Zn(e.sessionId,"AuthEvent did not contain a session ID");const s=await e$(e.sessionId),o={};return _u()?o.ibi=i.packageName:yu()?o.apn=i.packageName:xt(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Ev(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function YF(t){const{BuildInfo:e}=Gs(),n={};_u()?n.iosBundleId=e.packageName:yu()?n.androidPackageName=e.packageName:xt(t,"operation-not-supported-in-this-environment"),await IP(t,n)}function XF(t){const{cordova:e}=Gs();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,e3()?"_blank":"_system","location=yes"),n(i)})})}async function JF(t,e,n){const{cordova:r}=Gs();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var h;s();const p=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof p=="function"&&p(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function u(){a||(a=window.setTimeout(()=>{o(pt(t,"redirect-cancelled-by-user"))},HF))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(l),document.addEventListener("resume",u,!1),yu()&&document.addEventListener("visibilitychange",d,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",d,!1),a&&window.clearTimeout(a)}})}finally{i()}}function ZF(t){var e,n,r,i,s,o,a,l,u,d;const h=Gs();z(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),z(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),z(typeof((s=(i=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z(typeof((l=(a=(o=h==null?void 0:h.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z(typeof((d=(u=h==null?void 0:h.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||d===void 0?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function e$(t){const e=t$(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function t$(t){if(Zn(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$=20;class r$ extends EP{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function i$(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:a$(),postBody:null,tenantId:t.tenantId,error:pt(t,"no-auth-event")}}function s$(t,e){return Tv()._set(Iv(t),e)}async function EI(t){const e=await Tv()._get(Iv(t));return e&&await Tv()._remove(Iv(t)),e}function o$(t,e){var n,r;const i=c$(e);if(i.includes("/__/auth/callback")){const s=nh(i),o=s.firebaseError?l$(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?pt(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function a$(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<n$;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function Tv(){return Sn(q_)}function Iv(t){return Vs("authEvent",t.config.apiKey,t.name)}function l$(t){try{return JSON.parse(t)}catch{return null}}function c$(t){const e=nh(t),n=e.link?decodeURIComponent(e.link):void 0,r=nh(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return nh(i).link||i||r||n||t}function nh(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Yo(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$=500;class d${constructor(){this._redirectPersistence=Ws,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Gf,this._overrideRedirectResult=Q_}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new r$(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){xt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){ZF(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),sF(),await this._originValidation(e);const o=i$(e,r,i);await s$(e,o);const a=await QF(e,o,n),l=await XF(a);return JF(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=YF(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=Gs(),o=setTimeout(async()=>{await EI(e),n.onEvent(TI())},u$),a=async d=>{clearTimeout(o);const h=await EI(e);let p=null;h&&(d!=null&&d.url)&&(p=o$(h,d.url)),n.onEvent(p||TI())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,u=`${s.packageName.toLowerCase()}://`;Gs().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(u)&&a({url:d}),typeof l=="function")try{l(d)}catch(h){console.error(h)}}}}const h$=d$;function TI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:pt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f$(t,e){Ye(t)._logFramework(e)}var p$="@firebase/auth-compat",m$="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g$=1e3;function dc(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function v$(){return dc()==="http:"||dc()==="https:"}function SP(t=qe()){return!!((dc()==="file:"||dc()==="ionic:"||dc()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function y$(){return P_()||A_()}function _$(){return yA()&&(document==null?void 0:document.documentMode)===11}function w$(t=qe()){return/Edge\/\d+/.test(t)}function E$(t=qe()){return _$()||w$(t)}function RP(){try{const t=self.localStorage,e=Tu();if(t)return t.setItem(e,"1"),t.removeItem(e),E$()?ji():!0}catch{return X_()&&ji()}return!1}function X_(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function qm(){return(v$()||vA()||SP())&&!y$()&&RP()&&!X_()}function AP(){return SP()&&typeof document<"u"}async function T$(){return AP()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},g$);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function I$(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In={LOCAL:"local",NONE:"none",SESSION:"session"},Cl=z,PP="persistence";function b$(t,e){if(Cl(Object.values(In).includes(e),t,"invalid-persistence-type"),P_()){Cl(e!==In.SESSION,t,"unsupported-persistence-type");return}if(A_()){Cl(e===In.NONE,t,"unsupported-persistence-type");return}if(X_()){Cl(e===In.NONE||e===In.LOCAL&&ji(),t,"unsupported-persistence-type");return}Cl(e===In.NONE||RP(),t,"unsupported-persistence-type")}async function bv(t){await t._initializationPromise;const e=CP(),n=Vs(PP,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function S$(t,e){const n=CP();if(!n)return[];const r=Vs(PP,t,e);switch(n.getItem(r)){case In.NONE:return[Ea];case In.LOCAL:return[Kc,Ws];case In.SESSION:return[Ws];default:return[]}}function CP(){var t;try{return((t=I$())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R$=z;class Ri{constructor(){this.browserResolver=Sn(jF),this.cordovaResolver=Sn(h$),this.underlyingResolver=null,this._redirectPersistence=Ws,this._completeRedirectFn=Gf,this._overrideRedirectResult=Q_}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return AP()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return R$(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await T$();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(t){return t.unwrap()}function A$(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P$(t){return xP(t)}function C$(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new k$(t,f5(t,e))}else if(r){const i=xP(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function xP(t){const{_tokenResponse:e}=t instanceof Pt?t.customData:t;if(!e)return null;if(!(t instanceof Pt)&&"temporaryProof"in e&&"phoneNumber"in e)return Ks.credentialFromResult(t);const n=e.providerId;if(!n||n===Pl.PASSWORD)return null;let r;switch(n){case Pl.GOOGLE:r=ur;break;case Pl.FACEBOOK:r=cr;break;case Pl.GITHUB:r=dr;break;case Pl.TWITTER:r=hr;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?Ta._create(n,a):Ir._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new oa(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof Pt?r.credentialFromError(t):r.credentialFromResult(t)}function ln(t,e){return e.catch(n=>{throw n instanceof Pt&&C$(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:P$(n),additionalUserInfo:u5(n),user:Hf.getOrCreate(i)}})}async function Sv(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>ln(t,n.confirm(r))}}class k${constructor(e,n){this.resolver=n,this.auth=A$(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return ln(kP(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hf=class Kl{constructor(e){this._delegate=e,this.multiFactor=v5(e)}static getOrCreate(e){return Kl.USER_MAP.has(e)||Kl.USER_MAP.set(e,new Kl(e)),Kl.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return ln(this.auth,iP(this._delegate,e))}async linkWithPhoneNumber(e,n){return Sv(this.auth,K5(this._delegate,e,n))}async linkWithPopup(e){return ln(this.auth,tF(this._delegate,e,Ri))}async linkWithRedirect(e){return await bv(Ye(this.auth)),uF(this._delegate,e,Ri)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return ln(this.auth,sP(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return Sv(this.auth,G5(this._delegate,e,n))}reauthenticateWithPopup(e){return ln(this.auth,eF(this._delegate,e,Ri))}async reauthenticateWithRedirect(e){return await bv(Ye(this.auth)),lF(this._delegate,e,Ri)}sendEmailVerification(e){return e5(this._delegate,e)}async unlink(e){return await U3(this._delegate,e),this}updateEmail(e){return r5(this._delegate,e)}updatePassword(e){return i5(this._delegate,e)}updatePhoneNumber(e){return H5(this._delegate,e)}updateProfile(e){return aP(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return t5(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Hf.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=z;class Rv{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;kl(r,"invalid-api-key",{appName:e.name}),kl(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Ri:void 0;this._delegate=n.initialize({options:{persistence:x$(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(OM),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Hf.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){g3(this._delegate,e,n)}applyActionCode(e){return W3(this._delegate,e)}checkActionCode(e){return oP(this._delegate,e)}confirmPasswordReset(e,n){return q3(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return ln(this._delegate,G3(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Z3(this._delegate,e)}isSignInWithEmailLink(e){return Y3(this._delegate,e)}async getRedirectResult(){kl(qm(),this._delegate,"operation-not-supported-in-this-environment");const e=await hF(this._delegate,Ri);return e?ln(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){f$(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=II(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=II(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return Q3(this._delegate,e,n)}sendPasswordResetEmail(e,n){return z3(this._delegate,e,n||void 0)}async setPersistence(e){b$(this._delegate,e);let n;switch(e){case In.SESSION:n=Ws;break;case In.LOCAL:n=await Sn(Kc)._isAvailable()?Kc:q_;break;case In.NONE:n=Ea;break;default:return xt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return ln(this._delegate,$3(this._delegate))}signInWithCredential(e){return ln(this._delegate,Bf(this._delegate,e))}signInWithCustomToken(e){return ln(this._delegate,B3(this._delegate,e))}signInWithEmailAndPassword(e,n){return ln(this._delegate,H3(this._delegate,e,n))}signInWithEmailLink(e,n){return ln(this._delegate,X3(this._delegate,e,n))}signInWithPhoneNumber(e,n){return Sv(this._delegate,W5(this._delegate,e,n))}async signInWithPopup(e){return kl(qm(),this._delegate,"operation-not-supported-in-this-environment"),ln(this._delegate,Z5(this._delegate,e,Ri))}async signInWithRedirect(e){return kl(qm(),this._delegate,"operation-not-supported-in-this-environment"),await bv(this._delegate),oF(this._delegate,e,Ri)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return K3(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Rv.Persistence=In;function II(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&Hf.getOrCreate(o)),error:e,complete:n}}function x$(t,e){const n=S$(t,e);if(typeof self<"u"&&!n.includes(Kc)&&n.push(Kc),typeof window<"u")for(const r of[q_,Ws])n.includes(r)||n.push(r);return n.includes(Ea)||n.push(Ea),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(){this.providerId="phone",this._delegate=new Ks(kP(sn.auth()))}static credential(e,n){return Ks.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}J_.PHONE_SIGN_IN_METHOD=Ks.PHONE_SIGN_IN_METHOD;J_.PROVIDER_ID=Ks.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$=z;class N${constructor(e,n,r=sn.app()){var i;D$((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new z5(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$="auth-compat";function L$(t){t.INTERNAL.registerComponent(new dt(O$,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Rv(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:bo.EMAIL_SIGNIN,PASSWORD_RESET:bo.PASSWORD_RESET,RECOVER_EMAIL:bo.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:bo.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:bo.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:bo.VERIFY_EMAIL}},EmailAuthProvider:is,FacebookAuthProvider:cr,GithubAuthProvider:dr,GoogleAuthProvider:ur,OAuthProvider:oa,SAMLAuthProvider:Hh,PhoneAuthProvider:J_,PhoneMultiFactorGenerator:bP,RecaptchaVerifier:N$,TwitterAuthProvider:hr,Auth:Rv,AuthCredential:Qa,Error:Pt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(p$,m$)}L$(sn);var bI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fs,DP;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,T){function A(){}A.prototype=T.prototype,R.D=T.prototype,R.prototype=new A,R.prototype.constructor=R,R.C=function(k,N,x){for(var C=Array(arguments.length-2),J=2;J<arguments.length;J++)C[J-2]=arguments[J];return T.prototype[N].apply(k,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,T,A){A||(A=0);var k=Array(16);if(typeof T=="string")for(var N=0;16>N;++N)k[N]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(N=0;16>N;++N)k[N]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=R.g[0],A=R.g[1],N=R.g[2];var x=R.g[3],C=T+(x^A&(N^x))+k[0]+3614090360&4294967295;T=A+(C<<7&4294967295|C>>>25),C=x+(N^T&(A^N))+k[1]+3905402710&4294967295,x=T+(C<<12&4294967295|C>>>20),C=N+(A^x&(T^A))+k[2]+606105819&4294967295,N=x+(C<<17&4294967295|C>>>15),C=A+(T^N&(x^T))+k[3]+3250441966&4294967295,A=N+(C<<22&4294967295|C>>>10),C=T+(x^A&(N^x))+k[4]+4118548399&4294967295,T=A+(C<<7&4294967295|C>>>25),C=x+(N^T&(A^N))+k[5]+1200080426&4294967295,x=T+(C<<12&4294967295|C>>>20),C=N+(A^x&(T^A))+k[6]+2821735955&4294967295,N=x+(C<<17&4294967295|C>>>15),C=A+(T^N&(x^T))+k[7]+4249261313&4294967295,A=N+(C<<22&4294967295|C>>>10),C=T+(x^A&(N^x))+k[8]+1770035416&4294967295,T=A+(C<<7&4294967295|C>>>25),C=x+(N^T&(A^N))+k[9]+2336552879&4294967295,x=T+(C<<12&4294967295|C>>>20),C=N+(A^x&(T^A))+k[10]+4294925233&4294967295,N=x+(C<<17&4294967295|C>>>15),C=A+(T^N&(x^T))+k[11]+2304563134&4294967295,A=N+(C<<22&4294967295|C>>>10),C=T+(x^A&(N^x))+k[12]+1804603682&4294967295,T=A+(C<<7&4294967295|C>>>25),C=x+(N^T&(A^N))+k[13]+4254626195&4294967295,x=T+(C<<12&4294967295|C>>>20),C=N+(A^x&(T^A))+k[14]+2792965006&4294967295,N=x+(C<<17&4294967295|C>>>15),C=A+(T^N&(x^T))+k[15]+1236535329&4294967295,A=N+(C<<22&4294967295|C>>>10),C=T+(N^x&(A^N))+k[1]+4129170786&4294967295,T=A+(C<<5&4294967295|C>>>27),C=x+(A^N&(T^A))+k[6]+3225465664&4294967295,x=T+(C<<9&4294967295|C>>>23),C=N+(T^A&(x^T))+k[11]+643717713&4294967295,N=x+(C<<14&4294967295|C>>>18),C=A+(x^T&(N^x))+k[0]+3921069994&4294967295,A=N+(C<<20&4294967295|C>>>12),C=T+(N^x&(A^N))+k[5]+3593408605&4294967295,T=A+(C<<5&4294967295|C>>>27),C=x+(A^N&(T^A))+k[10]+38016083&4294967295,x=T+(C<<9&4294967295|C>>>23),C=N+(T^A&(x^T))+k[15]+3634488961&4294967295,N=x+(C<<14&4294967295|C>>>18),C=A+(x^T&(N^x))+k[4]+3889429448&4294967295,A=N+(C<<20&4294967295|C>>>12),C=T+(N^x&(A^N))+k[9]+568446438&4294967295,T=A+(C<<5&4294967295|C>>>27),C=x+(A^N&(T^A))+k[14]+3275163606&4294967295,x=T+(C<<9&4294967295|C>>>23),C=N+(T^A&(x^T))+k[3]+4107603335&4294967295,N=x+(C<<14&4294967295|C>>>18),C=A+(x^T&(N^x))+k[8]+1163531501&4294967295,A=N+(C<<20&4294967295|C>>>12),C=T+(N^x&(A^N))+k[13]+2850285829&4294967295,T=A+(C<<5&4294967295|C>>>27),C=x+(A^N&(T^A))+k[2]+4243563512&4294967295,x=T+(C<<9&4294967295|C>>>23),C=N+(T^A&(x^T))+k[7]+1735328473&4294967295,N=x+(C<<14&4294967295|C>>>18),C=A+(x^T&(N^x))+k[12]+2368359562&4294967295,A=N+(C<<20&4294967295|C>>>12),C=T+(A^N^x)+k[5]+4294588738&4294967295,T=A+(C<<4&4294967295|C>>>28),C=x+(T^A^N)+k[8]+2272392833&4294967295,x=T+(C<<11&4294967295|C>>>21),C=N+(x^T^A)+k[11]+1839030562&4294967295,N=x+(C<<16&4294967295|C>>>16),C=A+(N^x^T)+k[14]+4259657740&4294967295,A=N+(C<<23&4294967295|C>>>9),C=T+(A^N^x)+k[1]+2763975236&4294967295,T=A+(C<<4&4294967295|C>>>28),C=x+(T^A^N)+k[4]+1272893353&4294967295,x=T+(C<<11&4294967295|C>>>21),C=N+(x^T^A)+k[7]+4139469664&4294967295,N=x+(C<<16&4294967295|C>>>16),C=A+(N^x^T)+k[10]+3200236656&4294967295,A=N+(C<<23&4294967295|C>>>9),C=T+(A^N^x)+k[13]+681279174&4294967295,T=A+(C<<4&4294967295|C>>>28),C=x+(T^A^N)+k[0]+3936430074&4294967295,x=T+(C<<11&4294967295|C>>>21),C=N+(x^T^A)+k[3]+3572445317&4294967295,N=x+(C<<16&4294967295|C>>>16),C=A+(N^x^T)+k[6]+76029189&4294967295,A=N+(C<<23&4294967295|C>>>9),C=T+(A^N^x)+k[9]+3654602809&4294967295,T=A+(C<<4&4294967295|C>>>28),C=x+(T^A^N)+k[12]+3873151461&4294967295,x=T+(C<<11&4294967295|C>>>21),C=N+(x^T^A)+k[15]+530742520&4294967295,N=x+(C<<16&4294967295|C>>>16),C=A+(N^x^T)+k[2]+3299628645&4294967295,A=N+(C<<23&4294967295|C>>>9),C=T+(N^(A|~x))+k[0]+4096336452&4294967295,T=A+(C<<6&4294967295|C>>>26),C=x+(A^(T|~N))+k[7]+1126891415&4294967295,x=T+(C<<10&4294967295|C>>>22),C=N+(T^(x|~A))+k[14]+2878612391&4294967295,N=x+(C<<15&4294967295|C>>>17),C=A+(x^(N|~T))+k[5]+4237533241&4294967295,A=N+(C<<21&4294967295|C>>>11),C=T+(N^(A|~x))+k[12]+1700485571&4294967295,T=A+(C<<6&4294967295|C>>>26),C=x+(A^(T|~N))+k[3]+2399980690&4294967295,x=T+(C<<10&4294967295|C>>>22),C=N+(T^(x|~A))+k[10]+4293915773&4294967295,N=x+(C<<15&4294967295|C>>>17),C=A+(x^(N|~T))+k[1]+2240044497&4294967295,A=N+(C<<21&4294967295|C>>>11),C=T+(N^(A|~x))+k[8]+1873313359&4294967295,T=A+(C<<6&4294967295|C>>>26),C=x+(A^(T|~N))+k[15]+4264355552&4294967295,x=T+(C<<10&4294967295|C>>>22),C=N+(T^(x|~A))+k[6]+2734768916&4294967295,N=x+(C<<15&4294967295|C>>>17),C=A+(x^(N|~T))+k[13]+1309151649&4294967295,A=N+(C<<21&4294967295|C>>>11),C=T+(N^(A|~x))+k[4]+4149444226&4294967295,T=A+(C<<6&4294967295|C>>>26),C=x+(A^(T|~N))+k[11]+3174756917&4294967295,x=T+(C<<10&4294967295|C>>>22),C=N+(T^(x|~A))+k[2]+718787259&4294967295,N=x+(C<<15&4294967295|C>>>17),C=A+(x^(N|~T))+k[9]+3951481745&4294967295,R.g[0]=R.g[0]+T&4294967295,R.g[1]=R.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,R.g[2]=R.g[2]+N&4294967295,R.g[3]=R.g[3]+x&4294967295}r.prototype.u=function(R,T){T===void 0&&(T=R.length);for(var A=T-this.blockSize,k=this.B,N=this.h,x=0;x<T;){if(N==0)for(;x<=A;)i(this,R,x),x+=this.blockSize;if(typeof R=="string"){for(;x<T;)if(k[N++]=R.charCodeAt(x++),N==this.blockSize){i(this,k),N=0;break}}else for(;x<T;)if(k[N++]=R[x++],N==this.blockSize){i(this,k),N=0;break}}this.h=N,this.o+=T},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var T=1;T<R.length-8;++T)R[T]=0;var A=8*this.o;for(T=R.length-8;T<R.length;++T)R[T]=A&255,A/=256;for(this.u(R),R=Array(16),T=A=0;4>T;++T)for(var k=0;32>k;k+=8)R[A++]=this.g[T]>>>k&255;return R};function s(R,T){var A=a;return Object.prototype.hasOwnProperty.call(A,R)?A[R]:A[R]=T(R)}function o(R,T){this.h=T;for(var A=[],k=!0,N=R.length-1;0<=N;N--){var x=R[N]|0;k&&x==T||(A[N]=x,k=!1)}this.g=A}var a={};function l(R){return-128<=R&&128>R?s(R,function(T){return new o([T|0],0>T?-1:0)}):new o([R|0],0>R?-1:0)}function u(R){if(isNaN(R)||!isFinite(R))return h;if(0>R)return I(u(-R));for(var T=[],A=1,k=0;R>=A;k++)T[k]=R/A|0,A*=4294967296;return new o(T,0)}function d(R,T){if(R.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(R.charAt(0)=="-")return I(d(R.substring(1),T));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=u(Math.pow(T,8)),k=h,N=0;N<R.length;N+=8){var x=Math.min(8,R.length-N),C=parseInt(R.substring(N,N+x),T);8>x?(x=u(Math.pow(T,x)),k=k.j(x).add(u(C))):(k=k.j(A),k=k.add(u(C)))}return k}var h=l(0),p=l(1),v=l(16777216);t=o.prototype,t.m=function(){if(_(this))return-I(this).m();for(var R=0,T=1,A=0;A<this.g.length;A++){var k=this.i(A);R+=(0<=k?k:4294967296+k)*T,T*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(E(this))return"0";if(_(this))return"-"+I(this).toString(R);for(var T=u(Math.pow(R,6)),A=this,k="";;){var N=D(A,T).g;A=w(A,N.j(T));var x=((0<A.g.length?A.g[0]:A.h)>>>0).toString(R);if(A=N,E(A))return x+k;for(;6>x.length;)x="0"+x;k=x+k}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function E(R){if(R.h!=0)return!1;for(var T=0;T<R.g.length;T++)if(R.g[T]!=0)return!1;return!0}function _(R){return R.h==-1}t.l=function(R){return R=w(this,R),_(R)?-1:E(R)?0:1};function I(R){for(var T=R.g.length,A=[],k=0;k<T;k++)A[k]=~R.g[k];return new o(A,~R.h).add(p)}t.abs=function(){return _(this)?I(this):this},t.add=function(R){for(var T=Math.max(this.g.length,R.g.length),A=[],k=0,N=0;N<=T;N++){var x=k+(this.i(N)&65535)+(R.i(N)&65535),C=(x>>>16)+(this.i(N)>>>16)+(R.i(N)>>>16);k=C>>>16,x&=65535,C&=65535,A[N]=C<<16|x}return new o(A,A[A.length-1]&-2147483648?-1:0)};function w(R,T){return R.add(I(T))}t.j=function(R){if(E(this)||E(R))return h;if(_(this))return _(R)?I(this).j(I(R)):I(I(this).j(R));if(_(R))return I(this.j(I(R)));if(0>this.l(v)&&0>R.l(v))return u(this.m()*R.m());for(var T=this.g.length+R.g.length,A=[],k=0;k<2*T;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<R.g.length;N++){var x=this.i(k)>>>16,C=this.i(k)&65535,J=R.i(N)>>>16,Le=R.i(N)&65535;A[2*k+2*N]+=C*Le,y(A,2*k+2*N),A[2*k+2*N+1]+=x*Le,y(A,2*k+2*N+1),A[2*k+2*N+1]+=C*J,y(A,2*k+2*N+1),A[2*k+2*N+2]+=x*J,y(A,2*k+2*N+2)}for(k=0;k<T;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=T;k<2*T;k++)A[k]=0;return new o(A,0)};function y(R,T){for(;(R[T]&65535)!=R[T];)R[T+1]+=R[T]>>>16,R[T]&=65535,T++}function b(R,T){this.g=R,this.h=T}function D(R,T){if(E(T))throw Error("division by zero");if(E(R))return new b(h,h);if(_(R))return T=D(I(R),T),new b(I(T.g),I(T.h));if(_(T))return T=D(R,I(T)),new b(I(T.g),T.h);if(30<R.g.length){if(_(R)||_(T))throw Error("slowDivide_ only works with positive integers.");for(var A=p,k=T;0>=k.l(R);)A=V(A),k=V(k);var N=$(A,1),x=$(k,1);for(k=$(k,2),A=$(A,2);!E(k);){var C=x.add(k);0>=C.l(R)&&(N=N.add(A),x=C),k=$(k,1),A=$(A,1)}return T=w(R,N.j(T)),new b(N,T)}for(N=h;0<=R.l(T);){for(A=Math.max(1,Math.floor(R.m()/T.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),x=u(A),C=x.j(T);_(C)||0<C.l(R);)A-=k,x=u(A),C=x.j(T);E(x)&&(x=p),N=N.add(x),R=w(R,C)}return new b(N,R)}t.A=function(R){return D(this,R).h},t.and=function(R){for(var T=Math.max(this.g.length,R.g.length),A=[],k=0;k<T;k++)A[k]=this.i(k)&R.i(k);return new o(A,this.h&R.h)},t.or=function(R){for(var T=Math.max(this.g.length,R.g.length),A=[],k=0;k<T;k++)A[k]=this.i(k)|R.i(k);return new o(A,this.h|R.h)},t.xor=function(R){for(var T=Math.max(this.g.length,R.g.length),A=[],k=0;k<T;k++)A[k]=this.i(k)^R.i(k);return new o(A,this.h^R.h)};function V(R){for(var T=R.g.length+1,A=[],k=0;k<T;k++)A[k]=R.i(k)<<1|R.i(k-1)>>>31;return new o(A,R.h)}function $(R,T){var A=T>>5;T%=32;for(var k=R.g.length-A,N=[],x=0;x<k;x++)N[x]=0<T?R.i(x+A)>>>T|R.i(x+A+1)<<32-T:R.i(x+A);return new o(N,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,DP=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Fs=o}).apply(typeof bI<"u"?bI:typeof self<"u"?self:typeof window<"u"?window:{});var Ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var NP,Gl,OP,rh,Av,LP,VP,MP;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,g){return c==Array.prototype||c==Object.prototype||(c[f]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ed=="object"&&Ed];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(c,f){if(f)e:{var g=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var O=c[S];if(!(O in g))break e;g=g[O]}c=c[c.length-1],S=g[c],f=f(S),f!=S&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}function s(c,f){c instanceof String&&(c+="");var g=0,S=!1,O={next:function(){if(!S&&g<c.length){var F=g++;return{value:f(F,c[F]),done:!1}}return S=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(c){return c||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function d(c,f,g){return c.call.apply(c.bind,arguments)}function h(c,f,g){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,S),c.apply(f,O)}}return function(){return c.apply(f,arguments)}}function p(c,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function v(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function E(c,f){function g(){}g.prototype=f.prototype,c.aa=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(S,O,F){for(var q=Array(arguments.length-2),be=2;be<arguments.length;be++)q[be-2]=arguments[be];return f.prototype[O].apply(S,q)}}function _(c){const f=c.length;if(0<f){const g=Array(f);for(let S=0;S<f;S++)g[S]=c[S];return g}return[]}function I(c,f){for(let g=1;g<arguments.length;g++){const S=arguments[g];if(l(S)){const O=c.length||0,F=S.length||0;c.length=O+F;for(let q=0;q<F;q++)c[O+q]=S[q]}else c.push(S)}}class w{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function y(c){return/^[\s\xa0]*$/.test(c)}function b(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function D(c){return D[" "](c),c}D[" "]=function(){};var V=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function $(c,f,g){for(const S in c)f.call(g,c[S],S,c)}function R(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function T(c){const f={};for(const g in c)f[g]=c[g];return f}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(c,f){let g,S;for(let O=1;O<arguments.length;O++){S=arguments[O];for(g in S)c[g]=S[g];for(let F=0;F<A.length;F++)g=A[F],Object.prototype.hasOwnProperty.call(S,g)&&(c[g]=S[g])}}function N(c){var f=1;c=c.split(":");const g=[];for(;0<f&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function x(c){a.setTimeout(()=>{throw c},0)}function C(){var c=ee;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class J{constructor(){this.h=this.g=null}add(f,g){const S=Le.get();S.set(f,g),this.h?this.h.next=S:this.g=S,this.h=S}}var Le=new w(()=>new tt,c=>c.reset());class tt{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let gt,W=!1,ee=new J,te=()=>{const c=a.Promise.resolve(void 0);gt=()=>{c.then(we)}};var we=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(g){x(g)}var f=Le;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}W=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var Dn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return c}();function Ar(c,f){if(ie.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(V){e:{try{D(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Pr[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ar.aa.h.call(this)}}E(Ar,ie);var Pr={2:"touch",3:"pen",4:"mouse"};Ar.prototype.h=function(){Ar.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Cr="closure_listenable_"+(1e6*Math.random()|0),qN=0;function WN(c,f,g,S,O){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!S,this.ha=O,this.key=++qN,this.da=this.fa=!1}function Fu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function $u(c){this.src=c,this.g={},this.h=0}$u.prototype.add=function(c,f,g,S,O){var F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);var q=$p(c,f,S,O);return-1<q?(f=c[q],g||(f.fa=!1)):(f=new WN(f,this.src,F,!!S,O),f.fa=g,c.push(f)),f};function Fp(c,f){var g=f.type;if(g in c.g){var S=c.g[g],O=Array.prototype.indexOf.call(S,f,void 0),F;(F=0<=O)&&Array.prototype.splice.call(S,O,1),F&&(Fu(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function $p(c,f,g,S){for(var O=0;O<c.length;++O){var F=c[O];if(!F.da&&F.listener==f&&F.capture==!!g&&F.ha==S)return O}return-1}var Up="closure_lm_"+(1e6*Math.random()|0),jp={};function k0(c,f,g,S,O){if(Array.isArray(f)){for(var F=0;F<f.length;F++)k0(c,f[F],g,S,O);return null}return g=N0(g),c&&c[Cr]?c.K(f,g,u(S)?!!S.capture:!!S,O):KN(c,f,g,!1,S,O)}function KN(c,f,g,S,O,F){if(!f)throw Error("Invalid event type");var q=u(O)?!!O.capture:!!O,be=zp(c);if(be||(c[Up]=be=new $u(c)),g=be.add(f,g,S,q,F),g.proxy)return g;if(S=GN(),g.proxy=S,S.src=c,S.listener=g,c.addEventListener)Dn||(O=q),O===void 0&&(O=!1),c.addEventListener(f.toString(),S,O);else if(c.attachEvent)c.attachEvent(D0(f.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function GN(){function c(g){return f.call(c.src,c.listener,g)}const f=HN;return c}function x0(c,f,g,S,O){if(Array.isArray(f))for(var F=0;F<f.length;F++)x0(c,f[F],g,S,O);else S=u(S)?!!S.capture:!!S,g=N0(g),c&&c[Cr]?(c=c.i,f=String(f).toString(),f in c.g&&(F=c.g[f],g=$p(F,g,S,O),-1<g&&(Fu(F[g]),Array.prototype.splice.call(F,g,1),F.length==0&&(delete c.g[f],c.h--)))):c&&(c=zp(c))&&(f=c.g[f.toString()],c=-1,f&&(c=$p(f,g,S,O)),(g=-1<c?f[c]:null)&&Bp(g))}function Bp(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[Cr])Fp(f.i,c);else{var g=c.type,S=c.proxy;f.removeEventListener?f.removeEventListener(g,S,c.capture):f.detachEvent?f.detachEvent(D0(g),S):f.addListener&&f.removeListener&&f.removeListener(S),(g=zp(f))?(Fp(g,c),g.h==0&&(g.src=null,f[Up]=null)):Fu(c)}}}function D0(c){return c in jp?jp[c]:jp[c]="on"+c}function HN(c,f){if(c.da)c=!0;else{f=new Ar(f,this);var g=c.listener,S=c.ha||c.src;c.fa&&Bp(c),c=g.call(S,f)}return c}function zp(c){return c=c[Up],c instanceof $u?c:null}var qp="__closure_events_fn_"+(1e9*Math.random()>>>0);function N0(c){return typeof c=="function"?c:(c[qp]||(c[qp]=function(f){return c.handleEvent(f)}),c[qp])}function Nt(){ae.call(this),this.i=new $u(this),this.M=this,this.F=null}E(Nt,ae),Nt.prototype[Cr]=!0,Nt.prototype.removeEventListener=function(c,f,g,S){x0(this,c,f,g,S)};function qt(c,f){var g,S=c.F;if(S)for(g=[];S;S=S.F)g.push(S);if(c=c.M,S=f.type||f,typeof f=="string")f=new ie(f,c);else if(f instanceof ie)f.target=f.target||c;else{var O=f;f=new ie(S,c),k(f,O)}if(O=!0,g)for(var F=g.length-1;0<=F;F--){var q=f.g=g[F];O=Uu(q,S,!0,f)&&O}if(q=f.g=c,O=Uu(q,S,!0,f)&&O,O=Uu(q,S,!1,f)&&O,g)for(F=0;F<g.length;F++)q=f.g=g[F],O=Uu(q,S,!1,f)&&O}Nt.prototype.N=function(){if(Nt.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var g=c.g[f],S=0;S<g.length;S++)Fu(g[S]);delete c.g[f],c.h--}}this.F=null},Nt.prototype.K=function(c,f,g,S){return this.i.add(String(c),f,!1,g,S)},Nt.prototype.L=function(c,f,g,S){return this.i.add(String(c),f,!0,g,S)};function Uu(c,f,g,S){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,F=0;F<f.length;++F){var q=f[F];if(q&&!q.da&&q.capture==g){var be=q.listener,It=q.ha||q.src;q.fa&&Fp(c.i,q),O=be.call(It,S)!==!1&&O}}return O&&!S.defaultPrevented}function O0(c,f,g){if(typeof c=="function")g&&(c=p(c,g));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function L0(c){c.g=O0(()=>{c.g=null,c.i&&(c.i=!1,L0(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class QN extends ae{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:L0(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function al(c){ae.call(this),this.h=c,this.g={}}E(al,ae);var V0=[];function M0(c){$(c.g,function(f,g){this.g.hasOwnProperty(g)&&Bp(f)},c),c.g={}}al.prototype.N=function(){al.aa.N.call(this),M0(this)},al.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wp=a.JSON.stringify,YN=a.JSON.parse,XN=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Kp(){}Kp.prototype.h=null;function F0(c){return c.h||(c.h=c.i())}function $0(){}var ll={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gp(){ie.call(this,"d")}E(Gp,ie);function Hp(){ie.call(this,"c")}E(Hp,ie);var ds={},U0=null;function ju(){return U0=U0||new Nt}ds.La="serverreachability";function j0(c){ie.call(this,ds.La,c)}E(j0,ie);function cl(c){const f=ju();qt(f,new j0(f))}ds.STAT_EVENT="statevent";function B0(c,f){ie.call(this,ds.STAT_EVENT,c),this.stat=f}E(B0,ie);function Wt(c){const f=ju();qt(f,new B0(f,c))}ds.Ma="timingevent";function z0(c,f){ie.call(this,ds.Ma,c),this.size=f}E(z0,ie);function ul(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function dl(){this.g=!0}dl.prototype.xa=function(){this.g=!1};function JN(c,f,g,S,O,F){c.info(function(){if(c.g)if(F)for(var q="",be=F.split("&"),It=0;It<be.length;It++){var ve=be[It].split("=");if(1<ve.length){var Ot=ve[0];ve=ve[1];var Lt=Ot.split("_");q=2<=Lt.length&&Lt[1]=="type"?q+(Ot+"="+ve+"&"):q+(Ot+"=redacted&")}}else q=null;else q=F;return"XMLHTTP REQ ("+S+") [attempt "+O+"]: "+f+`
`+g+`
`+q})}function ZN(c,f,g,S,O,F,q){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+O+"]: "+f+`
`+g+`
`+F+" "+q})}function _o(c,f,g,S){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+t2(c,g)+(S?" "+S:"")})}function e2(c,f){c.info(function(){return"TIMEOUT: "+f})}dl.prototype.info=function(){};function t2(c,f){if(!c.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var S=g[c];if(!(2>S.length)){var O=S[1];if(Array.isArray(O)&&!(1>O.length)){var F=O[0];if(F!="noop"&&F!="stop"&&F!="close")for(var q=1;q<O.length;q++)O[q]=""}}}}return Wp(g)}catch{return f}}var Bu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},q0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qp;function zu(){}E(zu,Kp),zu.prototype.g=function(){return new XMLHttpRequest},zu.prototype.i=function(){return{}},Qp=new zu;function li(c,f,g,S){this.j=c,this.i=f,this.l=g,this.R=S||1,this.U=new al(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new W0}function W0(){this.i=null,this.g="",this.h=!1}var K0={},Yp={};function Xp(c,f,g){c.L=1,c.v=Gu(kr(f)),c.m=g,c.P=!0,G0(c,null)}function G0(c,f){c.F=Date.now(),qu(c),c.A=kr(c.v);var g=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),aE(g.i,"t",S),c.C=0,g=c.j.J,c.h=new W0,c.g=SE(c.j,g?f:null,!c.m),0<c.O&&(c.M=new QN(p(c.Y,c,c.g),c.O)),f=c.U,g=c.g,S=c.ca;var O="readystatechange";Array.isArray(O)||(O&&(V0[0]=O.toString()),O=V0);for(var F=0;F<O.length;F++){var q=k0(g,O[F],S||f.handleEvent,!1,f.h||f);if(!q)break;f.g[q.key]=q}f=c.H?T(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),cl(),JN(c.i,c.u,c.A,c.l,c.R,c.m)}li.prototype.ca=function(c){c=c.target;const f=this.M;f&&xr(c)==3?f.j():this.Y(c)},li.prototype.Y=function(c){try{if(c==this.g)e:{const Lt=xr(this.g);var f=this.g.Ba();const To=this.g.Z();if(!(3>Lt)&&(Lt!=3||this.g&&(this.h.h||this.g.oa()||pE(this.g)))){this.J||Lt!=4||f==7||(f==8||0>=To?cl(3):cl(2)),Jp(this);var g=this.g.Z();this.X=g;t:if(H0(this)){var S=pE(this.g);c="";var O=S.length,F=xr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hs(this),hl(this);var q="";break t}this.h.i=new a.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,c+=this.h.i.decode(S[f],{stream:!(F&&f==O-1)});S.length=0,this.h.g+=c,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=g==200,ZN(this.i,this.u,this.A,this.l,this.R,Lt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var be,It=this.g;if((be=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(be)){var ve=be;break t}}ve=null}if(g=ve)_o(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zp(this,g);else{this.o=!1,this.s=3,Wt(12),hs(this),hl(this);break e}}if(this.P){g=!0;let qn;for(;!this.J&&this.C<q.length;)if(qn=n2(this,q),qn==Yp){Lt==4&&(this.s=4,Wt(14),g=!1),_o(this.i,this.l,null,"[Incomplete Response]");break}else if(qn==K0){this.s=4,Wt(15),_o(this.i,this.l,q,"[Invalid Chunk]"),g=!1;break}else _o(this.i,this.l,qn,null),Zp(this,qn);if(H0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||q.length!=0||this.h.h||(this.s=1,Wt(16),g=!1),this.o=this.o&&g,!g)_o(this.i,this.l,q,"[Invalid Chunked Response]"),hs(this),hl(this);else if(0<q.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),sm(Ot),Ot.M=!0,Wt(11))}}else _o(this.i,this.l,q,null),Zp(this,q);Lt==4&&hs(this),this.o&&!this.J&&(Lt==4?EE(this.j,this):(this.o=!1,qu(this)))}else _2(this.g),g==400&&0<q.indexOf("Unknown SID")?(this.s=3,Wt(12)):(this.s=0,Wt(13)),hs(this),hl(this)}}}catch{}finally{}};function H0(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function n2(c,f){var g=c.C,S=f.indexOf(`
`,g);return S==-1?Yp:(g=Number(f.substring(g,S)),isNaN(g)?K0:(S+=1,S+g>f.length?Yp:(f=f.slice(S,S+g),c.C=S+g,f)))}li.prototype.cancel=function(){this.J=!0,hs(this)};function qu(c){c.S=Date.now()+c.I,Q0(c,c.I)}function Q0(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ul(p(c.ba,c),f)}function Jp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}li.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(e2(this.i,this.A),this.L!=2&&(cl(),Wt(17)),hs(this),this.s=2,hl(this)):Q0(this,this.S-c)};function hl(c){c.j.G==0||c.J||EE(c.j,c)}function hs(c){Jp(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,M0(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function Zp(c,f){try{var g=c.j;if(g.G!=0&&(g.g==c||em(g.h,c))){if(!c.K&&em(g.h,c)&&g.G==3){try{var S=g.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var O=S;if(O[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)Zu(g),Xu(g);else break e;im(g),Wt(18)}}else g.za=O[1],0<g.za-g.T&&37500>O[2]&&g.F&&g.v==0&&!g.C&&(g.C=ul(p(g.Za,g),6e3));if(1>=J0(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ps(g,11)}else if((c.K||g.g==c)&&Zu(g),!y(f))for(O=g.Da.g.parse(f),f=0;f<O.length;f++){let ve=O[f];if(g.T=ve[0],ve=ve[1],g.G==2)if(ve[0]=="c"){g.K=ve[1],g.ia=ve[2];const Ot=ve[3];Ot!=null&&(g.la=Ot,g.j.info("VER="+g.la));const Lt=ve[4];Lt!=null&&(g.Aa=Lt,g.j.info("SVER="+g.Aa));const To=ve[5];To!=null&&typeof To=="number"&&0<To&&(S=1.5*To,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const qn=c.g;if(qn){const td=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(td){var F=S.h;F.g||td.indexOf("spdy")==-1&&td.indexOf("quic")==-1&&td.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(tm(F,F.h),F.h=null))}if(S.D){const om=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;om&&(S.ya=om,Ce(S.I,S.D,om))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var q=c;if(S.qa=bE(S,S.J?S.ia:null,S.W),q.K){Z0(S.h,q);var be=q,It=S.L;It&&(be.I=It),be.B&&(Jp(be),qu(be)),S.g=q}else _E(S);0<g.i.length&&Ju(g)}else ve[0]!="stop"&&ve[0]!="close"||ps(g,7);else g.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?ps(g,7):rm(g):ve[0]!="noop"&&g.l&&g.l.ta(ve),g.v=0)}}cl(4)}catch{}}var r2=class{constructor(c,f){this.g=c,this.map=f}};function Y0(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function X0(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function J0(c){return c.h?1:c.g?c.g.size:0}function em(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function tm(c,f){c.g?c.g.add(f):c.h=f}function Z0(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}Y0.prototype.cancel=function(){if(this.i=eE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function eE(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.D);return f}return _(c.i)}function i2(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var f=[],g=c.length,S=0;S<g;S++)f.push(c[S]);return f}f=[],g=0;for(S in c)f[g++]=c[S];return f}function s2(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var f=[];c=c.length;for(var g=0;g<c;g++)f.push(g);return f}f=[],g=0;for(const S in c)f[g++]=S;return f}}}function tE(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var g=s2(c),S=i2(c),O=S.length,F=0;F<O;F++)f.call(void 0,S[F],g&&g[F],c)}var nE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function o2(c,f){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var S=c[g].indexOf("="),O=null;if(0<=S){var F=c[g].substring(0,S);O=c[g].substring(S+1)}else F=c[g];f(F,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function fs(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof fs){this.h=c.h,Wu(this,c.j),this.o=c.o,this.g=c.g,Ku(this,c.s),this.l=c.l;var f=c.i,g=new ml;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),rE(this,g),this.m=c.m}else c&&(f=String(c).match(nE))?(this.h=!1,Wu(this,f[1]||"",!0),this.o=fl(f[2]||""),this.g=fl(f[3]||"",!0),Ku(this,f[4]),this.l=fl(f[5]||"",!0),rE(this,f[6]||"",!0),this.m=fl(f[7]||"")):(this.h=!1,this.i=new ml(null,this.h))}fs.prototype.toString=function(){var c=[],f=this.j;f&&c.push(pl(f,iE,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(pl(f,iE,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(pl(g,g.charAt(0)=="/"?c2:l2,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",pl(g,d2)),c.join("")};function kr(c){return new fs(c)}function Wu(c,f,g){c.j=g?fl(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Ku(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function rE(c,f,g){f instanceof ml?(c.i=f,h2(c.i,c.h)):(g||(f=pl(f,u2)),c.i=new ml(f,c.h))}function Ce(c,f,g){c.i.set(f,g)}function Gu(c){return Ce(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function fl(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function pl(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,a2),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function a2(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var iE=/[#\/\?@]/g,l2=/[#\?:]/g,c2=/[#\?]/g,u2=/[#\?@]/g,d2=/#/g;function ml(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function ci(c){c.g||(c.g=new Map,c.h=0,c.i&&o2(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=ml.prototype,t.add=function(c,f){ci(this),this.i=null,c=wo(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function sE(c,f){ci(c),f=wo(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function oE(c,f){return ci(c),f=wo(c,f),c.g.has(f)}t.forEach=function(c,f){ci(this),this.g.forEach(function(g,S){g.forEach(function(O){c.call(f,O,S,this)},this)},this)},t.na=function(){ci(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let S=0;S<f.length;S++){const O=c[S];for(let F=0;F<O.length;F++)g.push(f[S])}return g},t.V=function(c){ci(this);let f=[];if(typeof c=="string")oE(this,c)&&(f=f.concat(this.g.get(wo(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)f=f.concat(c[g])}return f},t.set=function(c,f){return ci(this),this.i=null,c=wo(this,c),oE(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function aE(c,f,g){sE(c,f),0<g.length&&(c.i=null,c.g.set(wo(c,f),_(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var S=f[g];const F=encodeURIComponent(String(S)),q=this.V(S);for(S=0;S<q.length;S++){var O=F;q[S]!==""&&(O+="="+encodeURIComponent(String(q[S]))),c.push(O)}}return this.i=c.join("&")};function wo(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function h2(c,f){f&&!c.j&&(ci(c),c.i=null,c.g.forEach(function(g,S){var O=S.toLowerCase();S!=O&&(sE(this,S),aE(this,O,g))},c)),c.j=f}function f2(c,f){const g=new dl;if(a.Image){const S=new Image;S.onload=v(ui,g,"TestLoadImage: loaded",!0,f,S),S.onerror=v(ui,g,"TestLoadImage: error",!1,f,S),S.onabort=v(ui,g,"TestLoadImage: abort",!1,f,S),S.ontimeout=v(ui,g,"TestLoadImage: timeout",!1,f,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else f(!1)}function p2(c,f){const g=new dl,S=new AbortController,O=setTimeout(()=>{S.abort(),ui(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:S.signal}).then(F=>{clearTimeout(O),F.ok?ui(g,"TestPingServer: ok",!0,f):ui(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),ui(g,"TestPingServer: error",!1,f)})}function ui(c,f,g,S,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),S(g)}catch{}}function m2(){this.g=new XN}function g2(c,f,g){const S=g||"";try{tE(c,function(O,F){let q=O;u(O)&&(q=Wp(O)),f.push(S+F+"="+encodeURIComponent(q))})}catch(O){throw f.push(S+"type="+encodeURIComponent("_badmap")),O}}function Hu(c){this.l=c.Ub||null,this.j=c.eb||!1}E(Hu,Kp),Hu.prototype.g=function(){return new Qu(this.l,this.j)},Hu.prototype.i=function(c){return function(){return c}}({});function Qu(c,f){Nt.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Qu,Nt),t=Qu.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,vl(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gl(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,vl(this)),this.g&&(this.readyState=3,vl(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lE(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function lE(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?gl(this):vl(this),this.readyState==3&&lE(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,gl(this))},t.Qa=function(c){this.g&&(this.response=c,gl(this))},t.ga=function(){this.g&&gl(this)};function gl(c){c.readyState=4,c.l=null,c.j=null,c.v=null,vl(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function vl(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Qu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function cE(c){let f="";return $(c,function(g,S){f+=S,f+=":",f+=g,f+=`\r
`}),f}function nm(c,f,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=cE(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):Ce(c,f,g))}function Ge(c){Nt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Ge,Nt);var v2=/^https?$/i,y2=["POST","PUT"];t=Ge.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qp.g(),this.v=this.o?F0(this.o):F0(Qp),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(F){uE(this,F);return}if(c=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var O in S)g.set(O,S[O]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const F of S.keys())g.set(F,S.get(F));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(F=>F.toLowerCase()=="content-type"),O=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(y2,f,void 0))||S||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,q]of g)this.g.setRequestHeader(F,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fE(this),this.u=!0,this.g.send(c),this.u=!1}catch(F){uE(this,F)}};function uE(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,dE(c),Yu(c)}function dE(c){c.A||(c.A=!0,qt(c,"complete"),qt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,qt(this,"complete"),qt(this,"abort"),Yu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yu(this,!0)),Ge.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?hE(this):this.bb())},t.bb=function(){hE(this)};function hE(c){if(c.h&&typeof o<"u"&&(!c.v[1]||xr(c)!=4||c.Z()!=2)){if(c.u&&xr(c)==4)O0(c.Ea,0,c);else if(qt(c,"readystatechange"),xr(c)==4){c.h=!1;try{const q=c.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var S;if(S=q===0){var O=String(c.D).match(nE)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),S=!v2.test(O?O.toLowerCase():"")}g=S}if(g)qt(c,"complete"),qt(c,"success");else{c.m=6;try{var F=2<xr(c)?c.g.statusText:""}catch{F=""}c.l=F+" ["+c.Z()+"]",dE(c)}}finally{Yu(c)}}}}function Yu(c,f){if(c.g){fE(c);const g=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||qt(c,"ready");try{g.onreadystatechange=S}catch{}}}function fE(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function xr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<xr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),YN(f)}};function pE(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function _2(c){const f={};c=(c.g&&2<=xr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(y(c[S]))continue;var g=N(c[S]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const F=f[O]||[];f[O]=F,F.push(g)}R(f,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yl(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function mE(c){this.Aa=0,this.i=[],this.j=new dl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yl("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yl("baseRetryDelayMs",5e3,c),this.cb=yl("retryDelaySeedMs",1e4,c),this.Wa=yl("forwardChannelMaxRetries",2,c),this.wa=yl("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Y0(c&&c.concurrentRequestLimit),this.Da=new m2,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=mE.prototype,t.la=8,t.G=1,t.connect=function(c,f,g,S){Wt(0),this.W=c,this.H=f||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=bE(this,null,this.W),Ju(this)};function rm(c){if(gE(c),c.G==3){var f=c.U++,g=kr(c.I);if(Ce(g,"SID",c.K),Ce(g,"RID",f),Ce(g,"TYPE","terminate"),_l(c,g),f=new li(c,c.j,f),f.L=2,f.v=Gu(kr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=SE(f.j,null),f.g.ea(f.v)),f.F=Date.now(),qu(f)}IE(c)}function Xu(c){c.g&&(sm(c),c.g.cancel(),c.g=null)}function gE(c){Xu(c),c.u&&(a.clearTimeout(c.u),c.u=null),Zu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Ju(c){if(!X0(c.h)&&!c.s){c.s=!0;var f=c.Ga;gt||te(),W||(gt(),W=!0),ee.add(f,c),c.B=0}}function w2(c,f){return J0(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ul(p(c.Ga,c,f),TE(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const O=new li(this,this.j,c);let F=this.o;if(this.S&&(F?(F=T(F),k(F,this.S)):F=this.S),this.m!==null||this.O||(O.H=F,F=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=yE(this,O,f),g=kr(this.I),Ce(g,"RID",c),Ce(g,"CVER",22),this.D&&Ce(g,"X-HTTP-Session-Id",this.D),_l(this,g),F&&(this.O?f="headers="+encodeURIComponent(String(cE(F)))+"&"+f:this.m&&nm(g,this.m,F)),tm(this.h,O),this.Ua&&Ce(g,"TYPE","init"),this.P?(Ce(g,"$req",f),Ce(g,"SID","null"),O.T=!0,Xp(O,g,null)):Xp(O,g,f),this.G=2}}else this.G==3&&(c?vE(this,c):this.i.length==0||X0(this.h)||vE(this))};function vE(c,f){var g;f?g=f.l:g=c.U++;const S=kr(c.I);Ce(S,"SID",c.K),Ce(S,"RID",g),Ce(S,"AID",c.T),_l(c,S),c.m&&c.o&&nm(S,c.m,c.o),g=new li(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),f&&(c.i=f.D.concat(c.i)),f=yE(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),tm(c.h,g),Xp(g,S,f)}function _l(c,f){c.H&&$(c.H,function(g,S){Ce(f,S,g)}),c.l&&tE({},function(g,S){Ce(f,S,g)})}function yE(c,f,g){g=Math.min(c.i.length,g);var S=c.l?p(c.l.Na,c.l,c):null;e:{var O=c.i;let F=-1;for(;;){const q=["count="+g];F==-1?0<g?(F=O[0].g,q.push("ofs="+F)):F=0:q.push("ofs="+F);let be=!0;for(let It=0;It<g;It++){let ve=O[It].g;const Ot=O[It].map;if(ve-=F,0>ve)F=Math.max(0,O[It].g-100),be=!1;else try{g2(Ot,q,"req"+ve+"_")}catch{S&&S(Ot)}}if(be){S=q.join("&");break e}}}return c=c.i.splice(0,g),f.D=c,S}function _E(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;gt||te(),W||(gt(),W=!0),ee.add(f,c),c.v=0}}function im(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ul(p(c.Fa,c),TE(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,wE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ul(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wt(10),Xu(this),wE(this))};function sm(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function wE(c){c.g=new li(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=kr(c.qa);Ce(f,"RID","rpc"),Ce(f,"SID",c.K),Ce(f,"AID",c.T),Ce(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ce(f,"TO",c.ja),Ce(f,"TYPE","xmlhttp"),_l(c,f),c.m&&c.o&&nm(f,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=Gu(kr(f)),g.m=null,g.P=!0,G0(g,c)}t.Za=function(){this.C!=null&&(this.C=null,Xu(this),im(this),Wt(19))};function Zu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function EE(c,f){var g=null;if(c.g==f){Zu(c),sm(c),c.g=null;var S=2}else if(em(c.h,f))g=f.D,Z0(c.h,f),S=1;else return;if(c.G!=0){if(f.o)if(S==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var O=c.B;S=ju(),qt(S,new z0(S,g)),Ju(c)}else _E(c);else if(O=f.s,O==3||O==0&&0<f.X||!(S==1&&w2(c,f)||S==2&&im(c)))switch(g&&0<g.length&&(f=c.h,f.i=f.i.concat(g)),O){case 1:ps(c,5);break;case 4:ps(c,10);break;case 3:ps(c,6);break;default:ps(c,2)}}}function TE(c,f){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*f}function ps(c,f){if(c.j.info("Error code "+f),f==2){var g=p(c.fb,c),S=c.Xa;const O=!S;S=new fs(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Wu(S,"https"),Gu(S),O?f2(S.toString(),g):p2(S.toString(),g)}else Wt(2);c.G=0,c.l&&c.l.sa(f),IE(c),gE(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function IE(c){if(c.G=0,c.ka=[],c.l){const f=eE(c.h);(f.length!=0||c.i.length!=0)&&(I(c.ka,f),I(c.ka,c.i),c.h.i.length=0,_(c.i),c.i.length=0),c.l.ra()}}function bE(c,f,g){var S=g instanceof fs?kr(g):new fs(g);if(S.g!="")f&&(S.g=f+"."+S.g),Ku(S,S.s);else{var O=a.location;S=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var F=new fs(null);S&&Wu(F,S),f&&(F.g=f),O&&Ku(F,O),g&&(F.l=g),S=F}return g=c.D,f=c.ya,g&&f&&Ce(S,g,f),Ce(S,"VER",c.la),_l(c,S),S}function SE(c,f,g){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new Ge(new Hu({eb:g})):new Ge(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function RE(){}t=RE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ed(){}ed.prototype.g=function(c,f){return new _n(c,f)};function _n(c,f){Nt.call(this),this.g=new mE(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!y(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!y(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Eo(this)}E(_n,Nt),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){rm(this.g)},_n.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=Wp(c),c=g);f.i.push(new r2(f.Ya++,c)),f.G==3&&Ju(f)},_n.prototype.N=function(){this.g.l=null,delete this.j,rm(this.g),delete this.g,_n.aa.N.call(this)};function AE(c){Gp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}E(AE,Gp);function PE(){Hp.call(this),this.status=1}E(PE,Hp);function Eo(c){this.g=c}E(Eo,RE),Eo.prototype.ua=function(){qt(this.g,"a")},Eo.prototype.ta=function(c){qt(this.g,new AE(c))},Eo.prototype.sa=function(c){qt(this.g,new PE)},Eo.prototype.ra=function(){qt(this.g,"b")},ed.prototype.createWebChannel=ed.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,MP=function(){return new ed},VP=function(){return ju()},LP=ds,Av={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bu.NO_ERROR=0,Bu.TIMEOUT=8,Bu.HTTP_ERROR=6,rh=Bu,q0.COMPLETE="complete",OP=q0,$0.EventType=ll,ll.OPEN="a",ll.CLOSE="b",ll.ERROR="c",ll.MESSAGE="d",Nt.prototype.listen=Nt.prototype.K,Gl=$0,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,NP=Ge}).apply(typeof Ed<"u"?Ed:typeof self<"u"?self:typeof window<"u"?window:{});const SI="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new mu("@firebase/firestore");function No(){return qi.logLevel}function V$(t){qi.setLogLevel(t)}function j(t,...e){if(qi.logLevel<=se.DEBUG){const n=e.map(Z_);qi.debug(`Firestore (${Xa}): ${t}`,...n)}}function rt(t,...e){if(qi.logLevel<=se.ERROR){const n=e.map(Z_);qi.error(`Firestore (${Xa}): ${t}`,...n)}}function br(t,...e){if(qi.logLevel<=se.WARN){const n=e.map(Z_);qi.warn(`Firestore (${Xa}): ${t}`,...n)}}function Z_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(t="Unexpected state"){const e=`FIRESTORE (${Xa}) INTERNAL ASSERTION FAILED: `+t;throw rt(e),new Error(e)}function X(t,e){t||H()}function M$(t,e){t||H()}function G(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class U extends Pt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class F${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class $${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class U${constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){X(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Ct;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ct,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ct)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(X(typeof r.accessToken=="string"),new FP(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return X(e===null||typeof e=="string"),new _t(e)}}class j${constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class B${constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new j$(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class z${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q${constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){X(this.o===void 0);const r=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(X(typeof n.token=="string"),this.R=n.token,new z$(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=W$(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ne(t,e){return t<e?-1:t>e?1:0}function Ia(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function UP(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new U(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new U(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new U(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ye.fromMillis(Date.now())}static fromDate(e){return ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ye(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Z(e)}static min(){return new Z(new ye(0,0))}static max(){return new Z(new ye(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n,r){n===void 0?n=0:n>e.length&&H(),r===void 0?r=e.length-n:r>e.length-n&&H(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Gc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ce extends Gc{construct(e,n,r){return new ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new U(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ce(n)}static emptyPath(){return new ce([])}}const K$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fe extends Gc{construct(e,n,r){return new Fe(e,n,r)}static isValidIdentifier(e){return K$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Fe(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new U(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new U(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new U(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new U(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fe(n)}static emptyPath(){return new Fe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(ce.fromString(e))}static fromName(e){return new K(ce.fromString(e).popFirst(5))}static empty(){return new K(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new ce(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Pv(t){return t.fields.find(e=>e.kind===2)}function _s(t){return t.fields.filter(e=>e.kind!==2)}Jh.UNKNOWN_ID=-1;class ih{constructor(e,n){this.fieldPath=e,this.kind=n}}class Hc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Hc(0,Cn.min())}}function jP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new ye(n+1,0):new ye(n,r));return new Cn(i,K.empty(),e)}function BP(t){return new Cn(t.readTime,t.key,-1)}class Cn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Cn(Z.min(),K.empty(),-1)}static max(){return new Cn(Z.max(),K.empty(),-1)}}function ew(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ss(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==zP)throw t;j("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new L((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new L((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Ct,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new hc(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=tw(r.target.error);this.V.reject(new hc(e,i))}}static open(e,n,r,i){try{return new Qf(n,e.transaction(i,r))}catch(s){throw new hc(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(j("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new H$(n)}}class _r{constructor(e,n,r){this.name=e,this.version=n,this.p=r,_r.S(qe())===12.2&&rt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return j("SimpleDb","Removing database:",e),ws(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ji())return!1;if(_r.v())return!0;const e=qe(),n=_r.S(e),r=0<n&&n<10,i=WP(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(j("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new hc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new U(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new U(M.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new hc(e,o))},i.onupgradeneeded=s=>{j("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{j("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=Qf.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),L.reject(u))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(j("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function WP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class G${constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ws(this.B.delete())}}class hc extends U{constructor(e,n){super(M.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function os(t){return t.name==="IndexedDbTransactionError"}class H${constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(j("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(j("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ws(r)}add(e){return j("SimpleDb","ADD",this.store.name,e,e),ws(this.store.add(e))}get(e){return ws(this.store.get(e)).next(n=>(n===void 0&&(n=null),j("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return j("SimpleDb","DELETE",this.store.name,e),ws(this.store.delete(e))}count(){return j("SimpleDb","COUNT",this.store.name),ws(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new L((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new L((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){j("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new L((r,i)=>{n.onerror=s=>{const o=tw(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new L((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new G$(a),u=n(a.primaryKey,a.value,l);if(u instanceof L){const d=u.catch(h=>(l.done(),L.reject(h)));r.push(d)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>L.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ws(t){return new L((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=tw(r.target.error);n(i)}})}let RI=!1;function tw(t){const e=_r.S(qe());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new U("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return RI||(RI=!0,setTimeout(()=>{throw r},0)),r}}return t}class Q${constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){j("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{j("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){os(n)?j("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await ss(n)}await this.X(6e4)})}}class Y${constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return L.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return j("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(j("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=BP(s);ew(o,r)>0&&(r=o)}),new Cn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}hn.oe=-1;function bu(t){return t==null}function Qc(t){return t===0&&1/t==-1/0}function KP(t){return typeof t=="number"&&Number.isInteger(t)&&!Qc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=AI(e)),e=X$(t.get(n),e);return AI(e)}function X$(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function AI(t){return t+""}function mr(t){const e=t.length;if(X(e>=2),e===2)return X(t.charAt(0)===""&&t.charAt(1)===""),ce.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&H(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:H()}s=o+2}return new ce(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(t,e){return[t,Jt(e)]}function GP(t,e,n){return[t,Jt(e),n]}const J$={},Z$=["prefixPath","collectionGroup","readTime","documentId"],e6=["prefixPath","collectionGroup","documentId"],t6=["collectionGroup","readTime","prefixPath","documentId"],n6=["canonicalId","targetId"],r6=["targetId","path"],i6=["path","targetId"],s6=["collectionId","parent"],o6=["indexId","uid"],a6=["uid","sequenceNumber"],l6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],c6=["indexId","uid","orderedDocumentKey"],u6=["userId","collectionPath","documentId"],d6=["userId","collectionPath","largestBatchId"],h6=["userId","collectionGroup","largestBatchId"],HP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],f6=[...HP,"documentOverlays"],QP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],YP=QP,nw=[...YP,"indexConfiguration","indexState","indexEntries"],p6=nw,m6=[...nw,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv extends qP{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function mt(t,e){const n=G(t);return _r.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ho(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function XP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e,n){this.comparator=e,this.root=n||St.EMPTY}insert(e,n){return new Pe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,St.BLACK,null,null))}remove(e){return new Pe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,St.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Td(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Td(this.root,e,this.comparator,!1)}getReverseIterator(){return new Td(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Td(this.root,e,this.comparator,!0)}}class Td{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class St{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??St.RED,this.left=i??St.EMPTY,this.right=s??St.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new St(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return St.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return St.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();const e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}}St.EMPTY=null,St.RED=!0,St.BLACK=!1;St.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(e,n,r,i,s){return this}insert(e,n,r){return new St(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kI(this.data.getIterator())}getIteratorFrom(e){return new kI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ie)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ie(this.comparator);return n.data=e,n}}class kI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function So(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.fields=e,e.sort(Fe.comparator)}static empty(){return new fn([])}unionWith(e){let n=new Ie(Fe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new fn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ia(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new JP("Invalid base64 string: "+s):s}}(e);return new Xe(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Xe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xe.EMPTY_BYTE_STRING=new Xe("");const v6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jr(t){if(X(!!t),typeof t=="string"){let e=0;const n=v6.exec(t);if(X(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ve(t.seconds),nanos:Ve(t.nanos)}}function Ve(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wi(t){return typeof t=="string"?Xe.fromBase64String(t):Xe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function rw(t){const e=t.mapValue.fields.__previous_value__;return Yf(e)?rw(e):e}function Yc(t){const e=Jr(t.mapValue.fields.__local_write_time__.timestampValue);return new ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Ki{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ki("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ki&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},oh={nullValue:"NULL_VALUE"};function Hs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yf(t)?4:ZP(t)?9007199254740991:Xf(t)?10:11:H()}function Sr(t,e){if(t===e)return!0;const n=Hs(t);if(n!==Hs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yc(t).isEqual(Yc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Jr(i.timestampValue),a=Jr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Wi(i.bytesValue).isEqual(Wi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ve(i.geoPointValue.latitude)===Ve(s.geoPointValue.latitude)&&Ve(i.geoPointValue.longitude)===Ve(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ve(i.integerValue)===Ve(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ve(i.doubleValue),a=Ve(s.doubleValue);return o===a?Qc(o)===Qc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ia(t.arrayValue.values||[],e.arrayValue.values||[],Sr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(CI(o)!==CI(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Sr(o[l],a[l])))return!1;return!0}(t,e);default:return H()}}function Xc(t,e){return(t.values||[]).find(n=>Sr(n,e))!==void 0}function Gi(t,e){if(t===e)return 0;const n=Hs(t),r=Hs(e);if(n!==r)return ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ne(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ve(s.integerValue||s.doubleValue),l=Ve(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return xI(t.timestampValue,e.timestampValue);case 4:return xI(Yc(t),Yc(e));case 5:return ne(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Wi(s),l=Wi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=ne(a[u],l[u]);if(d!==0)return d}return ne(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ne(Ve(s.latitude),Ve(o.latitude));return a!==0?a:ne(Ve(s.longitude),Ve(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return DI(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,d;const h=s.fields||{},p=o.fields||{},v=(a=h.value)===null||a===void 0?void 0:a.arrayValue,E=(l=p.value)===null||l===void 0?void 0:l.arrayValue,_=ne(((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0,((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0);return _!==0?_:DI(v,E)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ai.mapValue&&o===Ai.mapValue)return 0;if(s===Ai.mapValue)return 1;if(o===Ai.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=ne(l[h],d[h]);if(p!==0)return p;const v=Gi(a[l[h]],u[d[h]]);if(v!==0)return v}return ne(l.length,d.length)}(t.mapValue,e.mapValue);default:throw H()}}function xI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ne(t,e);const n=Jr(t),r=Jr(e),i=ne(n.seconds,r.seconds);return i!==0?i:ne(n.nanos,r.nanos)}function DI(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Gi(n[i],r[i]);if(s)return s}return ne(n.length,r.length)}function ba(t){return kv(t)}function kv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Jr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Wi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=kv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${kv(n.fields[o])}`;return i+"}"}(t.mapValue):H()}function Qs(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xv(t){return!!t&&"integerValue"in t}function Jc(t){return!!t&&"arrayValue"in t}function NI(t){return!!t&&"nullValue"in t}function OI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ah(t){return!!t&&"mapValue"in t}function Xf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function fc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ho(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ZP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const eC={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function _6(t){return"nullValue"in t?oh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Qs(Ki.empty(),K.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Xf(t)?eC:{mapValue:{}}:H()}function w6(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Qs(Ki.empty(),K.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?eC:"mapValue"in t?Xf(t)?{mapValue:{}}:Ai:H()}function LI(t,e){const n=Gi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function VI(t,e){const n=Gi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.value=e}static empty(){return new Rt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ah(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fc(n)}setAll(e){let n=Fe.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=fc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());ah(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ah(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ho(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Rt(fc(this.value))}}function tC(t){const e=[];return ho(t.fields,(n,r)=>{const i=new Fe([n]);if(ah(r)){const s=tC(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new De(e,0,Z.min(),Z.min(),Z.min(),Rt.empty(),0)}static newFoundDocument(e,n,r,i){return new De(e,1,n,Z.min(),r,i,0)}static newNoDocument(e,n){return new De(e,2,n,Z.min(),Z.min(),Rt.empty(),0)}static newUnknownDocument(e,n){return new De(e,3,n,Z.min(),Z.min(),Rt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof De&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new De(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n){this.position=e,this.inclusive=n}}function MI(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=Gi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function FI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n="asc"){this.field=e,this.dir=n}}function E6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{}class ue extends nC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new T6(e,n,r):n==="array-contains"?new S6(e,r):n==="in"?new lC(e,r):n==="not-in"?new R6(e,r):n==="array-contains-any"?new A6(e,r):new ue(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new I6(e,r):new b6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Gi(n,this.value)):n!==null&&Hs(this.value)===Hs(n)&&this.matchesComparison(Gi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ee extends nC{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ee(e,n)}matches(e){return Sa(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Sa(t){return t.op==="and"}function Dv(t){return t.op==="or"}function iw(t){return rC(t)&&Sa(t)}function rC(t){for(const e of t.filters)if(e instanceof Ee)return!1;return!0}function Nv(t){if(t instanceof ue)return t.field.canonicalString()+t.op.toString()+ba(t.value);if(iw(t))return t.filters.map(e=>Nv(e)).join(",");{const e=t.filters.map(n=>Nv(n)).join(",");return`${t.op}(${e})`}}function iC(t,e){return t instanceof ue?function(r,i){return i instanceof ue&&r.op===i.op&&r.field.isEqual(i.field)&&Sr(r.value,i.value)}(t,e):t instanceof Ee?function(r,i){return i instanceof Ee&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&iC(o,i.filters[a]),!0):!1}(t,e):void H()}function sC(t,e){const n=t.filters.concat(e);return Ee.create(n,t.op)}function oC(t){return t instanceof ue?function(n){return`${n.field.canonicalString()} ${n.op} ${ba(n.value)}`}(t):t instanceof Ee?function(n){return n.op.toString()+" {"+n.getFilters().map(oC).join(" ,")+"}"}(t):"Filter"}class T6 extends ue{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class I6 extends ue{constructor(e,n){super(e,"in",n),this.keys=aC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class b6 extends ue{constructor(e,n){super(e,"not-in",n),this.keys=aC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function aC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class S6 extends ue{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jc(n)&&Xc(n.arrayValue,this.value)}}class lC extends ue{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Xc(this.value.arrayValue,n)}}class R6 extends ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Xc(this.value.arrayValue,n)}}class A6 extends ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Xc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Ov(t,e=null,n=[],r=[],i=null,s=null,o=null){return new P6(t,e,n,r,i,s,o)}function Ys(t){const e=G(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Nv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),bu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ba(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ba(r)).join(",")),e.ue=n}return e.ue}function Su(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!E6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!iC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!FI(t.startAt,e.startAt)&&FI(t.endAt,e.endAt)}function Zh(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function ef(t,e){return t.filters.filter(n=>n instanceof ue&&n.field.isEqual(e))}function $I(t,e,n){let r=oh,i=!0;for(const s of ef(t,e)){let o=oh,a=!0;switch(s.op){case"<":case"<=":o=_6(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=oh}LI({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];LI({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function UI(t,e,n){let r=Ai,i=!0;for(const s of ef(t,e)){let o=Ai,a=!0;switch(s.op){case">=":case">":o=w6(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ai}VI({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];VI({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function cC(t,e,n,r,i,s,o,a){return new ii(t,e,n,r,i,s,o,a)}function Ja(t){return new ii(t)}function jI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sw(t){return t.collectionGroup!==null}function la(t){const e=G(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ie(Fe.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Zc(s,r))}),n.has(Fe.keyField().canonicalString())||e.ce.push(new Zc(Fe.keyField(),r))}return e.ce}function Zt(t){const e=G(t);return e.le||(e.le=C6(e,la(t))),e.le}function C6(t,e){if(t.limitType==="F")return Ov(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Zc(i.field,s)});const n=t.endAt?new Hi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hi(t.startAt.position,t.startAt.inclusive):null;return Ov(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Lv(t,e){const n=t.filters.concat([e]);return new ii(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tf(t,e,n){return new ii(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ru(t,e){return Su(Zt(t),Zt(e))&&t.limitType===e.limitType}function uC(t){return`${Ys(Zt(t))}|lt:${t.limitType}`}function Oo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>oC(i)).join(", ")}]`),bu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ba(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ba(i)).join(",")),`Target(${r})`}(Zt(t))}; limitType=${t.limitType})`}function Au(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of la(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=MI(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,la(r),i)||r.endAt&&!function(o,a,l){const u=MI(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,la(r),i))}(t,e)}function dC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hC(t){return(e,n)=>{let r=!1;for(const i of la(t)){const s=k6(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function k6(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Gi(l,u):H()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return H()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ho(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return XP(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6=new Pe(K.comparator);function pn(){return x6}const fC=new Pe(K.comparator);function Hl(...t){let e=fC;for(const n of t)e=e.insert(n.key,n);return e}function pC(t){let e=fC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function gr(){return pc()}function mC(){return pc()}function pc(){return new as(t=>t.toString(),(t,e)=>t.isEqual(e))}const D6=new Pe(K.comparator),N6=new Ie(K.comparator);function re(...t){let e=N6;for(const n of t)e=e.add(n);return e}const O6=new Ie(ne);function ow(){return O6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qc(e)?"-0":e}}function gC(t){return{integerValue:""+t}}function vC(t,e){return KP(e)?gC(e):aw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this._=void 0}}function L6(t,e,n){return t instanceof Ra?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Yf(s)&&(s=rw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Xs?_C(t,e):t instanceof Js?wC(t,e):function(i,s){const o=yC(i,s),a=BI(o)+BI(i.Pe);return xv(o)&&xv(i.Pe)?gC(a):aw(i.serializer,a)}(t,e)}function V6(t,e,n){return t instanceof Xs?_C(t,e):t instanceof Js?wC(t,e):n}function yC(t,e){return t instanceof Aa?function(r){return xv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ra extends Jf{}class Xs extends Jf{constructor(e){super(),this.elements=e}}function _C(t,e){const n=EC(e);for(const r of t.elements)n.some(i=>Sr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Js extends Jf{constructor(e){super(),this.elements=e}}function wC(t,e){let n=EC(e);for(const r of t.elements)n=n.filter(i=>!Sr(i,r));return{arrayValue:{values:n}}}class Aa extends Jf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function BI(t){return Ve(t.integerValue||t.doubleValue)}function EC(t){return Jc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,n){this.field=e,this.transform=n}}function M6(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Xs&&i instanceof Xs||r instanceof Js&&i instanceof Js?Ia(r.elements,i.elements,Sr):r instanceof Aa&&i instanceof Aa?Sr(r.Pe,i.Pe):r instanceof Ra&&i instanceof Ra}(t.transform,e.transform)}class F6{constructor(e,n){this.version=e,this.transformResults=n}}class $e{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $e}static exists(e){return new $e(void 0,e)}static updateTime(e){return new $e(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Zf{}function TC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new el(t.key,$e.none()):new Za(t.key,t.data,$e.none());{const n=t.data,r=Rt.empty();let i=new Ie(Fe.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new si(t.key,r,new fn(i.toArray()),$e.none())}}function $6(t,e,n){t instanceof Za?function(i,s,o){const a=i.value.clone(),l=qI(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof si?function(i,s,o){if(!lh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=qI(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(IC(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function mc(t,e,n,r){return t instanceof Za?function(s,o,a,l){if(!lh(s.precondition,o))return a;const u=s.value.clone(),d=WI(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof si?function(s,o,a,l){if(!lh(s.precondition,o))return a;const u=WI(s.fieldTransforms,l,o),d=o.data;return d.setAll(IC(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return lh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function U6(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=yC(r.transform,i||null);s!=null&&(n===null&&(n=Rt.empty()),n.set(r.field,s))}return n||null}function zI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ia(r,i,(s,o)=>M6(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Za extends Zf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class si extends Zf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function IC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function qI(t,e,n){const r=new Map;X(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,V6(o,a,n[i]))}return r}function WI(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,L6(s,o,e))}return r}class el extends Zf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lw extends Zf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&$6(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=mc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=mc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=mC();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=TC(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&Ia(this.mutations,e.mutations,(n,r)=>zI(n,r))&&Ia(this.baseMutations,e.baseMutations,(n,r)=>zI(n,r))}}class uw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){X(e.mutations.length===r.length);let i=function(){return D6}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new uw(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,fe;function bC(t){switch(t){default:return H();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function SC(t){if(t===void 0)return rt("GRPC error has no .code"),M.UNKNOWN;switch(t){case lt.OK:return M.OK;case lt.CANCELLED:return M.CANCELLED;case lt.UNKNOWN:return M.UNKNOWN;case lt.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case lt.INTERNAL:return M.INTERNAL;case lt.UNAVAILABLE:return M.UNAVAILABLE;case lt.UNAUTHENTICATED:return M.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case lt.NOT_FOUND:return M.NOT_FOUND;case lt.ALREADY_EXISTS:return M.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return M.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case lt.ABORTED:return M.ABORTED;case lt.OUT_OF_RANGE:return M.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return M.UNIMPLEMENTED;case lt.DATA_LOSS:return M.DATA_LOSS;default:return H()}}(fe=lt||(lt={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=new Fs([4294967295,4294967295],0);function KI(t){const e=RC().encode(t),n=new DP;return n.update(e),new Uint8Array(n.digest())}function GI(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Fs([n,r],0),new Fs([i,s],0)]}class hw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ql(`Invalid padding: ${n}`);if(r<0)throw new Ql(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ql(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ql(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Fs.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Fs.fromNumber(r)));return i.compare(B6)===1&&(i=new Fs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=KI(e),[r,i]=GI(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new hw(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=KI(e),[r,i]=GI(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ku.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Cu(Z.min(),i,new Pe(ne),pn(),re())}}class ku{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ku(r,n,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class AC{constructor(e,n){this.targetId=e,this.me=n}}class PC{constructor(e,n,r=Xe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class HI{constructor(){this.fe=0,this.ge=YI(),this.pe=Xe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=re(),n=re(),r=re();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:H()}}),new ku(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=YI()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,X(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class z6{constructor(e){this.Le=e,this.Be=new Map,this.ke=pn(),this.qe=QI(),this.Qe=new Pe(ne)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:H()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Zh(s))if(r===0){const o=new K(s.path);this.Ue(n,o,De.newNoDocument(o,Z.min()))}else X(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Wi(r).toUint8Array()}catch(l){if(l instanceof JP)return br("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new hw(o,i,s)}catch(l){return br(l instanceof Ql?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Zh(a.target)){const l=new K(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,De.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=re();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Cu(e,n,this.Qe,this.ke,r);return this.ke=pn(),this.qe=QI(),this.Qe=new Pe(ne),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new HI,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ie(ne),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||j("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new HI),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function QI(){return new Pe(K.comparator)}function YI(){return new Pe(K.comparator)}const q6={asc:"ASCENDING",desc:"DESCENDING"},W6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},K6={and:"AND",or:"OR"};class G6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vv(t,e){return t.useProto3Json||bu(e)?e:{value:e}}function Pa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function H6(t,e){return Pa(t,e.toTimestamp())}function ot(t){return X(!!t),Z.fromTimestamp(function(n){const r=Jr(n);return new ye(r.seconds,r.nanos)}(t))}function fw(t,e){return Mv(t,e).canonicalString()}function Mv(t,e){const n=function(i){return new ce(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function kC(t){const e=ce.fromString(t);return X(UC(e)),e}function eu(t,e){return fw(t.databaseId,e.path)}function wr(t,e){const n=kC(e);if(n.get(1)!==t.databaseId.projectId)throw new U(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new U(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(NC(n))}function xC(t,e){return fw(t.databaseId,e)}function DC(t){const e=kC(t);return e.length===4?ce.emptyPath():NC(e)}function Fv(t){return new ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function NC(t){return X(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function XI(t,e,n){return{name:eu(t,e),fields:n.value.mapValue.fields}}function OC(t,e,n){const r=wr(t,e.name),i=ot(e.updateTime),s=e.createTime?ot(e.createTime):Z.min(),o=new Rt({mapValue:{fields:e.fields}}),a=De.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Q6(t,e){return"found"in e?function(r,i){X(!!i.found),i.found.name,i.found.updateTime;const s=wr(r,i.found.name),o=ot(i.found.updateTime),a=i.found.createTime?ot(i.found.createTime):Z.min(),l=new Rt({mapValue:{fields:i.found.fields}});return De.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){X(!!i.missing),X(!!i.readTime);const s=wr(r,i.missing),o=ot(i.readTime);return De.newNoDocument(s,o)}(t,e):H()}function Y6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:H()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(X(d===void 0||typeof d=="string"),Xe.fromBase64String(d||"")):(X(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Xe.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?M.UNKNOWN:SC(u.code);return new U(d,u.message||"")}(o);n=new PC(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=wr(t,r.document.name),s=ot(r.document.updateTime),o=r.document.createTime?ot(r.document.createTime):Z.min(),a=new Rt({mapValue:{fields:r.document.fields}}),l=De.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new ch(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=wr(t,r.document),s=r.readTime?ot(r.readTime):Z.min(),o=De.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ch([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=wr(t,r.document),s=r.removedTargetIds||[];n=new ch([],s,i,null)}else{if(!("filter"in e))return H();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new j6(i,s),a=r.targetId;n=new AC(a,o)}}return n}function tu(t,e){let n;if(e instanceof Za)n={update:XI(t,e.key,e.value)};else if(e instanceof el)n={delete:eu(t,e.key)};else if(e instanceof si)n={update:XI(t,e.key,e.data),updateMask:nU(e.fieldMask)};else{if(!(e instanceof lw))return H();n={verify:eu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ra)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Xs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Js)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Aa)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw H()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:H6(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:H()}(t,e.precondition)),n}function $v(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?$e.updateTime(ot(s.updateTime)):s.exists!==void 0?$e.exists(s.exists):$e.none()}(e.currentDocument):$e.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)X(a.setToServerValue==="REQUEST_TIME"),l=new Ra;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new Xs(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new Js(d)}else"increment"in a?l=new Aa(o,a.increment):H();const u=Fe.fromServerFormat(a.fieldPath);return new Pu(u,l)}(t,i)):[];if(e.update){e.update.name;const i=wr(t,e.update.name),s=new Rt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new fn(u.map(d=>Fe.fromServerFormat(d)))}(e.updateMask);return new si(i,s,o,n,r)}return new Za(i,s,n,r)}if(e.delete){const i=wr(t,e.delete);return new el(i,n)}if(e.verify){const i=wr(t,e.verify);return new lw(i,n)}return H()}function X6(t,e){return t&&t.length>0?(X(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?ot(i.updateTime):ot(s);return o.isEqual(Z.min())&&(o=ot(s)),new F6(o,i.transformResults||[])}(n,e))):[]}function LC(t,e){return{documents:[xC(t,e.path)]}}function VC(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=xC(t,i);const s=function(u){if(u.length!==0)return $C(Ee.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(p){return{field:Lo(p.field),direction:Z6(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Vv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function MC(t){let e=DC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){X(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const p=FC(h);return p instanceof Ee&&iw(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(E){return new Zc(Vo(E.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,bu(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,v=h.values||[];return new Hi(v,p)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const p=!h.before,v=h.values||[];return new Hi(v,p)}(n.endAt)),cC(e,i,o,s,a,"F",l,u)}function J6(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Vo(n.unaryFilter.field);return ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Vo(n.unaryFilter.field);return ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Vo(n.unaryFilter.field);return ue.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Vo(n.unaryFilter.field);return ue.create(o,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(t):t.fieldFilter!==void 0?function(n){return ue.create(Vo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ee.create(n.compositeFilter.filters.map(r=>FC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return H()}}(n.compositeFilter.op))}(t):H()}function Z6(t){return q6[t]}function eU(t){return W6[t]}function tU(t){return K6[t]}function Lo(t){return{fieldPath:t.canonicalString()}}function Vo(t){return Fe.fromServerFormat(t.fieldPath)}function $C(t){return t instanceof ue?function(n){if(n.op==="=="){if(OI(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NAN"}};if(NI(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(OI(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NAN"}};if(NI(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lo(n.field),op:eU(n.op),value:n.value}}}(t):t instanceof Ee?function(n){const r=n.getFilters().map(i=>$C(i));return r.length===1?r[0]:{compositeFilter:{op:tU(n.op),filters:r}}}(t):H()}function nU(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function UC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,r,i,s=Z.min(),o=Z.min(),a=Xe.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.ct=e}}function rU(t,e){let n;if(e.document)n=OC(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=K.fromSegments(e.noDocument.path),i=eo(e.noDocument.readTime);n=De.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return H();{const r=K.fromSegments(e.unknownDocument.path),i=eo(e.unknownDocument.version);n=De.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new ye(i[0],i[1]);return Z.fromTimestamp(s)}(e.readTime)),n}function JI(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:nf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:eu(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Pa(s,o.version.toTimestamp()),createTime:Pa(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Zs(e.version)};else{if(!e.isUnknownDocument())return H();r.unknownDocument={path:n.path.toArray(),version:Zs(e.version)}}return r}function nf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Zs(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function eo(t){const e=new ye(t.seconds,t.nanoseconds);return Z.fromTimestamp(e)}function Es(t,e){const n=(e.baseMutations||[]).map(s=>$v(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>$v(t.ct,s)),i=ye.fromMillis(e.localWriteTimeMs);return new cw(e.batchId,i,n,r)}function Yl(t){const e=eo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?eo(t.lastLimboFreeSnapshotVersion):Z.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return X(s.documents.length===1),Zt(Ja(DC(s.documents[0])))}(t.query):function(s){return Zt(MC(s))}(t.query),new jr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Xe.fromBase64String(t.resumeToken))}function BC(t,e){const n=Zs(e.snapshotVersion),r=Zs(e.lastLimboFreeSnapshotVersion);let i;i=Zh(e.target)?LC(t.ct,e.target):VC(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ys(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function pw(t){const e=MC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tf(e,e.limit,"L"):e}function Wm(t,e){return new dw(e.largestBatchId,$v(t.ct,e.overlayMutation))}function ZI(t,e){const n=e.path.lastSegment();return[t,Jt(e.path.popLast()),n]}function eb(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Zs(r.readTime),documentKey:Jt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{getBundleMetadata(e,n){return tb(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:eo(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return tb(e).put(function(i){return{bundleId:i.id,createTime:Zs(ot(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return nb(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:pw(s.bundledQuery),readTime:eo(s.readTime)}}(r)})}saveNamedQuery(e,n){return nb(e).put(function(i){return{name:i.name,readTime:Zs(ot(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function tb(t){return mt(t,"bundles")}function nb(t){return mt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new ep(e,r)}getOverlay(e,n){return xl(e).get(ZI(this.userId,n)).next(r=>r?Wm(this.serializer,r):null)}getOverlays(e,n){const r=gr();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new dw(n,o);i.push(this.ht(e,a))}),L.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Jt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(xl(e).j("collectionPathOverlayIndex",a))}),L.waitFor(s)}getOverlaysForCollection(e,n,r){const i=gr(),s=Jt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return xl(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=Wm(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=gr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return xl(e).J({index:"collectionGroupOverlayIndex",range:a},(l,u,d)=>{const h=Wm(this.serializer,u);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}ht(e,n){return xl(e).put(function(i,s,o){const[a,l,u]=ZI(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:tu(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function xl(t){return mt(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{Pt(e){return mt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Xe.fromUint8Array(r):Xe.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ve(e.integerValue));else if("doubleValue"in e){const r=Ve(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Qc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Jr(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Wi(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?ZP(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Xf(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):H()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const s=e.fields||{};this.dt(n,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Ve(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),K.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}Ts.vt=new Ts;function oU(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function rb(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=oU(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class aU{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=rb(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=rb(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class lU{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class cU{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Dl{constructor(){this.jt=new aU,this.Ht=new lU(this.jt),this.Jt=new cU(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Is(this.indexId,this.documentKey,this.arrayValue,r)}}function fi(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=ib(t.arrayValue,e.arrayValue),n!==0?n:(n=ib(t.directionalValue,e.directionalValue),n!==0?n:K.comparator(t.documentKey,e.documentKey)))}function ib(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e){this.Xt=new Ie((n,r)=>Fe.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(X(e.collectionGroup===this.collectionId),this.nn)return!1;const n=Pv(e);if(n!==void 0&&!this.sn(n))return!1;const r=_s(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ie(Fe.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new ih(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new ih(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new ih(r.field,r.dir==="asc"?0:1)));return new Jh(Jh.UNKNOWN_ID,this.collectionId,n,Hc.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(t){var e,n;if(X(t instanceof ue||t instanceof Ee),t instanceof ue){if(t instanceof lC){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>ue.create(t.field,"==",s)))||[];return Ee.create(i,"or")}return t}const r=t.filters.map(i=>zC(i));return Ee.create(r,t.op)}function uU(t){if(t.getFilters().length===0)return[];const e=Bv(zC(t));return X(qC(e)),Uv(e)||jv(e)?[e]:e.getFilters()}function Uv(t){return t instanceof ue}function jv(t){return t instanceof Ee&&iw(t)}function qC(t){return Uv(t)||jv(t)||function(n){if(n instanceof Ee&&Dv(n)){for(const r of n.getFilters())if(!Uv(r)&&!jv(r))return!1;return!0}return!1}(t)}function Bv(t){if(X(t instanceof ue||t instanceof Ee),t instanceof ue)return t;if(t.filters.length===1)return Bv(t.filters[0]);const e=t.filters.map(r=>Bv(r));let n=Ee.create(e,t.op);return n=rf(n),qC(n)?n:(X(n instanceof Ee),X(Sa(n)),X(n.filters.length>1),n.filters.reduce((r,i)=>mw(r,i)))}function mw(t,e){let n;return X(t instanceof ue||t instanceof Ee),X(e instanceof ue||e instanceof Ee),n=t instanceof ue?e instanceof ue?function(i,s){return Ee.create([i,s],"and")}(t,e):ob(t,e):e instanceof ue?ob(e,t):function(i,s){if(X(i.filters.length>0&&s.filters.length>0),Sa(i)&&Sa(s))return sC(i,s.getFilters());const o=Dv(i)?i:s,a=Dv(i)?s:i,l=o.filters.map(u=>mw(u,a));return Ee.create(l,"or")}(t,e),rf(n)}function ob(t,e){if(Sa(e))return sC(e,t.getFilters());{const n=e.filters.map(r=>mw(t,r));return Ee.create(n,"or")}}function rf(t){if(X(t instanceof ue||t instanceof Ee),t instanceof ue)return t;const e=t.getFilters();if(e.length===1)return rf(e[0]);if(rC(t))return t;const n=e.map(i=>rf(i)),r=[];return n.forEach(i=>{i instanceof ue?r.push(i):i instanceof Ee&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ee.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(){this.un=new gw}addToCollectionParentIndex(e,n){return this.un.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Cn.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Cn.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class gw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ie(ce.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ie(ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=new Uint8Array(0);class hU{constructor(e,n){this.databaseId=n,this.cn=new gw,this.ln=new as(r=>Ys(r),(r,i)=>Su(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:Jt(i)};return ab(e).put(s)}return L.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[UP(n),""],!1,!0);return ab(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(mr(o.parent))}return r})}addFieldIndex(e,n){const r=Nl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Ao(e);return s.next(a=>{o.put(eb(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Nl(e),i=Ao(e),s=Ro(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Nl(e),r=Ro(e),i=Ao(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return L.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new sb(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Ro(e);let i=!0;const s=new Map;return L.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=re();const a=[];return L.forEach(s,(l,u)=>{j("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(D=>`${D.fieldPath}:${D.kind}`).join(",")}`}(l)} to execute ${Ys(n)}`);const d=function(b,D){const V=Pv(D);if(V===void 0)return null;for(const $ of ef(b,V.fieldPath))switch($.op){case"array-contains-any":return $.value.arrayValue.values||[];case"array-contains":return[$.value]}return null}(u,l),h=function(b,D){const V=new Map;for(const $ of _s(D))for(const R of ef(b,$.fieldPath))switch(R.op){case"==":case"in":V.set($.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return V.set($.fieldPath.canonicalString(),R.value),Array.from(V.values())}return null}(u,l),p=function(b,D){const V=[];let $=!0;for(const R of _s(D)){const T=R.kind===0?$I(b,R.fieldPath,b.startAt):UI(b,R.fieldPath,b.startAt);V.push(T.value),$&&($=T.inclusive)}return new Hi(V,$)}(u,l),v=function(b,D){const V=[];let $=!0;for(const R of _s(D)){const T=R.kind===0?UI(b,R.fieldPath,b.endAt):$I(b,R.fieldPath,b.endAt);V.push(T.value),$&&($=T.inclusive)}return new Hi(V,$)}(u,l),E=this.In(l,u,p),_=this.In(l,u,v),I=this.Tn(l,u,h),w=this.En(l.indexId,d,E,p.inclusive,_,v.inclusive,I);return L.forEach(w,y=>r.G(y,n.limit).next(b=>{b.forEach(D=>{const V=K.fromSegments(D.documentKey);o.has(V)||(o=o.add(V),a.push(V))})}))}).next(()=>a)}return L.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=uU(Ee.create(e.filters,"and")).map(r=>Ov(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const p=n?this.dn(n[h/u]):Id,v=this.An(e,p,r[h%u],i),E=this.Rn(e,p,s[h%u],o),_=a.map(I=>this.An(e,p,I,!0));d.push(...this.createRange(v,E,_))}return d}An(e,n,r,i){const s=new Is(e,K.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){const s=new Is(e,K.empty(),n,r);return i?s.Zt():s}Pn(e,n){const r=new sb(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.hn(n);return L.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Ie(Fe.comparator),d=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:u=u.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){const r=new Dl;for(const i of _s(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);Ts.vt.It(s,o)}return r.zt()}dn(e){const n=new Dl;return Ts.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new Dl;return Ts.vt.It(Qs(this.databaseId,n),r.Yt(function(s){const o=_s(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new Dl);let s=0;for(const o of _s(e)){const a=r[s++];for(const l of i)if(this.fn(n,o.fieldPath)&&Jc(a))i=this.gn(i,o,a);else{const u=l.Yt(o.kind);Ts.vt.It(a,u)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Dl;l.seed(a.zt()),Ts.vt.It(o,l.Yt(n.kind)),s.push(l)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof ue&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Nl(e),i=Ao(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return L.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const p=h?new Hc(h.sequenceNumber,new Cn(eo(h.readTime),new K(mr(h.documentKey)),h.largestBatchId)):Hc.empty(),v=d.fields.map(([E,_])=>new ih(Fe.fromServerFormat(E),_));return new Jh(d.indexId,d.collectionGroup,v,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ne(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Nl(e),s=Ao(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>L.forEach(a,l=>s.put(eb(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return L.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?L.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),L.forEach(a,l=>this.wn(e,i,l).next(u=>{const d=this.Sn(s,l);return u.isEqual(d)?L.resolve():this.bn(e,s,l,u,d)}))))})}Dn(e,n,r,i){return Ro(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return Ro(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=Ro(e);let s=new Ie(fi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{s=s.add(new Is(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,n){let r=new Ie(fi);const i=this.Vn(n,e);if(i==null)return r;const s=Pv(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Jc(o))for(const a of o.arrayValue.values||[])r=r.add(new Is(n.indexId,e.key,this.dn(a),i))}else r=r.add(new Is(n.indexId,e.key,Id,i));return r}bn(e,n,r,i,s){j("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,u,d,h,p){const v=l.getIterator(),E=u.getIterator();let _=So(v),I=So(E);for(;_||I;){let w=!1,y=!1;if(_&&I){const b=d(_,I);b<0?y=!0:b>0&&(w=!0)}else _!=null?y=!0:w=!0;w?(h(I),I=So(E)):y?(p(_),_=So(v)):(_=So(v),I=So(E))}}(i,s,fi,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),L.waitFor(o)}yn(e){let n=1;return Ao(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>fi(o,a)).filter((o,a,l)=>!a||fi(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=fi(o,e),l=fi(o,n);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Id,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Id,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,n){return fi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(lb)}getMinOffset(e,n){return L.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||H())).next(lb)}}function ab(t){return mt(t,"collectionParents")}function Ro(t){return mt(t,"indexEntries")}function Nl(t){return mt(t,"indexConfiguration")}function Ao(t){return mt(t,"indexState")}function lb(t){X(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;ew(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Cn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class cn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new cn(e,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(d,h,p)=>(a++,p.delete()));s.push(l.next(()=>{X(a===1)}));const u=[];for(const d of n.mutations){const h=GP(e,d.key.path,n.batchId);s.push(i.delete(h)),u.push(d.key)}return L.waitFor(s).next(()=>u)}function sf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw H();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(41943040,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);class tp{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){X(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new tp(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pi(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Mo(e),o=pi(e);return o.add({}).next(a=>{X(typeof a=="number");const l=new cw(a,n,r,i),u=function(v,E,_){const I=_.baseMutations.map(y=>tu(v.ct,y)),w=_.mutations.map(y=>tu(v.ct,y));return{userId:E,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:I,mutations:w}}(this.serializer,this.userId,l),d=[];let h=new Ie((p,v)=>ne(p.canonicalString(),v.canonicalString()));for(const p of i){const v=GP(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(u)),d.push(s.put(v,J$))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),L.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return pi(e).get(n).next(r=>r?(X(r.userId===this.userId),Es(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?L.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return pi(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(X(a.batchId>=r),s=Es(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return pi(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pi(e).U("userMutationsIndex",n).next(r=>r.map(i=>Es(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=sh(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Mo(e).J({range:i},(o,a,l)=>{const[u,d,h]=o,p=mr(d);if(u===this.userId&&n.path.isEqual(p))return pi(e).get(h).next(v=>{if(!v)throw H();X(v.userId===this.userId),s.push(Es(this.serializer,v))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ie(ne);const i=[];return n.forEach(s=>{const o=sh(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Mo(e).J({range:a},(u,d,h)=>{const[p,v,E]=u,_=mr(v);p===this.userId&&s.path.isEqual(_)?r=r.add(E):h.done()});i.push(l)}),L.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=sh(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ie(ne);return Mo(e).J({range:o},(l,u,d)=>{const[h,p,v]=l,E=mr(p);h===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(v)):d.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(pi(e).get(s).next(o=>{if(o===null)throw H();X(o.userId===this.userId),r.push(Es(this.serializer,o))}))}),L.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return WC(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),L.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return L.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Mo(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=mr(s[1]);i.push(l)}else a.done()}).next(()=>{X(i.length===0)})})}containsKey(e,n){return KC(e,this.userId,n)}Nn(e){return GC(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function KC(t,e,n){const r=sh(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Mo(t).J({range:s,H:!0},(a,l,u)=>{const[d,h,p]=a;d===e&&h===i&&(o=!0),u.done()}).next(()=>o)}function pi(t){return mt(t,"mutations")}function Mo(t){return mt(t,"documentMutations")}function GC(t){return mt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new to(0)}static kn(){return new to(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new to(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>Z.fromTimestamp(new ye(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Po(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(X(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Po(e).J((o,a)=>{const l=Yl(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>L.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Po(e).J((r,i)=>{const s=Yl(i);n(s)})}qn(e){return ub(e).get("targetGlobalKey").next(n=>(X(n!==null),n))}Qn(e,n){return ub(e).put("targetGlobalKey",n)}Kn(e,n){return Po(e).put(BC(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ys(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Po(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const u=Yl(a);Su(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Ei(e);return n.forEach(o=>{const a=Jt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),L.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ei(e);return L.forEach(n,s=>{const o=Jt(s.path);return L.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Ei(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ei(e);let s=re();return i.J({range:r,H:!0},(o,a,l)=>{const u=mr(o[1]),d=new K(u);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=Jt(n.path),i=IDBKeyRange.bound([r],[UP(r)],!1,!0);let s=0;return Ei(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,n){return Po(e).get(n).next(r=>r?Yl(r):null)}}function Po(t){return mt(t,"targets")}function ub(t){return mt(t,"targetGlobal")}function Ei(t){return mt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db([t,e],[n,r]){const i=ne(t,n);return i===0?ne(e,r):i}class pU{constructor(e){this.Un=e,this.buffer=new Ie(db),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();db(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class mU{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){j("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){os(n)?j("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ss(n)}await this.Hn(3e5)})}}class gU{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(hn.oe);const r=new pU(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(cb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cb):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,a,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),No()<=se.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function vU(t,e){return new gU(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e,n){this.db=e,this.garbageCollector=vU(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return bd(e,r)}removeReference(e,n,r){return bd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return bd(e,n)}nr(e,n){return function(i,s){let o=!1;return GC(i).Y(a=>KC(i,a,s).next(l=>(l&&(o=!0),L.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=n){const l=this.nr(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Z.min()),Ei(e).delete(function(h){return[0,Jt(h.path)]}(o))))});i.push(l)}}).next(()=>L.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return bd(e,n)}tr(e,n){const r=Ei(e);let i,s=hn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==hn.oe&&n(new K(mr(i)),s),s=u,i=l):s=hn.oe}).next(()=>{s!==hn.oe&&n(new K(mr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function bd(t,e){return Ei(t).put(function(r,i){return{targetId:0,path:Jt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.changes=new as(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,De.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ms(e).put(r)}removeEntry(e,n,r){return ms(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],nf(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=De.newInvalidDocument(n);return ms(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ol(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:De.newInvalidDocument(n)};return ms(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ol(n))},(i,s)=>{r={document:this.ir(n,s),size:sf(s)}}).next(()=>r)}getEntries(e,n){let r=pn();return this._r(e,n,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=pn(),i=new Pe(K.comparator);return this._r(e,n,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,sf(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return L.resolve();let i=new Ie(pb);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Ol(i.first()),Ol(i.last())),o=i.getIterator();let a=o.getNext();return ms(e).J({index:"documentKeyIndex",range:s},(l,u,d)=>{const h=K.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&pb(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?d.$(Ol(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),nf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ms(e).U(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=pn();for(const h of u){const p=this.ir(K.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(Au(n,p)||i.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,n,r,i){let s=pn();const o=fb(n,r),a=fb(n,Cn.max());return ms(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,d)=>{const h=this.ir(K.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new wU(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return hb(e).get("remoteDocumentGlobalKey").next(n=>(X(!!n),n))}rr(e,n){return hb(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=rU(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Z.min())))return r}return De.newInvalidDocument(e)}}function QC(t){return new _U(t)}class wU extends HC{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new as(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ie((s,o)=>ne(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=JI(this.cr.serializer,o);i=i.add(s.path.popLast());const u=sf(l);r+=u-a.size,n.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=JI(this.cr.serializer,o.convertToNoDocument(Z.min()));n.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),L.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function hb(t){return mt(t,"remoteDocumentGlobal")}function ms(t){return mt(t,"remoteDocumentsV14")}function Ol(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function fb(t,e){const n=e.documentKey.path.toArray();return[t,nf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function pb(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ne(n[s],r[s]),i)return i;return i=ne(n.length,r.length),i||(i=ne(n[n.length-2],r[r.length-2]),i||ne(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&mc(r.mutation,i,fn.empty(),ye.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){const i=gr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Hl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=gr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=pn();const o=pc(),a=function(){return pc()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof si)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),mc(d.mutation,u,d.mutation.getFieldMask(),ye.now())):o.set(u.key,fn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var h;return a.set(u,new EU(d,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=pc();let i=new Pe((o,a)=>o-a),s=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||fn.empty();d=a.applyToLocalView(u,d),r.set(l,d);const h=(i.get(a.batchId)||re()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,h=mC();d.forEach(p=>{if(!s.has(p)){const v=TC(n.get(p),r.get(p));v!==null&&h.set(p,v),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):L.resolve(gr());let a=-1,l=s;return o.next(u=>L.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,re())).next(d=>({batchId:a,changes:pC(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let i=Hl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Hl();return this.indexManager.getCollectionParents(e,s).next(a=>L.forEach(a,l=>{const u=function(h,p){return new ii(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,De.newInvalidDocument(d)))});let a=Hl();return o.forEach((l,u)=>{const d=s.get(l);d!==void 0&&mc(d.mutation,u,fn.empty(),ye.now()),Au(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return L.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ot(i.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:pw(i.bundledQuery),readTime:ot(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(){this.overlays=new Pe(K.comparator),this.Ir=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=gr();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const i=gr(),s=n.length+1,o=new K(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return L.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Pe((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=gr(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=gr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return L.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new dw(n,r));let s=this.Ir.get(n);s===void 0&&(s=re(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(){this.sessionToken=Xe.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(){this.Tr=new Ie(vt.Er),this.dr=new Ie(vt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new vt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new vt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new K(new ce([])),r=new vt(n,e),i=new vt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new K(new ce([])),r=new vt(n,e),i=new vt(n,e+1);let s=re();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new vt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class vt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return K.comparator(e.key,n.key)||ne(e.wr,n.wr)}static Ar(e,n){return ne(e.wr,n.wr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ie(vt.Er)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new cw(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new vt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new vt(n,0),i=new vt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ie(ne);return n.forEach(i=>{const s=new vt(i,0),o=new vt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),L.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;K.isDocumentKey(s)||(s=s.child(""));const o=new vt(new K(s),0);let a=new Ie(ne);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),L.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){X(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return L.forEach(n.mutations,i=>{const s=new vt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new vt(n,0),i=this.br.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(e){this.Mr=e,this.docs=function(){return new Pe(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():De.newInvalidDocument(n))}getEntries(e,n){let r=pn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():De.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=pn();const o=n.path,a=new K(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||ew(BP(d),r)<=0||(i.has(d.key)||Au(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,r,i){H()}Or(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new AU(this)}getSize(e){return L.resolve(this.size)}}class AU extends HC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e){this.persistence=e,this.Nr=new as(n=>Ys(n),Su),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new vw,this.targetCount=0,this.kr=to.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),L.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new to(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Kn(n),L.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new hn(0),this.Kr=!1,this.Kr=!0,this.$r=new bU,this.referenceDelegate=e(this),this.Ur=new PU(this),this.indexManager=new dU,this.remoteDocumentCache=function(i){return new RU(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new jC(n),this.Gr=new TU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new IU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new SU(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);const i=new CU(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return L.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class CU extends qP{constructor(e){super(),this.currentSequenceNumber=e}}class np{constructor(e){this.persistence=e,this.Jr=new vw,this.Yr=null}static Zr(e){return new np(e)}get Xr(){if(this.Yr)return this.Yr;throw H()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),L.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Xr,r=>{const i=K.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Z.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return L.or([()=>L.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e){this.serializer=e}O(e,n,r,i){const s=new Qf("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",PI,{unique:!0}),l.createObjectStore("documentMutations")}(e),mb(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=L.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),mb(e)),o=o.next(()=>function(l){const u=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Z.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",PI,{unique:!0});const h=u.store("mutations"),p=d.map(v=>h.put(v));return L.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore("documentOverlays",{keyPath:u6});u.createIndex("collectionPathOverlayIndex",d6,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",h6,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:Z$});u.createIndex("documentKeyIndex",e6),u.createIndex("collectionGroupIndex",t6)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:o6}).createIndex("sequenceNumberIndex",a6,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:l6}).createIndex("documentKeyIndex",c6,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=sf(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>L.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>L.forEach(a,l=>{X(l.userId===s.userId);const u=Es(this.serializer,l);return WC(e,s.userId,u).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new ce(o),u=function(h){return[0,Jt(h)]}(l);s.push(n.get(u).next(d=>d?L.resolve():(h=>n.put({targetId:0,path:Jt(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>L.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:s6});const r=n.store("collectionParents"),i=new gw,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Jt(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new ce(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],u)=>{const d=mr(a);return s(d.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,i)=>{const s=Yl(i),o=BC(this.serializer,s);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(h){return h.document?new K(ce.fromString(h.document.name).popFirst(5)):h.noDocument?K.fromSegments(h.noDocument.path):h.unknownDocument?K.fromSegments(h.unknownDocument.path):H()}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>L.waitFor(i))}ai(e,n){const r=n.store("mutations"),i=QC(this.serializer),s=new XC(np.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var u;let d=(u=a.get(l.userId))!==null&&u!==void 0?u:re();Es(this.serializer,l).keys().forEach(h=>d=d.add(h)),a.set(l.userId,d)}),L.forEach(a,(l,u)=>{const d=new _t(u),h=ep.lt(this.serializer,d),p=s.getIndexManager(d),v=tp.lt(d,this.serializer,p,s.referenceDelegate);return new YC(i,v,h,p).recalculateAndSaveOverlaysForDocumentKeys(new Cv(n,hn.oe),l).next()})})}}function mb(t){t.createObjectStore("targetDocuments",{keyPath:r6}).createIndex("documentTargetsIndex",i6,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",n6,{unique:!0}),t.createObjectStore("targetGlobal")}const Km="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class yw{constructor(e,n,r,i,s,o,a,l,u,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=u,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!yw.D())throw new U(M.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yU(this,i),this.Ai=n+"main",this.serializer=new jC(l),this.Ri=new _r(this.Ai,this.hi,new kU(this.serializer)),this.$r=new sU,this.Ur=new fU(this.referenceDelegate,this.serializer),this.remoteDocumentCache=QC(this.serializer),this.Gr=new iU,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&rt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new U(M.FAILED_PRECONDITION,Km);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new hn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Sd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(os(e))return j("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return j("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Ll(e).get("owner").next(n=>L.resolve(this.vi(n)))}Ci(e){return Sd(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=mt(n,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return L.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?L.resolve(!0):Ll(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new U(M.FAILED_PRECONDITION,Km);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sd(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&j("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Cv(e,hn.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Sd(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return tp.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new hU(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return ep.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){j("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===17?m6:l===16?p6:l===15?nw:l===14?YP:l===13?QP:l===12?f6:l===11?HP:void H()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,a=>(o=new Cv(a,this.Qr?this.Qr.next():hn.oe),n==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw rt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new U(M.FAILED_PRECONDITION,zP);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Ll(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new U(M.FAILED_PRECONDITION,Km)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ll(e).put("owner",n)}static D(){return _r.D()}bi(e){const n=Ll(e);return n.get("owner").next(r=>this.vi(r)?(j("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):L.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(rt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;_A()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return j("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return rt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){rt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ll(t){return mt(t,"owner")}function Sd(t){return mt(t,"clientMetadata")}function _w(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=re(),i=re();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ww(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return _A()?8:WP(qe())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new xU;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(No()<=se.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",Oo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),L.resolve()):(No()<=se.DEBUG&&j("QueryEngine","Query:",Oo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(No()<=se.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",Oo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zt(n))):L.resolve())}Yi(e,n){if(jI(n))return L.resolve(null);let r=Zt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=tf(n,null,"F"),r=Zt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=re(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,tf(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return jI(n)||i.isEqual(Z.min())?L.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?L.resolve(null):(No()<=se.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Oo(n)),this.rs(e,o,n,jP(i,-1)).next(a=>a))})}ts(e,n){let r=new Ie(hC(e));return n.forEach((i,s)=>{Au(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return No()<=se.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Oo(n)),this.Ji.getDocumentsMatchingQuery(e,n,Cn.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Pe(ne),this._s=new as(s=>Ys(s),Su),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function ZC(t,e,n,r){return new DU(t,e,n,r)}async function ek(t,e){const n=G(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=re();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function NU(t,e){const n=G(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const h=u.batch,p=h.keys();let v=L.resolve();return p.forEach(E=>{v=v.next(()=>d.getEntry(l,E)).next(_=>{const I=u.docVersions.get(E);X(I!==null),_.version.compareTo(I)<0&&(h.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),d.addEntry(_)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=re();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function tk(t){const e=G(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function OU(t,e){const n=G(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,h)=>{const p=i.get(h);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,h)));let v=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?v=v.withResumeToken(Xe.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),i=i.insert(h,v),function(_,I,w){return _.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,v,d)&&a.push(n.Ur.updateTargetData(s,v))});let l=pn(),u=re();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(nk(s,o,e.documentUpdates).next(d=>{l=d.Ps,u=d.Is})),!r.isEqual(Z.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function nk(t,e,n){let r=re(),i=re();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=pn();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Z.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):j("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function LU(t,e){const n=G(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ca(t,e){const n=G(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new jr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function ka(t,e,n){const r=G(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!os(o))throw o;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function of(t,e,n){const r=G(t);let i=Z.min(),s=re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const h=G(l),p=h._s.get(d);return p!==void 0?L.resolve(h.os.get(p)):h.Ur.getTargetData(u,d)}(r,o,Zt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Z.min(),n?s:re())).next(a=>(sk(r,dC(e),a),{documents:a,Ts:s})))}function rk(t,e){const n=G(t),r=G(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function ik(t,e){const n=G(t),r=n.us.get(e)||Z.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,jP(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(sk(n,e,i),i))}function sk(t,e,n){let r=t.us.get(e)||Z.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}async function VU(t,e,n,r){const i=G(t);let s=re(),o=pn();for(const u of n){const d=e.Es(u.metadata.name);u.document&&(s=s.add(d));const h=e.ds(u);h.setReadTime(e.As(u.metadata.readTime)),o=o.insert(d,h)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),l=await Ca(i,function(d){return Zt(Ja(ce.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>nk(u,a,o).next(d=>(a.apply(u),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Ur.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,d.Ps,d.Is)).next(()=>d.Ps)))}async function MU(t,e,n=re()){const r=await Ca(t,Zt(pw(e.bundledQuery))),i=G(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=ot(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(Xe.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,n,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}function gb(t,e){return`firestore_clients_${t}_${e}`}function vb(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Gm(t,e){return`firestore_targets_${t}_${e}`}class af{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new U(i.error.code,i.error.message))),o?new af(e,n,i.state,s):(rt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new U(r.error.code,r.error.message))),s?new gc(e,r.state,i):(rt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=ow();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=KP(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new lf(e,s):(rt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Ew{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Ew(n.clientId,n.onlineState):(rt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class zv{constructor(){this.activeTargetIds=ow()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hm{constructor(e,n,r,i,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Pe(ne),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=gb(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new zv),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(gb(this.persistenceKey,r));if(i){const s=lf.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Gm(this.persistenceKey,e));if(i){const s=gc.Rs(e,i);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Gm(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return j("SharedClientState","READ",e,n),n}setItem(e,n){j("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){j("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(j("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void rt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(s){let o=hn.oe;if(s!=null)try{const a=JSON.parse(s);X(typeof a=="number"),o=a}catch(a){rt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==hn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const i=new af(this.currentUser,e,n,r),s=vb(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const n=vb(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const i=Gm(this.persistenceKey,e),s=new gc(e,n,r);this.setItem(i,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return lf.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return af.Rs(new _t(s),i,n)}Ys(e,n){const r=this.Ms.exec(e),i=Number(r[1]);return gc.Rs(i,n)}Ls(e){return Ew.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);j("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=ow();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class ok{constructor(){this.so=new zv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new zv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rd=null;function Qm(){return Rd===null?Rd=function(){return 268435456+Math.round(2147483648*Math.random())}():Rd++,"0x"+Rd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class jU extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Qm(),l=this.xo(n,r.toUriEncodedString());j("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(d=>(j("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw br("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=$U[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Qm();return new Promise((o,a)=>{const l=new NP;l.setWithCredentials(!0),l.listenOnce(OP.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case rh.NO_ERROR:const d=l.getResponseJson();j(Ft,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case rh.TIMEOUT:j(Ft,`RPC '${e}' ${s} timed out`),a(new U(M.DEADLINE_EXCEEDED,"Request time out"));break;case rh.HTTP_ERROR:const h=l.getStatus();if(j(Ft,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const v=p==null?void 0:p.error;if(v&&v.status&&v.message){const E=function(I){const w=I.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(w)>=0?w:M.UNKNOWN}(v.status);a(new U(E,v.message))}else a(new U(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new U(M.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{j(Ft,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);j(Ft,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=Qm(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=MP(),a=VP(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");j(Ft,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);let p=!1,v=!1;const E=new UU({Io:I=>{v?j(Ft,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(p||(j(Ft,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),j(Ft,`RPC '${e}' stream ${i} sending:`,I),h.send(I))},To:()=>h.close()}),_=(I,w,y)=>{I.listen(w,b=>{try{y(b)}catch(D){setTimeout(()=>{throw D},0)}})};return _(h,Gl.EventType.OPEN,()=>{v||(j(Ft,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),_(h,Gl.EventType.CLOSE,()=>{v||(v=!0,j(Ft,`RPC '${e}' stream ${i} transport closed`),E.So())}),_(h,Gl.EventType.ERROR,I=>{v||(v=!0,br(Ft,`RPC '${e}' stream ${i} transport errored:`,I),E.So(new U(M.UNAVAILABLE,"The operation could not be completed")))}),_(h,Gl.EventType.MESSAGE,I=>{var w;if(!v){const y=I.data[0];X(!!y);const b=y,D=b.error||((w=b[0])===null||w===void 0?void 0:w.error);if(D){j(Ft,`RPC '${e}' stream ${i} received error:`,D);const V=D.status;let $=function(A){const k=lt[A];if(k!==void 0)return SC(k)}(V),R=D.message;$===void 0&&($=M.INTERNAL,R="Unknown error status: "+V+" with message "+D.message),v=!0,E.So(new U($,R)),h.close()}else j(Ft,`RPC '${e}' stream ${i} received:`,y),E.bo(y)}}),_(a,LP.STAT_EVENT,I=>{I.stat===Av.PROXY?j(Ft,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===Av.NOPROXY&&j(Ft,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(){return typeof window<"u"?window:null}function uh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t){return new G6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Tw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(rt(n.toString()),rt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new U(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BU extends lk{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Y6(this.serializer,e),r=function(s){if(!("targetChange"in s))return Z.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?ot(o.readTime):Z.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Fv(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Zh(l)?{documents:LC(s,l)}:{query:VC(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=CC(s,o.resumeToken);const u=Vv(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Z.min())>0){a.readTime=Pa(s,o.snapshotVersion.toTimestamp());const u=Vv(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=J6(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Fv(this.serializer),n.removeTarget=e,this.a_(n)}}class zU extends lk{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return X(!!e.streamToken),this.lastStreamToken=e.streamToken,X(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){X(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=X6(e.writeResults,e.commitTime),r=ot(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Fv(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>tu(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new U(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Mv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new U(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Mv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class WU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(rt(n),this.D_=!1):j("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{ls(this)&&(j("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=G(l);u.L_.add(4),await tl(u),u.q_.set("Unknown"),u.L_.delete(4),await Du(u)}(this))})}),this.q_=new WU(r,i)}}async function Du(t){if(ls(t))for(const e of t.B_)await e(!0)}async function tl(t){for(const e of t.B_)await e(!1)}function rp(t,e){const n=G(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Sw(n)?bw(n):rl(n).r_()&&Iw(n,e))}function xa(t,e){const n=G(t),r=rl(n);n.N_.delete(e),r.r_()&&ck(n,e),n.N_.size===0&&(r.r_()?r.o_():ls(n)&&n.q_.set("Unknown"))}function Iw(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}rl(t).A_(e)}function ck(t,e){t.Q_.xe(e),rl(t).R_(e)}function bw(t){t.Q_=new z6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),rl(t).start(),t.q_.v_()}function Sw(t){return ls(t)&&!rl(t).n_()&&t.N_.size>0}function ls(t){return G(t).L_.size===0}function uk(t){t.Q_=void 0}async function GU(t){t.q_.set("Online")}async function HU(t){t.N_.forEach((e,n)=>{Iw(t,e)})}async function QU(t,e){uk(t),Sw(t)?(t.q_.M_(e),bw(t)):t.q_.set("Unknown")}async function YU(t,e,n){if(t.q_.set("Online"),e instanceof PC&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await cf(t,r)}else if(e instanceof ch?t.Q_.Ke(e):e instanceof AC?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Z.min()))try{const r=await tk(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(Xe.EMPTY_BYTE_STRING,d.snapshotVersion)),ck(s,l);const h=new jr(d.target,l,u,d.sequenceNumber);Iw(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){j("RemoteStore","Failed to raise snapshot:",r),await cf(t,r)}}async function cf(t,e,n){if(!os(e))throw e;t.L_.add(1),await tl(t),t.q_.set("Offline"),n||(n=()=>tk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{j("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Du(t)})}function dk(t,e){return e().catch(n=>cf(t,n,e))}async function nl(t){const e=G(t),n=Qi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;XU(e);)try{const i=await LU(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,JU(e,i)}catch(i){await cf(e,i)}hk(e)&&fk(e)}function XU(t){return ls(t)&&t.O_.length<10}function JU(t,e){t.O_.push(e);const n=Qi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function hk(t){return ls(t)&&!Qi(t).n_()&&t.O_.length>0}function fk(t){Qi(t).start()}async function ZU(t){Qi(t).p_()}async function e9(t){const e=Qi(t);for(const n of t.O_)e.m_(n.mutations)}async function t9(t,e,n){const r=t.O_.shift(),i=uw.from(r,e,n);await dk(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await nl(t)}async function n9(t,e){e&&Qi(t).V_&&await async function(r,i){if(function(o){return bC(o)&&o!==M.ABORTED}(i.code)){const s=r.O_.shift();Qi(r).s_(),await dk(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await nl(r)}}(t,e),hk(t)&&fk(t)}async function _b(t,e){const n=G(t);n.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");const r=ls(n);n.L_.add(3),await tl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Du(n)}async function qv(t,e){const n=G(t);e?(n.L_.delete(2),await Du(n)):e||(n.L_.add(2),await tl(n),n.q_.set("Unknown"))}function rl(t){return t.K_||(t.K_=function(n,r,i){const s=G(n);return s.w_(),new BU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:GU.bind(null,t),Ro:HU.bind(null,t),mo:QU.bind(null,t),d_:YU.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Sw(t)?bw(t):t.q_.set("Unknown")):(await t.K_.stop(),uk(t))})),t.K_}function Qi(t){return t.U_||(t.U_=function(n,r,i){const s=G(n);return s.w_(),new zU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ZU.bind(null,t),mo:n9.bind(null,t),f_:e9.bind(null,t),g_:t9.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await nl(t)):(await t.U_.stop(),t.O_.length>0&&(j("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ct,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Rw(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function il(t,e){if(rt("AsyncQueue",`${e}: ${t}`),os(t))return new U(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=Hl(),this.sortedSet=new Pe(this.comparator)}static emptySet(e){return new ca(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ca)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ca;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(){this.W_=new Pe(K.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):H():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Da{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Da(e,n,ca.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ru(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class i9{constructor(){this.queries=Eb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=G(n),s=i.queries;i.queries=Eb(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new U(M.ABORTED,"Firestore shutting down"))}}function Eb(){return new as(t=>uC(t),Ru)}async function Aw(t,e){const n=G(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new r9,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=il(o,`Initialization of query '${Oo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Cw(n)}async function Pw(t,e){const n=G(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function s9(t,e){const n=G(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Cw(n)}function o9(t,e,n){const r=G(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Cw(t){t.Y_.forEach(e=>{e.next()})}var Wv,Tb;(Tb=Wv||(Wv={})).ea="default",Tb.Cache="cache";class kw{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Da(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Da.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Wv.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e){this.serializer=e}Es(e){return wr(this.serializer,e)}ds(e){return e.metadata.exists?OC(this.serializer,e.document,!1):De.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return ot(e)}}class l9{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=pk(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=ce.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new Ib(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||re()).add(s);n.set(o,a)}}return n}async complete(){const e=await VU(this.localStore,new Ib(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await MU(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function pk(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e){this.key=e}}class gk{constructor(e){this.key=e}}class vk{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=re(),this.mutatedKeys=re(),this.Aa=hC(e),this.Ra=new ca(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new wb,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const p=i.get(d),v=Au(this.query,h)?h:null,E=!!p&&this.mutatedKeys.has(p.key),_=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let I=!1;p&&v?p.data.isEqual(v.data)?E!==_&&(r.track({type:3,doc:v}),I=!0):this.ga(p,v)||(r.track({type:2,doc:v}),I=!0,(l&&this.Aa(v,l)>0||u&&this.Aa(v,u)<0)&&(a=!0)):!p&&v?(r.track({type:0,doc:v}),I=!0):p&&!v&&(r.track({type:1,doc:p}),I=!0,(l||u)&&(a=!0)),I&&(v?(o=o.add(v),s=_?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(v,E){const _=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return _(v)-_(E)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new Da(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new wb,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=re(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new gk(r))}),this.da.forEach(r=>{e.has(r)||n.push(new mk(r))}),n}ba(e){this.Ta=e.Ts,this.da=re();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Da.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class c9{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class u9{constructor(e){this.key=e,this.va=!1}}class d9{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new as(a=>uC(a),Ru),this.Ma=new Map,this.xa=new Set,this.Oa=new Pe(K.comparator),this.Na=new Map,this.La=new vw,this.Ba={},this.ka=new Map,this.qa=to.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function h9(t,e,n=!0){const r=ip(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await yk(r,e,n,!0),i}async function f9(t,e){const n=ip(t);await yk(n,e,!0,!1)}async function yk(t,e,n,r){const i=await Ca(t.localStore,Zt(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await xw(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&rp(t.remoteStore,i),a}async function xw(t,e,n,r,i){t.Ka=(h,p,v)=>async function(_,I,w,y){let b=I.view.ma(w);b.ns&&(b=await of(_.localStore,I.query,!1).then(({documents:R})=>I.view.ma(R,b)));const D=y&&y.targetChanges.get(I.targetId),V=y&&y.targetMismatches.get(I.targetId)!=null,$=I.view.applyChanges(b,_.isPrimaryClient,D,V);return Kv(_,I.targetId,$.wa),$.snapshot}(t,h,p,v);const s=await of(t.localStore,e,!0),o=new vk(e,s.Ts),a=o.ma(s.documents),l=ku.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);Kv(t,n,u.wa);const d=new c9(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function p9(t,e,n){const r=G(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Ru(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ka(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&xa(r.remoteStore,i.targetId),Na(r,i.targetId)}).catch(ss)):(Na(r,i.targetId),await ka(r.localStore,i.targetId,!0))}async function m9(t,e){const n=G(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xa(n.remoteStore,r.targetId))}async function g9(t,e,n){const r=Lw(t);try{const i=await function(o,a){const l=G(o),u=ye.now(),d=a.reduce((v,E)=>v.add(E.key),re());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let E=pn(),_=re();return l.cs.getEntries(v,d).next(I=>{E=I,E.forEach((w,y)=>{y.isValidDocument()||(_=_.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,E)).next(I=>{h=I;const w=[];for(const y of a){const b=U6(y,h.get(y.key).overlayedDocument);b!=null&&w.push(new si(y.key,b,tC(b.value.mapValue),$e.exists(!0)))}return l.mutationQueue.addMutationBatch(v,u,w,a)}).next(I=>{p=I;const w=I.applyToLocalDocumentSet(h,_);return l.documentOverlayCache.saveOverlays(v,I.batchId,w)})}).then(()=>({batchId:p.batchId,changes:pC(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Pe(ne)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await oi(r,i.changes),await nl(r.remoteStore)}catch(i){const s=il(i,"Failed to persist write");n.reject(s)}}async function _k(t,e){const n=G(t);try{const r=await OU(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(X(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?X(o.va):i.removedDocuments.size>0&&(X(o.va),o.va=!1))}),await oi(n,r,e)}catch(r){await ss(r)}}function bb(t,e,n){const r=G(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=G(o);l.onlineState=a;let u=!1;l.queries.forEach((d,h)=>{for(const p of h.j_)p.Z_(a)&&(u=!0)}),u&&Cw(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function v9(t,e,n){const r=G(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Pe(K.comparator);o=o.insert(s,De.newNoDocument(s,Z.min()));const a=re().add(s),l=new Cu(Z.min(),new Map,new Pe(ne),o,a);await _k(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Ow(r)}else await ka(r.localStore,e,!1).then(()=>Na(r,e,n)).catch(ss)}async function y9(t,e){const n=G(t),r=e.batch.batchId;try{const i=await NU(n.localStore,e);Nw(n,r,null),Dw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await oi(n,i)}catch(i){await ss(i)}}async function _9(t,e,n){const r=G(t);try{const i=await function(o,a){const l=G(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(X(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);Nw(r,e,n),Dw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await oi(r,i)}catch(i){await ss(i)}}async function w9(t,e){const n=G(t);ls(n.remoteStore)||j("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=G(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const i=n.ka.get(r)||[];i.push(e),n.ka.set(r,i)}catch(r){const i=il(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function Dw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Nw(t,e,n){const r=G(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Na(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||wk(t,r)})}function wk(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(xa(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ow(t))}function Kv(t,e,n){for(const r of n)r instanceof mk?(t.La.addReference(r.key,e),E9(t,r)):r instanceof gk?(j("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||wk(t,r.key)):H()}function E9(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(j("SyncEngine","New document in limbo: "+n),t.xa.add(r),Ow(t))}function Ow(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new K(ce.fromString(e)),r=t.qa.next();t.Na.set(r,new u9(n)),t.Oa=t.Oa.insert(n,r),rp(t.remoteStore,new jr(Zt(Ja(n.path)),r,"TargetPurposeLimboResolution",hn.oe))}}async function oi(t,e,n){const r=G(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=ww.Wi(l.targetId,u);s.push(h)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const d=G(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>L.forEach(u,p=>L.forEach(p.$i,v=>d.persistence.referenceDelegate.addReference(h,p.targetId,v)).next(()=>L.forEach(p.Ui,v=>d.persistence.referenceDelegate.removeReference(h,p.targetId,v)))))}catch(h){if(!os(h))throw h;j("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const p=h.targetId;if(!h.fromCache){const v=d.os.get(p),E=v.snapshotVersion,_=v.withLastLimboFreeSnapshotVersion(E);d.os=d.os.insert(p,_)}}}(r.localStore,s))}async function T9(t,e){const n=G(t);if(!n.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());const r=await ek(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new U(M.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await oi(n,r.hs)}}function I9(t,e){const n=G(t),r=n.Na.get(e);if(r&&r.va)return re().add(r.key);{let i=re();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}async function b9(t,e){const n=G(t),r=await of(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&Kv(n,e.targetId,i.wa),i}async function S9(t,e){const n=G(t);return ik(n.localStore,e).then(r=>oi(n,r))}async function R9(t,e,n,r){const i=G(t),s=await function(a,l){const u=G(a),d=G(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,l).next(p=>p?u.localDocuments.getDocuments(h,p):L.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await nl(i.remoteStore):n==="acknowledged"||n==="rejected"?(Nw(i,e,r||null),Dw(i,e),function(a,l){G(G(a).mutationQueue).On(l)}(i.localStore,e)):H(),await oi(i,s)):j("SyncEngine","Cannot apply mutation batch with id: "+e)}async function A9(t,e){const n=G(t);if(ip(n),Lw(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await Sb(n,r.toArray());n.Qa=!0,await qv(n.remoteStore,!0);for(const s of i)rp(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let i=Promise.resolve();n.Ma.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Na(n,o),ka(n.localStore,o,!0))),xa(n.remoteStore,o)}),await i,await Sb(n,r),function(o){const a=G(o);a.Na.forEach((l,u)=>{xa(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new Pe(K.comparator)}(n),n.Qa=!1,await qv(n.remoteStore,!1)}}async function Sb(t,e,n){const r=G(t),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&l.length!==0){a=await Ca(r.localStore,Zt(l[0]));for(const u of l){const d=r.Fa.get(u),h=await b9(r,d);h.snapshot&&s.push(h.snapshot)}}else{const u=await rk(r.localStore,o);a=await Ca(r.localStore,u),await xw(r,Ek(u),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i}function Ek(t){return cC(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function P9(t){return function(n){return G(G(n).persistence).Qi()}(G(t).localStore)}async function C9(t,e,n,r){const i=G(t);if(i.Qa)return void j("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await ik(i.localStore,dC(s[0])),a=Cu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Xe.EMPTY_BYTE_STRING);await oi(i,o,a);break}case"rejected":await ka(i.localStore,e,!0),Na(i,e,r);break;default:H()}}async function k9(t,e,n){const r=ip(t);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){j("SyncEngine","Adding an already active target "+i);continue}const s=await rk(r.localStore,i),o=await Ca(r.localStore,s);await xw(r,Ek(s),o.targetId,!1,o.resumeToken),rp(r.remoteStore,o)}for(const i of n)r.Ma.has(i)&&await ka(r.localStore,i,!1).then(()=>{xa(r.remoteStore,i),Na(r,i)}).catch(ss)}}function ip(t){const e=G(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_k.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=v9.bind(null,e),e.Ca.d_=s9.bind(null,e.eventManager),e.Ca.$a=o9.bind(null,e.eventManager),e}function Lw(t){const e=G(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=y9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_9.bind(null,e),e}function x9(t,e,n){const r=G(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(v,E){const _=G(v),I=ot(E.createTime);return _.persistence.runTransaction("hasNewerBundle","readonly",w=>_.Gr.getBundleMetadata(w,E.id)).then(w=>!!w&&w.createTime.compareTo(I)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(pk(l));const u=new l9(l,s.localStore,o.serializer);let d=await o.Ua();for(;d;){const p=await u.la(d);p&&a._updateProgress(p),d=await o.Ua()}const h=await u.complete();return await oi(s,h.Ia,void 0),await function(v,E){const _=G(v);return _.persistence.runTransaction("Save bundle","readwrite",I=>_.Gr.saveBundleMetadata(I,E))}(s.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(l){return br("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class nu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return ZC(this.persistence,new JC,e.initialUser,this.serializer)}Ga(e){return new XC(np.Zr,this.serializer)}Wa(e){return new ok}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nu.provider={build:()=>new nu};class Tk extends nu{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await Lw(this.Ja.syncEngine),await nl(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return ZC(this.persistence,new JC,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new mU(r,e.asyncQueue,n)}Ha(e,n){const r=new Y$(n,this.persistence);return new Q$(e.asyncQueue,r)}Ga(e){const n=_w(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new yw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,ak(),uh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new ok}}class D9 extends Tk{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Hm&&(this.sharedClientState.syncEngine={no:R9.bind(null,n),ro:C9.bind(null,n),io:k9.bind(null,n),Qi:P9.bind(null,n),eo:S9.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await A9(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=ak();if(!Hm.D(n))throw new U(M.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=_w(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Hm(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class ru{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=T9.bind(null,this.syncEngine),await qv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new i9}()}createDatastore(e){const n=xu(e.databaseInfo.databaseId),r=function(s){return new jU(s)}(e.databaseInfo);return function(s,o,a,l){return new qU(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new KU(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>bb(this.syncEngine,n,0),function(){return yb.D()?new yb:new FU}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,d){const h=new d9(i,s,o,a,l,u);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=G(i);j("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await tl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ru.provider={build:()=>new ru};function Rb(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):rt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new Ct,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const i=await this.iu(r);return new a9(JSON.parse(i),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new U(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=G(i),a={documents:s.map(h=>eu(o.serializer,h))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,ce.emptyPath(),a,s.length),u=new Map;l.forEach(h=>{const p=Q6(o.serializer,h);u.set(p.key.toString(),p)});const d=[];return s.forEach(h=>{const p=u.get(h.toString());X(!!p),d.push(p)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new el(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=K.fromPath(r);this.mutations.push(new lw(i,this.precondition(i)))}),await async function(r,i){const s=G(r),o={writes:i.map(a=>tu(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,ce.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw H();n=Z.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new U(M.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Z.min())?$e.exists(!1):$e.updateTime(n):$e.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Z.min()))throw new U(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $e.updateTime(n)}return $e.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new Tw(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new O9(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!bu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!bC(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=_t.UNAUTHENTICATED,this.clientId=$P.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{j("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(j("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ct;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=il(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ym(t,e){t.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await ek(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ab(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Vw(t);j("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>_b(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>_b(e.remoteStore,i)),t._onlineComponents=e}async function Vw(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ym(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;br("Error using user provided cache. Falling back to memory cache: "+n),await Ym(t,new nu)}}else j("FirestoreClient","Using default OfflineComponentProvider"),await Ym(t,new nu);return t._offlineComponents}async function op(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),await Ab(t,t._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),await Ab(t,new ru))),t._onlineComponents}function Ik(t){return Vw(t).then(e=>e.persistence)}function Mw(t){return Vw(t).then(e=>e.localStore)}function bk(t){return op(t).then(e=>e.remoteStore)}function Fw(t){return op(t).then(e=>e.syncEngine)}function M9(t){return op(t).then(e=>e.datastore)}async function Oa(t){const e=await op(t),n=e.eventManager;return n.onListen=h9.bind(null,e.syncEngine),n.onUnlisten=p9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=f9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=m9.bind(null,e.syncEngine),n}function F9(t){return t.asyncQueue.enqueue(async()=>{const e=await Ik(t),n=await bk(t);return e.setNetworkEnabled(!0),function(i){const s=G(i);return s.L_.delete(0),Du(s)}(n)})}function $9(t){return t.asyncQueue.enqueue(async()=>{const e=await Ik(t),n=await bk(t);return e.setNetworkEnabled(!1),async function(i){const s=G(i);s.L_.add(0),await tl(s),s.q_.set("Offline")}(n)})}function U9(t,e){const n=new Ct;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(u,d){const h=G(u);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new U(M.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=il(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await Mw(t),e,n)),n.promise}function Sk(t,e,n={}){const r=new Ct;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new sp({next:p=>{d.Za(),o.enqueueAndForget(()=>Pw(s,h));const v=p.docs.has(a);!v&&p.fromCache?u.reject(new U(M.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&p.fromCache&&l&&l.source==="server"?u.reject(new U(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new kw(Ja(a.path),d,{includeMetadataChanges:!0,_a:!0});return Aw(s,h)}(await Oa(t),t.asyncQueue,e,n,r)),r.promise}function j9(t,e){const n=new Ct;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await of(i,s,!0),l=new vk(s,a.Ts),u=l.ma(a.documents),d=l.applyChanges(u,!1);o.resolve(d.snapshot)}catch(a){const l=il(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await Mw(t),e,n)),n.promise}function Rk(t,e,n={}){const r=new Ct;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new sp({next:p=>{d.Za(),o.enqueueAndForget(()=>Pw(s,h)),p.fromCache&&l.source==="server"?u.reject(new U(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new kw(a,d,{includeMetadataChanges:!0,_a:!0});return Aw(s,h)}(await Oa(t),t.asyncQueue,e,n,r)),r.promise}function B9(t,e){const n=new sp(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){G(i).Y_.add(s),s.next()}(await Oa(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){G(i).Y_.delete(s)}(await Oa(t),n))}}function z9(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?RC().encode(o):o,function(d,h){return new N9(d,h)}(function(d,h){if(d instanceof Uint8Array)return Rb(d,h);if(d instanceof ArrayBuffer)return Rb(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,xu(e));t.asyncQueue.enqueueAndForget(async()=>{x9(await Fw(t),i,r)})}function q9(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=G(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(await Mw(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(t,e,n){if(!n)throw new U(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Pk(t,e,n,r){if(e===!0&&r===!0)throw new U(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Cb(t){if(!K.isDocumentKey(t))throw new U(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kb(t){if(K.isDocumentKey(t))throw new U(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ap(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":H()}function ge(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new U(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ap(t);throw new U(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ck(t,e){if(e<=0)throw new U(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new U(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new U(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Pk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ak((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xb({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new U(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new U(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xb(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new F$;switch(r.type){case"firstParty":return new B$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Pb.get(n);r&&(j("ComponentProvider","Removing Datastore"),Pb.delete(n),r.terminate())}(this),Promise.resolve()}}function W9(t,e,n,r={}){var i;const s=(t=ge(t,Nu))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&br("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=_t.MOCK_USER;else{a=mA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new U(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new _t(u)}t._authCredentials=new $$(new FP(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tn=class kk{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new kk(this.firestore,e,this._query)}},Be=class xk{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xk(this.firestore,e,this._key)}},Mi=class Dk extends tn{constructor(e,n,r){super(e,n,Ja(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Be(this.firestore,null,new K(e))}withConverter(e){return new Dk(this.firestore,e,this._path)}};function Tn(t,e,...n){if(t=Y(t),$w("collection","path",e),t instanceof Nu){const r=ce.fromString(e,...n);return kb(r),new Mi(t,null,r)}{if(!(t instanceof Be||t instanceof Mi))throw new U(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ce.fromString(e,...n));return kb(r),new Mi(t.firestore,null,r)}}function K9(t,e){if(t=ge(t,Nu),$w("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new U(M.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new tn(t,null,function(r){return new ii(ce.emptyPath(),r)}(e))}function Se(t,e,...n){if(t=Y(t),arguments.length===1&&(e=$P.newId()),$w("doc","path",e),t instanceof Nu){const r=ce.fromString(e,...n);return Cb(r),new Be(t,null,new K(r))}{if(!(t instanceof Be||t instanceof Mi))throw new U(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ce.fromString(e,...n));return Cb(r),new Be(t.firestore,t instanceof Mi?t.converter:null,new K(r))}}function Nk(t,e){return t=Y(t),e=Y(e),(t instanceof Be||t instanceof Mi)&&(e instanceof Be||e instanceof Mi)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Ok(t,e){return t=Y(t),e=Y(e),t instanceof tn&&e instanceof tn&&t.firestore===e.firestore&&Ru(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Tw(this,"async_queue_retry"),this.Vu=()=>{const r=uh();r&&j("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=uh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=uh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ct;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!os(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw rt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Rw.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&H()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Gv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class G9{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ct,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9=-1;let Je=class extends Nu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Db,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Db(e),this._firestoreClient=void 0,await e}}};function Dt(t){if(t._terminated)throw new U(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Lk(t),t._firestoreClient}function Lk(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,d){return new y6(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Ak(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new V9(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function Q9(t,e){br("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return Vk(t,ru.provider,{build:r=>new Tk(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function Y9(t){br("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();Vk(t,ru.provider,{build:n=>new D9(n,e.cacheSizeBytes)})}function Vk(t,e,n){if((t=ge(t,Je))._firestoreClient||t._terminated)throw new U(M.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new U(M.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},Lk(t)}function X9(t){if(t._initialized&&!t._terminated)throw new U(M.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ct;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!_r.D())return Promise.resolve();const i=r+"main";await _r.delete(i)}(_w(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function J9(t){return function(n){const r=new Ct;return n.asyncQueue.enqueueAndForget(async()=>w9(await Fw(n),r)),r.promise}(Dt(t=ge(t,Je)))}function Z9(t){return F9(Dt(t=ge(t,Je)))}function e8(t){return $9(Dt(t=ge(t,Je)))}function t8(t,e){const n=Dt(t=ge(t,Je)),r=new G9;return z9(n,t._databaseId,e,r),r}function n8(t,e){return q9(Dt(t=ge(t,Je)),e).then(n=>n?new tn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rr(Xe.fromBase64String(e))}catch(n){throw new U(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rr(Xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new U(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new U(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new U(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8=/^__.*__$/;class i8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new si(e,this.data,this.fieldMask,n,this.fieldTransforms):new Za(e,this.data,n,this.fieldTransforms)}}class Mk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new si(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Fk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}class cp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new cp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return uf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Fk(this.Cu)&&r8.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class s8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||xu(e)}Qu(e,n,r,i=!1){return new cp({Cu:e,methodName:n,qu:r,path:Fe.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function po(t){const e=t._freezeSettings(),n=xu(t._databaseId);return new s8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function up(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Gw("Data must be an object, but it was:",o,r);const a=jk(r,o);let l,u;if(s.merge)l=new fn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const p=Hv(e,h,n);if(!o.contains(p))throw new U(M.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);zk(d,p)||d.push(p)}l=new fn(d),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new i8(new Rt(a),l,u)}class Ou extends fo{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ou}}function $k(t,e,n){return new cp({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class jw extends fo{_toFieldTransform(e){return new Pu(e.path,new Ra)}isEqual(e){return e instanceof jw}}class Bw extends fo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=$k(this,e,!0),r=this.Ku.map(s=>mo(s,n)),i=new Xs(r);return new Pu(e.path,i)}isEqual(e){return e instanceof Bw&&$c(this.Ku,e.Ku)}}class zw extends fo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=$k(this,e,!0),r=this.Ku.map(s=>mo(s,n)),i=new Js(r);return new Pu(e.path,i)}isEqual(e){return e instanceof zw&&$c(this.Ku,e.Ku)}}class qw extends fo{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Aa(e.serializer,vC(e.serializer,this.$u));return new Pu(e.path,n)}isEqual(e){return e instanceof qw&&this.$u===e.$u}}function Ww(t,e,n,r){const i=t.Qu(1,e,n);Gw("Data must be an object, but it was:",i,r);const s=[],o=Rt.empty();ho(r,(l,u)=>{const d=Hw(e,l,n);u=Y(u);const h=i.Nu(d);if(u instanceof Ou)s.push(d);else{const p=mo(u,h);p!=null&&(s.push(d),o.set(d,p))}});const a=new fn(s);return new Mk(o,a,i.fieldTransforms)}function Kw(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Hv(e,r,n)],l=[i];if(s.length%2!=0)throw new U(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Hv(e,s[p])),l.push(s[p+1]);const u=[],d=Rt.empty();for(let p=a.length-1;p>=0;--p)if(!zk(u,a[p])){const v=a[p];let E=l[p];E=Y(E);const _=o.Nu(v);if(E instanceof Ou)u.push(v);else{const I=mo(E,_);I!=null&&(u.push(v),d.set(v,I))}}const h=new fn(u);return new Mk(d,h,o.fieldTransforms)}function Uk(t,e,n,r=!1){return mo(n,t.Qu(r?4:3,e))}function mo(t,e){if(Bk(t=Y(t)))return Gw("Unsupported field value:",e,t),jk(t,e);if(t instanceof fo)return function(r,i){if(!Fk(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=mo(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Y(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return vC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ye.fromDate(r);return{timestampValue:Pa(i.serializer,s)}}if(r instanceof ye){const s=new ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Pa(i.serializer,s)}}if(r instanceof lp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rr)return{bytesValue:CC(i.serializer,r._byteString)};if(r instanceof Be){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:fw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Uw)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return aw(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ap(r)}`)}(t,e)}function jk(t,e){const n={};return XP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ho(t,(r,i)=>{const s=mo(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Bk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ye||t instanceof lp||t instanceof Rr||t instanceof Be||t instanceof fo||t instanceof Uw)}function Gw(t,e,n){if(!Bk(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=ap(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Hv(t,e,n){if((e=Y(e))instanceof Yi)return e._internalPath;if(typeof e=="string")return Hw(t,e);throw uf("Field path arguments must be of type string or ",t,!1,void 0,n)}const o8=new RegExp("[~\\*/\\[\\]]");function Hw(t,e,n){if(e.search(o8)>=0)throw uf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Yi(...e.split("."))._internalPath}catch{throw uf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new U(M.INVALID_ARGUMENT,a+t+l)}function zk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new a8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class a8 extends iu{data(){return super.data()}}function dp(t,e){return typeof e=="string"?Hw(t,e):e instanceof Yi?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new U(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qw{}class Lu extends Qw{}function En(t,e,...n){let r=[];e instanceof Qw&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Yw).length,a=s.filter(l=>l instanceof hp).length;if(o>1||o>0&&a>0)throw new U(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class hp extends Lu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new hp(e,n,r)}_apply(e){const n=this._parse(e);return Kk(e._query,n),new tn(e.firestore,e.converter,Lv(e._query,n))}_parse(e){const n=po(e.firestore);return function(s,o,a,l,u,d,h){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new U(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Ob(h,d);const v=[];for(const E of h)v.push(Nb(l,s,E));p={arrayValue:{values:v}}}else p=Nb(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Ob(h,d),p=Uk(a,o,h,d==="in"||d==="not-in");return ue.create(u,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Xl(t,e,n){const r=e,i=dp("where",t);return hp._create(i,r,n)}class Yw extends Qw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Yw(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ee.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)Kk(o,l),o=Lv(o,l)}(e._query,n),new tn(e.firestore,e.converter,Lv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xw extends Lu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Xw(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new U(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new U(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zc(s,o)}(e._query,this._field,this._direction);return new tn(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ii(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function df(t,e="asc"){const n=e,r=dp("orderBy",t);return Xw._create(r,n)}class fp extends Lu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new fp(e,n,r)}_apply(e){return new tn(e.firestore,e.converter,tf(e._query,this._limit,this._limitType))}}function Qv(t){return Ck("limit",t),fp._create("limit",t,"F")}function l8(t){return Ck("limitToLast",t),fp._create("limitToLast",t,"L")}class pp extends Lu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new pp(e,n,r)}_apply(e){const n=Wk(e,this.type,this._docOrFields,this._inclusive);return new tn(e.firestore,e.converter,function(i,s){return new ii(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function c8(...t){return pp._create("startAt",t,!0)}function u8(...t){return pp._create("startAfter",t,!1)}class mp extends Lu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new mp(e,n,r)}_apply(e){const n=Wk(e,this.type,this._docOrFields,this._inclusive);return new tn(e.firestore,e.converter,function(i,s){return new ii(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function d8(...t){return mp._create("endBefore",t,!1)}function h8(...t){return mp._create("endAt",t,!0)}function Wk(t,e,n,r){if(n[0]=Y(n[0]),n[0]instanceof iu)return function(s,o,a,l,u){if(!l)throw new U(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of la(s))if(h.field.isKeyField())d.push(Qs(o,l.key));else{const p=l.data.field(h.field);if(Yf(p))throw new U(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const v=h.field.canonicalString();throw new U(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}d.push(p)}return new Hi(d,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=po(t.firestore);return function(o,a,l,u,d,h){const p=o.explicitOrderBy;if(d.length>p.length)throw new U(M.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let E=0;E<d.length;E++){const _=d[E];if(p[E].field.isKeyField()){if(typeof _!="string")throw new U(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof _}`);if(!sw(o)&&_.indexOf("/")!==-1)throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${_}' contains a slash.`);const I=o.path.child(ce.fromString(_));if(!K.isDocumentKey(I))throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${I}' is not because it contains an odd number of segments.`);const w=new K(I);v.push(Qs(a,w))}else{const I=Uk(l,u,_);v.push(I)}}return new Hi(v,h)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Nb(t,e,n){if(typeof(n=Y(n))=="string"){if(n==="")throw new U(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sw(e)&&n.indexOf("/")!==-1)throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ce.fromString(n));if(!K.isDocumentKey(r))throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qs(t,new K(r))}if(n instanceof Be)return Qs(t,n._key);throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ap(n)}.`)}function Ob(t,e){if(!Array.isArray(t)||t.length===0)throw new U(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Kk(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new U(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new U(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Jw{convertValue(e,n="none"){switch(Hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw H()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ho(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ve(o.doubleValue));return new Uw(s)}convertGeoPoint(e){return new lp(Ve(e.latitude),Ve(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=rw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yc(e));default:return null}}convertTimestamp(e){const n=Jr(e);return new ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ce.fromString(e);X(UC(r));const i=new Ki(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(n)||rt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class f8 extends Jw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Be(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Zr=class extends iu{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(dp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},vc=class extends Zr{data(e={}){return super.data(e)}},Xi=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ks(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new vc(this._firestore,this._userDataWriter,r.key,r,new ks(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new U(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new vc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ks(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new vc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ks(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:p8(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function p8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}function Gk(t,e){return t instanceof Zr&&e instanceof Zr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Xi&&e instanceof Xi&&t._firestore===e._firestore&&Ok(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(t){t=ge(t,Be);const e=ge(t.firestore,Je);return Sk(Dt(e),t._key).then(n=>Zw(e,t,n))}class go extends Jw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Be(this.firestore,null,n)}}function m8(t){t=ge(t,Be);const e=ge(t.firestore,Je),n=Dt(e),r=new go(e);return U9(n,t._key).then(i=>new Zr(e,r,t._key,i,new ks(i!==null&&i.hasLocalMutations,!0),t.converter))}function g8(t){t=ge(t,Be);const e=ge(t.firestore,Je);return Sk(Dt(e),t._key,{source:"server"}).then(n=>Zw(e,t,n))}function Jl(t){t=ge(t,tn);const e=ge(t.firestore,Je),n=Dt(e),r=new go(e);return qk(t._query),Rk(n,t._query).then(i=>new Xi(e,r,t,i))}function v8(t){t=ge(t,tn);const e=ge(t.firestore,Je),n=Dt(e),r=new go(e);return j9(n,t._query).then(i=>new Xi(e,r,t,i))}function y8(t){t=ge(t,tn);const e=ge(t.firestore,Je),n=Dt(e),r=new go(e);return Rk(n,t._query,{source:"server"}).then(i=>new Xi(e,r,t,i))}function Fi(t,e,n){t=ge(t,Be);const r=ge(t.firestore,Je),i=gp(t.converter,e,n);return sl(r,[up(po(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,$e.none())])}function Ji(t,e,n,...r){t=ge(t,Be);const i=ge(t.firestore,Je),s=po(i);let o;return o=typeof(e=Y(e))=="string"||e instanceof Yi?Kw(s,"updateDoc",t._key,e,n,r):Ww(s,"updateDoc",t._key,e),sl(i,[o.toMutation(t._key,$e.exists(!0))])}function Yv(t){return sl(ge(t.firestore,Je),[new el(t._key,$e.none())])}function hf(t,e){const n=ge(t.firestore,Je),r=Se(t),i=gp(t.converter,e);return sl(n,[up(po(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,$e.exists(!1))]).then(()=>r)}function Vu(t,...e){var n,r,i;t=Y(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Gv(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Gv(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,u,d;if(t instanceof Be)u=ge(t.firestore,Je),d=Ja(t._key.path),l={next:h=>{e[o]&&e[o](Zw(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=ge(t,tn);u=ge(h.firestore,Je),d=h._query;const p=new go(u);l={next:v=>{e[o]&&e[o](new Xi(u,p,h,v))},error:e[o+1],complete:e[o+2]},qk(t._query)}return function(p,v,E,_){const I=new sp(_),w=new kw(v,I,E);return p.asyncQueue.enqueueAndForget(async()=>Aw(await Oa(p),w)),()=>{I.Za(),p.asyncQueue.enqueueAndForget(async()=>Pw(await Oa(p),w))}}(Dt(u),d,a,l)}function _8(t,e){return B9(Dt(t=ge(t,Je)),Gv(e)?e:{next:e})}function sl(t,e){return function(r,i){const s=new Ct;return r.asyncQueue.enqueueAndForget(async()=>g9(await Fw(r),i,s)),s.promise}(Dt(t),e)}function Zw(t,e,n){const r=n.docs.get(e._key),i=new go(t);return new Zr(t,i,e._key,r,new ks(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hk=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=po(e)}set(e,n,r){this._verifyNotCommitted();const i=Ti(e,this._firestore),s=gp(i.converter,n,r),o=up(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,$e.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Ti(e,this._firestore);let o;return o=typeof(n=Y(n))=="string"||n instanceof Yi?Kw(this._dataReader,"WriteBatch.update",s._key,n,r,i):Ww(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,$e.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ti(e,this._firestore);return this._mutations=this._mutations.concat(new el(n._key,$e.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new U(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ti(t,e){if((t=Y(t)).firestore!==e)throw new U(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let E8=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=po(n)}get(n){const r=Ti(n,this._firestore),i=new f8(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return H();const o=s[0];if(o.isFoundDocument())return new iu(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new iu(this._firestore,i,r._key,null,r.converter);throw H()})}set(n,r,i){const s=Ti(n,this._firestore),o=gp(s.converter,r,i),a=up(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=Ti(n,this._firestore);let a;return a=typeof(r=Y(r))=="string"||r instanceof Yi?Kw(this._dataReader,"Transaction.update",o._key,r,i,s):Ww(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Ti(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ti(e,this._firestore),r=new go(this._firestore);return super.get(e).then(i=>new Zr(this._firestore,r,n._key,i._document,new ks(!1,!1),n.converter))}};function T8(t,e,n){t=ge(t,Je);const r=Object.assign(Object.assign({},w8),n);return function(s){if(s.maxAttempts<1)throw new U(M.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Ct;return s.asyncQueue.enqueueAndForget(async()=>{const u=await M9(s);new L9(s.asyncQueue,u,a,o,l).au()}),l.promise}(Dt(t),i=>e(new E8(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I8(){return new Ou("deleteField")}function an(){return new jw("serverTimestamp")}function b8(...t){return new Bw("arrayUnion",t)}function S8(...t){return new zw("arrayRemove",t)}function Qk(t){return new qw("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(t){return Dt(t=ge(t,Je)),new Hk(t,e=>sl(t,e))}(function(e,n=!0){(function(i){Xa=i})(ti),zt(new dt("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Je(new U$(r.getProvider("auth-internal")),new q$(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new U(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ki(u.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Et(SI,"4.7.3",e),Et(SI,"4.7.3","esm2017")})();const R8="@firebase/firestore-compat",A8="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new U("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(){if(typeof Uint8Array>"u")throw new U("unimplemented","Uint8Arrays are not available in this environment.")}function Vb(){if(!g6())throw new U("unimplemented","Blobs are unavailable in Firestore in this environment.")}let Yk=class Xv{constructor(e){this._delegate=e}static fromBase64String(e){return Vb(),new Xv(Rr.fromBase64String(e))}static fromUint8Array(e){return Lb(),new Xv(Rr.fromUint8Array(e))}toBase64(){return Vb(),this._delegate.toBase64()}toUint8Array(){return Lb(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(t){return P8(t,["next","error","complete"])}function P8(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{enableIndexedDbPersistence(e,n){return Q9(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Y9(e._delegate)}clearIndexedDbPersistence(e){return X9(e._delegate)}}class Xk{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ki||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&br("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){W9(this._delegate,e,n,r)}enableNetwork(){return Z9(this._delegate)}disableNetwork(){return e8(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Pk("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return J9(this._delegate)}onSnapshotsInSync(e){return _8(this._delegate,e)}get app(){if(!this._appCompat)throw new U("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new La(this,Tn(this._delegate,e))}catch(n){throw Qt(n,"collection()","Firestore.collection()")}}doc(e){try{return new Vn(this,Se(this._delegate,e))}catch(n){throw Qt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ht(this,K9(this._delegate,e))}catch(n){throw Qt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return T8(this._delegate,n=>e(new Jk(this,n)))}batch(){return Dt(this._delegate),new Zk(new Hk(this._delegate,e=>sl(this._delegate,e)))}loadBundle(e){return t8(this._delegate,e)}namedQuery(e){return n8(this._delegate,e).then(n=>n?new Ht(this,n):null)}}class vp extends Jw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yk(new Rr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Vn.forKey(n,this.firestore,null)}}function k8(t){V$(t)}class Jk{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new vp(e)}get(e){const n=xs(e);return this._delegate.get(n).then(r=>new su(this._firestore,new Zr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=xs(e);return r?(e0("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=xs(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=xs(e);return this._delegate.delete(n),this}}class Zk{constructor(e){this._delegate=e}set(e,n,r){const i=xs(e);return r?(e0("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=xs(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=xs(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class no{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new vc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ou(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=no.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new no(e,new vp(e),n),i.set(n,s)),s}}no.INSTANCES=new WeakMap;class Vn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new vp(e)}static forPath(e,n,r){if(e.length%2!==0)throw new U("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Vn(n,new Be(n._delegate,r,new K(e)))}static forKey(e,n,r){return new Vn(n,new Be(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new La(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new La(this.firestore,Tn(this._delegate,e))}catch(n){throw Qt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Y(e),e instanceof Be?Nk(this._delegate,e):!1}set(e,n){n=e0("DocumentReference.set",n);try{return n?Fi(this._delegate,e,n):Fi(this._delegate,e)}catch(r){throw Qt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?Ji(this._delegate,e):Ji(this._delegate,e,n,...r)}catch(i){throw Qt(i,"updateDoc()","DocumentReference.update()")}}delete(){return Yv(this._delegate)}onSnapshot(...e){const n=ex(e),r=tx(e,i=>new su(this.firestore,new Zr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Vu(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=m8(this._delegate):(e==null?void 0:e.source)==="server"?n=g8(this._delegate):n=ua(this._delegate),n.then(r=>new su(this.firestore,new Zr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Vn(this.firestore,e?this._delegate.withConverter(no.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Qt(t,e,n){return t.message=t.message.replace(e,n),t}function ex(t){for(const e of t)if(typeof e=="object"&&!Jv(e))return e;return{}}function tx(t,e){var n,r;let i;return Jv(t[0])?i=t[0]:Jv(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class su{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Vn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Gk(this._delegate,e._delegate)}}class ou extends su{data(e){const n=this._delegate.data(e);return this._delegate._converter||M$(n!==void 0),n}}class Ht{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new vp(e)}where(e,n,r){try{return new Ht(this.firestore,En(this._delegate,Xl(e,n,r)))}catch(i){throw Qt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Ht(this.firestore,En(this._delegate,df(e,n)))}catch(r){throw Qt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ht(this.firestore,En(this._delegate,Qv(e)))}catch(n){throw Qt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Ht(this.firestore,En(this._delegate,l8(e)))}catch(n){throw Qt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ht(this.firestore,En(this._delegate,c8(...e)))}catch(n){throw Qt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ht(this.firestore,En(this._delegate,u8(...e)))}catch(n){throw Qt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ht(this.firestore,En(this._delegate,d8(...e)))}catch(n){throw Qt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ht(this.firestore,En(this._delegate,h8(...e)))}catch(n){throw Qt(n,"endAt()","Query.endAt()")}}isEqual(e){return Ok(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=v8(this._delegate):(e==null?void 0:e.source)==="server"?n=y8(this._delegate):n=Jl(this._delegate),n.then(r=>new Zv(this.firestore,new Xi(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=ex(e),r=tx(e,i=>new Zv(this.firestore,new Xi(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Vu(this._delegate,n,r)}withConverter(e){return new Ht(this.firestore,e?this._delegate.withConverter(no.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class x8{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ou(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Zv{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ht(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ou(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new x8(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new ou(this._firestore,r))})}isEqual(e){return Gk(this._delegate,e._delegate)}}class La extends Ht{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Vn(this.firestore,e):null}doc(e){try{return e===void 0?new Vn(this.firestore,Se(this._delegate)):new Vn(this.firestore,Se(this._delegate,e))}catch(n){throw Qt(n,"doc()","CollectionReference.doc()")}}add(e){return hf(this._delegate,e).then(n=>new Vn(this.firestore,n))}isEqual(e){return Nk(this._delegate,e._delegate)}withConverter(e){return new La(this.firestore,e?this._delegate.withConverter(no.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function xs(t){return ge(t,Be)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(...e){this._delegate=new Yi(...e)}static documentId(){return new t0(Fe.keyField().canonicalString())}isEqual(e){return e=Y(e),e instanceof Yi?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this._delegate=e}static serverTimestamp(){const e=an();return e._methodName="FieldValue.serverTimestamp",new bs(e)}static delete(){const e=I8();return e._methodName="FieldValue.delete",new bs(e)}static arrayUnion(...e){const n=b8(...e);return n._methodName="FieldValue.arrayUnion",new bs(n)}static arrayRemove(...e){const n=S8(...e);return n._methodName="FieldValue.arrayRemove",new bs(n)}static increment(e){const n=Qk(e);return n._methodName="FieldValue.increment",new bs(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D8={Firestore:Xk,GeoPoint:lp,Timestamp:ye,Blob:Yk,Transaction:Jk,WriteBatch:Zk,DocumentReference:Vn,DocumentSnapshot:su,Query:Ht,QueryDocumentSnapshot:ou,QuerySnapshot:Zv,CollectionReference:La,FieldPath:t0,FieldValue:bs,setLogLevel:k8,CACHE_SIZE_UNLIMITED:H9};function N8(t,e){t.INTERNAL.registerComponent(new dt("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},D8)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O8(t){N8(t,(e,n)=>new Xk(e,n,new C8)),t.registerVersion(R8,A8)}O8(sn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx="firebasestorage.googleapis.com",rx="storageBucket",L8=2*60*1e3,V8=10*60*1e3,M8=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We extends Pt{constructor(e,n,r=0){super(Jm(e),`Firebase Storage: ${n} (${Jm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,We.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Oe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Oe||(Oe={}));function Jm(t){return"storage/"+t}function n0(){const t="An unknown error occurred, please check the error payload for server response.";return new We(Oe.UNKNOWN,t)}function F8(t){return new We(Oe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function $8(t){return new We(Oe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function U8(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new We(Oe.UNAUTHENTICATED,t)}function j8(){return new We(Oe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function B8(t){return new We(Oe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function ix(){return new We(Oe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function sx(){return new We(Oe.CANCELED,"User canceled the upload/download.")}function z8(t){return new We(Oe.INVALID_URL,"Invalid URL '"+t+"'.")}function q8(t){return new We(Oe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function W8(){return new We(Oe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+rx+"' property when initializing the app?")}function ox(){return new We(Oe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function K8(){return new We(Oe.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function G8(){return new We(Oe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function H8(t){return new We(Oe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function da(t){return new We(Oe.INVALID_ARGUMENT,t)}function ax(){return new We(Oe.APP_DELETED,"The Firebase app was deleted.")}function lx(t){return new We(Oe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function yc(t,e){return new We(Oe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Vl(t){throw new We(Oe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=jt.makeFromUrl(e,n)}catch{return new jt(e,"")}if(r.path==="")return r;throw q8(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(D){D.path_=decodeURIComponent(D.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",v=new RegExp(`^https?://${h}/${d}/b/${i}/o${p}`,"i"),E={bucket:1,path:3},_=n===nx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",w=new RegExp(`^https?://${_}/${i}/${I}`,"i"),b=[{regex:a,indices:l,postModify:s},{regex:v,indices:E,postModify:u},{regex:w,indices:{bucket:1,path:2},postModify:u}];for(let D=0;D<b.length;D++){const V=b[D],$=V.regex.exec(e);if($){const R=$[V.indices.bucket];let T=$[V.indices.path];T||(T=""),r=new jt(R,T),V.postModify(r);break}}if(r==null)throw z8(e);return r}}class Q8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y8(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function d(...I){u||(u=!0,e.apply(null,I))}function h(I){i=setTimeout(()=>{i=null,t(v,l())},I)}function p(){s&&clearTimeout(s)}function v(I,...w){if(u){p();return}if(I){p(),d.call(null,I,...w);return}if(l()||o){p(),d.call(null,I,...w);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,h(b)}let E=!1;function _(I){E||(E=!0,p(),!u&&(i!==null?(I||(a=2),clearTimeout(i),h(0)):I||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,_(!0)},n),_}function X8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J8(t){return t!==void 0}function Z8(t){return typeof t=="function"}function ej(t){return typeof t=="object"&&!Array.isArray(t)}function yp(t){return typeof t=="string"||t instanceof String}function Mb(t){return r0()&&t instanceof Blob}function r0(){return typeof Blob<"u"}function ey(t,e,n,r){if(r<e)throw da(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw da(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function cx(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var $s;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})($s||($s={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,n,r,i,s,o,a,l,u,d,h,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,E)=>{this.resolve_=v,this.reject_=E,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ad(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===$s.NO_ERROR,l=s.getStatus();if(!a||ux(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===$s.ABORT;r(!1,new Ad(!1,null,d));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Ad(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());J8(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=n0();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?ax():sx();o(l)}else{const l=ix();o(l)}};this.canceled_?n(!1,new Ad(!1,null,!0)):this.backoffId_=Y8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&X8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ad{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function nj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function rj(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ij(t,e){e&&(t["X-Firebase-GMPID"]=e)}function sj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function oj(t,e,n,r,i,s,o=!0){const a=cx(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return ij(u,e),nj(u,n),rj(u,s),sj(u,r),new tj(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function lj(...t){const e=aj();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(r0())return new Blob(t);throw new We(Oe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function cj(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(t){if(typeof atob>"u")throw H8("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Zm{constructor(e,n){this.data=e,this.contentType=n||null}}function dx(t,e){switch(t){case Mn.RAW:return new Zm(hx(e));case Mn.BASE64:case Mn.BASE64URL:return new Zm(fx(t,e));case Mn.DATA_URL:return new Zm(hj(e),fj(e))}throw n0()}function hx(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function dj(t){let e;try{e=decodeURIComponent(t)}catch{throw yc(Mn.DATA_URL,"Malformed data URL.")}return hx(e)}function fx(t,e){switch(t){case Mn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw yc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Mn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw yc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=uj(e)}catch(i){throw i.message.includes("polyfill")?i:yc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class px{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw yc(Mn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=pj(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function hj(t){const e=new px(t);return e.base64?fx(Mn.BASE64,e.rest):dj(e.rest)}function fj(t){return new px(t).contentType}function pj(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n){let r=0,i="";Mb(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Mb(this.data_)){const r=this.data_,i=cj(r,e,n);return i===null?null:new Vr(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Vr(r,!0)}}static getBlob(...e){if(r0()){const n=e.map(r=>r instanceof Vr?r.data_:r);return new Vr(lj.apply(null,n))}else{const n=e.map(o=>yp(o)?dx(Mn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Vr(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(t){let e;try{e=JSON.parse(t)}catch{return null}return ej(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function gj(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function mx(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vj(t,e){return e}class Kt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||vj}}let Pd=null;function yj(t){return!yp(t)||t.length<2?t:mx(t)}function _p(){if(Pd)return Pd;const t=[];t.push(new Kt("bucket")),t.push(new Kt("generation")),t.push(new Kt("metageneration")),t.push(new Kt("name","fullPath",!0));function e(s,o){return yj(o)}const n=new Kt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Kt("size");return i.xform=r,t.push(i),t.push(new Kt("timeCreated")),t.push(new Kt("updated")),t.push(new Kt("md5Hash",null,!0)),t.push(new Kt("cacheControl",null,!0)),t.push(new Kt("contentDisposition",null,!0)),t.push(new Kt("contentEncoding",null,!0)),t.push(new Kt("contentLanguage",null,!0)),t.push(new Kt("contentType",null,!0)),t.push(new Kt("metadata","customMetadata",!0)),Pd=t,Pd}function _j(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new jt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function wj(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return _j(r,t),r}function gx(t,e,n){const r=i0(e);return r===null?null:wj(t,r,n)}function Ej(t,e,n,r){const i=i0(e);if(i===null||!yp(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const d=t.bucket,h=t.fullPath,p="/b/"+o(d)+"/o/"+o(h),v=cs(p,n,r),E=cx({alt:"media",token:u});return v+E})[0]}function s0(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb="prefixes",$b="items";function Tj(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Fb])for(const i of n[Fb]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new jt(e,s));r.prefixes.push(o)}if(n[$b])for(const i of n[$b]){const s=t._makeStorageReference(new jt(e,i.name));r.items.push(s)}return r}function Ij(t,e,n){const r=i0(n);return r===null?null:Tj(t,e,r)}class ai{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t){if(!t)throw n0()}function wp(t,e){function n(r,i){const s=gx(t,i,e);return Er(s!==null),s}return n}function bj(t,e){function n(r,i){const s=Ij(t,e,i);return Er(s!==null),s}return n}function Sj(t,e){function n(r,i){const s=gx(t,i,e);return Er(s!==null),Ej(s,i,t.host,t._protocol)}return n}function ol(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=j8():i=U8():n.getStatus()===402?i=$8(t.bucket):n.getStatus()===403?i=B8(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Ep(t){const e=ol(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=F8(t.path)),s.serverResponse=i.serverResponse,s}return n}function vx(t,e,n){const r=e.fullServerUrl(),i=cs(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new ai(i,s,wp(t,n),o);return a.errorHandler=Ep(e),a}function Rj(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=e.bucketOnlyServerUrl(),a=cs(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,d=new ai(a,l,bj(t,e.bucket),u);return d.urlParams=s,d.errorHandler=ol(e),d}function Aj(t,e,n){const r=e.fullServerUrl(),i=cs(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new ai(i,s,Sj(t,n),o);return a.errorHandler=Ep(e),a}function Pj(t,e,n,r){const i=e.fullServerUrl(),s=cs(i,t.host,t._protocol),o="PATCH",a=s0(n,r),l={"Content-Type":"application/json; charset=utf-8"},u=t.maxOperationRetryTime,d=new ai(s,o,wp(t,r),u);return d.headers=l,d.body=a,d.errorHandler=Ep(e),d}function Cj(t,e){const n=e.fullServerUrl(),r=cs(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,u){}const a=new ai(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Ep(e),a}function kj(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function yx(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=kj(null,e)),r}function xj(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let D=0;D<2;D++)b=b+Math.random().toString().slice(2);return b}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=yx(e,r,i),d=s0(u,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+l+"--",v=Vr.getBlob(h,r,p);if(v===null)throw ox();const E={name:u.fullPath},_=cs(s,t.host,t._protocol),I="POST",w=t.maxUploadRetryTime,y=new ai(_,I,wp(t,n),w);return y.urlParams=E,y.headers=o,y.body=v.uploadData(),y.errorHandler=ol(e),y}class ff{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function o0(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Er(!1)}return Er(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Dj(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=yx(e,r,i),a={name:o.fullPath},l=cs(s,t.host,t._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=s0(o,n),p=t.maxUploadRetryTime;function v(_){o0(_);let I;try{I=_.getResponseHeader("X-Goog-Upload-URL")}catch{Er(!1)}return Er(yp(I)),I}const E=new ai(l,u,v,p);return E.urlParams=a,E.headers=d,E.body=h,E.errorHandler=ol(e),E}function Nj(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(u){const d=o0(u,["active","final"]);let h=null;try{h=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Er(!1)}h||Er(!1);const p=Number(h);return Er(!isNaN(p)),new ff(p,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new ai(n,o,s,a);return l.headers=i,l.errorHandler=ol(e),l}const Ub=256*1024;function Oj(t,e,n,r,i,s,o,a){const l=new ff(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw K8();const u=l.total-l.current;let d=u;i>0&&(d=Math.min(d,i));const h=l.current,p=h+d;let v="";d===0?v="finalize":u===d?v="upload, finalize":v="upload";const E={"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":`${l.current}`},_=r.slice(h,p);if(_===null)throw ox();function I(D,V){const $=o0(D,["active","final"]),R=l.current+d,T=r.size();let A;return $==="final"?A=wp(e,s)(D,V):A=null,new ff(R,T,$==="final",A)}const w="POST",y=e.maxUploadRetryTime,b=new ai(n,w,I,y);return b.headers=E,b.body=_.uploadData(),b.progressCallback=a||null,b.errorHandler=ol(t),b}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj={STATE_CHANGED:"state_changed"},Yt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function eg(t){switch(t){case"running":case"pausing":case"canceling":return Yt.RUNNING;case"paused":return Yt.PAUSED;case"success":return Yt.SUCCESS;case"canceled":return Yt.CANCELED;case"error":return Yt.ERROR;default:return Yt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,n,r){if(Z8(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Mj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$s.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$s.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$s.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Vl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Fj extends Mj{initXhr(){this.xhr_.responseType="text"}}function fr(){return new Fj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=_p(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Oe.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(ux(i.status,[]))if(s)i=ix();else{this.sleepTime=Math.max(this.sleepTime*2,M8),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Oe.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=Dj(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,fr,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=Nj(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,fr,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Ub*this._chunkMultiplier,n=new ff(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=Oj(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,fr,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Ub*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=vx(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,fr,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=xj(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,fr,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=sx(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=eg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new Vj(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(eg(this._state)){case Yt.SUCCESS:Co(this._resolve.bind(null,this.snapshot))();break;case Yt.CANCELED:case Yt.ERROR:const n=this._reject;Co(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(eg(this._state)){case Yt.RUNNING:case Yt.PAUSED:e.next&&Co(e.next.bind(e,this.snapshot))();break;case Yt.SUCCESS:e.complete&&Co(e.complete.bind(e))();break;case Yt.CANCELED:case Yt.ERROR:e.error&&Co(e.error.bind(e,this._error))();break;default:e.error&&Co(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n){this._service=e,n instanceof jt?this._location=n:this._location=jt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ro(e,n)}get root(){const e=new jt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mx(this._location.path)}get storage(){return this._service}get parent(){const e=mj(this._location.path);if(e===null)return null;const n=new jt(this._location.bucket,e);return new ro(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw lx(e)}}function $j(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new _x(t,new Vr(e),n)}function Uj(t){const e={prefixes:[],items:[]};return wx(t,e).then(()=>e)}async function wx(t,e,n){const i=await Ex(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await wx(t,e,i.nextPageToken)}function Ex(t,e){e!=null&&typeof e.maxResults=="number"&&ey("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=Rj(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,fr)}function jj(t){t._throwIfRoot("getMetadata");const e=vx(t.storage,t._location,_p());return t.storage.makeRequestWithTokens(e,fr)}function Bj(t,e){t._throwIfRoot("updateMetadata");const n=Pj(t.storage,t._location,e,_p());return t.storage.makeRequestWithTokens(n,fr)}function zj(t){t._throwIfRoot("getDownloadURL");const e=Aj(t.storage,t._location,_p());return t.storage.makeRequestWithTokens(e,fr).then(n=>{if(n===null)throw G8();return n})}function qj(t){t._throwIfRoot("deleteObject");const e=Cj(t.storage,t._location);return t.storage.makeRequestWithTokens(e,fr)}function Tx(t,e){const n=gj(t._location.path,e),r=new jt(t._location.bucket,n);return new ro(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(t){return/^[A-Za-z]+:\/\//.test(t)}function Kj(t,e){return new ro(t,e)}function Ix(t,e){if(t instanceof a0){const n=t;if(n._bucket==null)throw W8();const r=new ro(n,n._bucket);return e!=null?Ix(r,e):r}else return e!==void 0?Tx(t,e):t}function Gj(t,e){if(e&&Wj(e)){if(t instanceof a0)return Kj(t,e);throw da("To use ref(service, url), the first argument must be a Storage instance.")}else return Ix(t,e)}function jb(t,e){const n=e==null?void 0:e[rx];return n==null?null:jt.makeFromBucketSpec(n,t)}function Hj(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:mA(i,t.app.options.projectId))}class a0{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=nx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=L8,this._maxUploadRetryTime=V8,this._requests=new Set,i!=null?this._bucket=jt.makeFromBucketSpec(i,this._host):this._bucket=jb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=jt.makeFromBucketSpec(this._url,e):this._bucket=jb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ey("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ey("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ro(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Q8(ax());{const o=oj(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Bb="@firebase/storage",zb="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj="storage";function bx(t,e,n){return t=Y(t),$j(t,e,n)}function Yj(t){return t=Y(t),jj(t)}function Xj(t,e){return t=Y(t),Bj(t,e)}function Jj(t,e){return t=Y(t),Ex(t,e)}function Zj(t){return t=Y(t),Uj(t)}function Sx(t){return t=Y(t),zj(t)}function e7(t){return t=Y(t),qj(t)}function ty(t,e){return t=Y(t),Gj(t,e)}function t7(t,e){return Tx(t,e)}function n7(t,e,n,r={}){Hj(t,e,n,r)}function r7(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new a0(n,r,i,e,ti)}function i7(){zt(new dt(Qj,r7,"PUBLIC").setMultipleInstances(!0)),Et(Bb,zb,""),Et(Bb,zb,"esm2017")}i7();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Cd(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new Cd(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(typeof n=="function"?s=o=>n(new Cd(o,this,this._ref)):s={next:n.next?o=>n.next(new Cd(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class Wb{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Wr(e,this._service))}get items(){return this._delegate.items.map(e=>new Wr(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=t7(this._delegate,e);return new Wr(n,this.storage)}get root(){return new Wr(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Wr(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new qb(bx(this._delegate,e,n),this)}putString(e,n=Mn.RAW,r){this._throwIfRoot("putString");const i=dx(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new qb(new _x(this._delegate,new Vr(i.data,!0),s),this)}listAll(){return Zj(this._delegate).then(e=>new Wb(e,this.storage))}list(e){return Jj(this._delegate,e||void 0).then(n=>new Wb(n,this.storage))}getMetadata(){return Yj(this._delegate)}updateMetadata(e){return Xj(this._delegate,e)}getDownloadURL(){return Sx(this._delegate)}delete(){return this._throwIfRoot("delete"),e7(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw lx(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Kb(e))throw da("ref() expected a child path but got a URL, use refFromURL instead.");return new Wr(ty(this._delegate,e),this)}refFromURL(e){if(!Kb(e))throw da("refFromURL() expected a full URL but got a child path, use ref() instead.");try{jt.makeFromUrl(e,this._delegate.host)}catch{throw da("refFromUrl() expected a valid full URL but got an invalid one.")}return new Wr(ty(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){n7(this._delegate,e,n,r)}}function Kb(t){return/^[A-Za-z]+:\/\//.test(t)}const s7="@firebase/storage-compat",o7="0.3.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a7="storage-compat";function l7(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new Rx(n,r)}function c7(t){const e={TaskState:Yt,TaskEvent:Lj,StringFormat:Mn,Storage:Rx,Reference:Wr};t.INTERNAL.registerComponent(new dt(a7,l7,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(s7,o7)}c7(sn);const Ax="@firebase/installations",l0="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=1e4,Cx=`w:${l0}`,kx="FIS_v2",u7="https://firebaseinstallations.googleapis.com/v1",d7=60*60*1e3,h7="installations",f7="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p7={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},io=new tr(h7,f7,p7);function xx(t){return t instanceof Pt&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx({projectId:t}){return`${u7}/projects/${t}/installations`}function Nx(t){return{token:t.token,requestStatus:2,expiresIn:g7(t.expiresIn),creationTime:Date.now()}}async function Ox(t,e){const r=(await e.json()).error;return io.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Lx({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function m7(t,{refreshToken:e}){const n=Lx(t);return n.append("Authorization",v7(e)),n}async function Vx(t){const e=await t();return e.status>=500&&e.status<600?t():e}function g7(t){return Number(t.replace("s","000"))}function v7(t){return`${kx} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y7({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Dx(t),i=Lx(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:kx,appId:t.appId,sdkVersion:Cx},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await Vx(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:Nx(u.authToken)}}else throw await Ox("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _7(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w7=/^[cdef][\w-]{21}$/,ny="";function E7(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=T7(t);return w7.test(n)?n:ny}catch{return ny}}function T7(t){return _7(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=new Map;function $x(t,e){const n=Tp(t);Ux(n,e),I7(n,e)}function Ux(t,e){const n=Fx.get(t);if(n)for(const r of n)r(e)}function I7(t,e){const n=b7();n&&n.postMessage({key:t,fid:e}),S7()}let Ds=null;function b7(){return!Ds&&"BroadcastChannel"in self&&(Ds=new BroadcastChannel("[Firebase] FID Change"),Ds.onmessage=t=>{Ux(t.data.key,t.data.fid)}),Ds}function S7(){Fx.size===0&&Ds&&(Ds.close(),Ds=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R7="firebase-installations-database",A7=1,so="firebase-installations-store";let tg=null;function c0(){return tg||(tg=Ga(R7,A7,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(so)}}})),tg}async function pf(t,e){const n=Tp(t),i=(await c0()).transaction(so,"readwrite"),s=i.objectStore(so),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&$x(t,e.fid),e}async function jx(t){const e=Tp(t),r=(await c0()).transaction(so,"readwrite");await r.objectStore(so).delete(e),await r.done}async function Ip(t,e){const n=Tp(t),i=(await c0()).transaction(so,"readwrite"),s=i.objectStore(so),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&$x(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u0(t){let e;const n=await Ip(t.appConfig,r=>{const i=P7(r),s=C7(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===ny?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function P7(t){const e=t||{fid:E7(),registrationStatus:0};return Bx(e)}function C7(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(io.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=k7(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:x7(t)}:{installationEntry:e}}async function k7(t,e){try{const n=await y7(t,e);return pf(t.appConfig,n)}catch(n){throw xx(n)&&n.customData.serverCode===409?await jx(t.appConfig):await pf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function x7(t){let e=await Gb(t.appConfig);for(;e.registrationStatus===1;)await Mx(100),e=await Gb(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await u0(t);return r||n}return e}function Gb(t){return Ip(t,e=>{if(!e)throw io.create("installation-not-found");return Bx(e)})}function Bx(t){return D7(t)?{fid:t.fid,registrationStatus:0}:t}function D7(t){return t.registrationStatus===1&&t.registrationTime+Px<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N7({appConfig:t,heartbeatServiceProvider:e},n){const r=O7(t,n),i=m7(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:Cx,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await Vx(()=>fetch(r,a));if(l.ok){const u=await l.json();return Nx(u)}else throw await Ox("Generate Auth Token",l)}function O7(t,{fid:e}){return`${Dx(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d0(t,e=!1){let n;const r=await Ip(t.appConfig,s=>{if(!zx(s))throw io.create("not-registered");const o=s.authToken;if(!e&&M7(o))return s;if(o.requestStatus===1)return n=L7(t,e),s;{if(!navigator.onLine)throw io.create("app-offline");const a=$7(s);return n=V7(t,a),a}});return n?await n:r.authToken}async function L7(t,e){let n=await Hb(t.appConfig);for(;n.authToken.requestStatus===1;)await Mx(100),n=await Hb(t.appConfig);const r=n.authToken;return r.requestStatus===0?d0(t,e):r}function Hb(t){return Ip(t,e=>{if(!zx(e))throw io.create("not-registered");const n=e.authToken;return U7(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function V7(t,e){try{const n=await N7(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await pf(t.appConfig,r),n}catch(n){if(xx(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await jx(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await pf(t.appConfig,r)}throw n}}function zx(t){return t!==void 0&&t.registrationStatus===2}function M7(t){return t.requestStatus===2&&!F7(t)}function F7(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+d7}function $7(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function U7(t){return t.requestStatus===1&&t.requestTime+Px<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j7(t){const e=t,{installationEntry:n,registrationPromise:r}=await u0(e);return r?r.catch(console.error):d0(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B7(t,e=!1){const n=t;return await z7(n),(await d0(n,e)).token}async function z7(t){const{registrationPromise:e}=await u0(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q7(t){if(!t||!t.options)throw ng("App Configuration");if(!t.name)throw ng("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw ng(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ng(t){return io.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="installations",W7="installations-internal",K7=t=>{const e=t.getProvider("app").getImmediate(),n=q7(e),r=Mf(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},G7=t=>{const e=t.getProvider("app").getImmediate(),n=Mf(e,qx).getImmediate();return{getId:()=>j7(n),getToken:i=>B7(n,i)}};function H7(){zt(new dt(qx,K7,"PUBLIC")),zt(new dt(W7,G7,"PRIVATE"))}H7();Et(Ax,l0);Et(Ax,l0,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q7="/firebase-messaging-sw.js",Y7="/firebase-cloud-messaging-push-scope",Wx="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",X7="https://fcmregistrations.googleapis.com/v1",Kx="google.c.a.c_id",J7="google.c.a.c_l",Z7="google.c.a.ts",eB="google.c.a.e";var Qb;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Qb||(Qb={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var au;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(au||(au={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function tB(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="fcm_token_details_db",nB=5,Yb="fcm_token_object_Store";async function rB(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(rg))return null;let e=null;return(await Ga(rg,nB,{upgrade:async(r,i,s,o)=>{var a;if(i<2||!r.objectStoreNames.contains(Yb))return;const l=o.objectStore(Yb),u=await l.index("fcmSenderId").get(t);if(await l.clear(),!!u){if(i===2){const d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Nr(d.vapidKey)}}}else if(i===3){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Nr(d.auth),p256dh:Nr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Nr(d.vapidKey)}}}else if(i===4){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Nr(d.auth),p256dh:Nr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Nr(d.vapidKey)}}}}}})).close(),await ra(rg),await ra("fcm_vapid_details_db"),await ra("undefined"),iB(e)?e:null}function iB(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB="firebase-messaging-database",oB=1,oo="firebase-messaging-store";let ig=null;function h0(){return ig||(ig=Ga(sB,oB,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(oo)}}})),ig}async function Gx(t){const e=p0(t),r=await(await h0()).transaction(oo).objectStore(oo).get(e);if(r)return r;{const i=await rB(t.appConfig.senderId);if(i)return await f0(t,i),i}}async function f0(t,e){const n=p0(t),i=(await h0()).transaction(oo,"readwrite");return await i.objectStore(oo).put(e,n),await i.done,e}async function aB(t){const e=p0(t),r=(await h0()).transaction(oo,"readwrite");await r.objectStore(oo).delete(e),await r.done}function p0({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},en=new tr("messaging","Messaging",lB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cB(t,e){const n=await g0(t),r=Qx(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(m0(t.appConfig),i)).json()}catch(o){throw en.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw en.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw en.create("token-subscribe-no-token");return s.token}async function uB(t,e){const n=await g0(t),r=Qx(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${m0(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw en.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw en.create("token-update-failed",{errorInfo:o})}if(!s.token)throw en.create("token-update-no-token");return s.token}async function Hx(t,e){const r={method:"DELETE",headers:await g0(t)};try{const s=await(await fetch(`${m0(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw en.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw en.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function m0({projectId:t}){return`${X7}/projects/${t}/registrations`}async function g0({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function Qx({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==Wx&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dB=7*24*60*60*1e3;async function hB(t){const e=await mB(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Nr(e.getKey("auth")),p256dh:Nr(e.getKey("p256dh"))},r=await Gx(t.firebaseDependencies);if(r){if(gB(r.subscriptionOptions,n))return Date.now()>=r.createTime+dB?pB(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await Hx(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Xb(t.firebaseDependencies,n)}else return Xb(t.firebaseDependencies,n)}async function fB(t){const e=await Gx(t.firebaseDependencies);e&&(await Hx(t.firebaseDependencies,e.token),await aB(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function pB(t,e){try{const n=await uB(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await f0(t.firebaseDependencies,r),n}catch(n){throw n}}async function Xb(t,e){const r={token:await cB(t,e),createTime:Date.now(),subscriptionOptions:e};return await f0(t,r),r.token}async function mB(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:tB(e)})}function gB(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return vB(e,t),yB(e,t),_B(e,t),e}function vB(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}function yB(t,e){e.data&&(t.data=e.data)}function _B(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wB(t){return typeof t=="object"&&!!t&&Kx in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EB(t){if(!t||!t.options)throw sg("App Configuration Object");if(!t.name)throw sg("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw sg(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function sg(t){return en.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TB=class{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=EB(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yx(t){try{t.swRegistration=await navigator.serviceWorker.register(Q7,{scope:Y7}),t.swRegistration.update().catch(()=>{})}catch(e){throw en.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IB(t,e){if(!e&&!t.swRegistration&&await Yx(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw en.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bB(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=Wx)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xx(t,e){if(!navigator)throw en.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw en.create("permission-blocked");return await bB(t,e==null?void 0:e.vapidKey),await IB(t,e==null?void 0:e.serviceWorkerRegistration),hB(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SB(t,e,n){const r=RB(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[Kx],message_name:n[J7],message_time:n[Z7],message_device_time:Math.floor(Date.now()/1e3)})}function RB(t){switch(t){case au.NOTIFICATION_CLICKED:return"notification_open";case au.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AB(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===au.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(Jb(n)):t.onMessageHandler.next(Jb(n)));const r=n.data;wB(r)&&r[eB]==="1"&&await SB(t,n.messageType,r)}const Zb="@firebase/messaging",e1="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PB=t=>{const e=new TB(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>AB(e,n)),e},CB=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>Xx(e,r)}};function kB(){zt(new dt("messaging",PB,"PUBLIC")),zt(new dt("messaging-internal",CB,"PRIVATE")),Et(Zb,e1),Et(Zb,e1,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xB(t){if(!navigator)throw en.create("only-available-in-window");return t.swRegistration||await Yx(t),fB(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DB(t,e){if(!navigator)throw en.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}async function Jx(t,e){return t=Y(t),Xx(t,e)}function NB(t){return t=Y(t),xB(t)}function OB(t,e){return t=Y(t),DB(t,e)}kB();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",LB="https://fcmregistrations.googleapis.com/v1",eD="FCM_MSG",VB="google.c.a.c_id",MB=3,FB=1;var mf;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(mf||(mf={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var gf;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(gf||(gf={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $B(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="fcm_token_details_db",UB=5,t1="fcm_token_object_Store";async function jB(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(og))return null;let e=null;return(await Ga(og,UB,{upgrade:async(r,i,s,o)=>{var a;if(i<2||!r.objectStoreNames.contains(t1))return;const l=o.objectStore(t1),u=await l.index("fcmSenderId").get(t);if(await l.clear(),!!u){if(i===2){const d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Or(d.vapidKey)}}}else if(i===3){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Or(d.auth),p256dh:Or(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Or(d.vapidKey)}}}else if(i===4){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Or(d.auth),p256dh:Or(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Or(d.vapidKey)}}}}}})).close(),await ra(og),await ra("fcm_vapid_details_db"),await ra("undefined"),BB(e)?e:null}function BB(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zB="firebase-messaging-database",qB=1,ao="firebase-messaging-store";let ag=null;function v0(){return ag||(ag=Ga(zB,qB,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ao)}}})),ag}async function y0(t){const e=w0(t),r=await(await v0()).transaction(ao).objectStore(ao).get(e);if(r)return r;{const i=await jB(t.appConfig.senderId);if(i)return await _0(t,i),i}}async function _0(t,e){const n=w0(t),i=(await v0()).transaction(ao,"readwrite");return await i.objectStore(ao).put(e,n),await i.done,e}async function WB(t){const e=w0(t),r=(await v0()).transaction(ao,"readwrite");await r.objectStore(ao).delete(e),await r.done}function w0({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Tr=new tr("messaging","Messaging",KB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GB(t,e){const n=await T0(t),r=nD(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(E0(t.appConfig),i)).json()}catch(o){throw Tr.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw Tr.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw Tr.create("token-subscribe-no-token");return s.token}async function HB(t,e){const n=await T0(t),r=nD(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${E0(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw Tr.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw Tr.create("token-update-failed",{errorInfo:o})}if(!s.token)throw Tr.create("token-update-no-token");return s.token}async function tD(t,e){const r={method:"DELETE",headers:await T0(t)};try{const s=await(await fetch(`${E0(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw Tr.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw Tr.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function E0({projectId:t}){return`${LB}/projects/${t}/registrations`}async function T0({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function nD({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==Zx&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QB=7*24*60*60*1e3;async function YB(t){const e=await JB(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Or(e.getKey("auth")),p256dh:Or(e.getKey("p256dh"))},r=await y0(t.firebaseDependencies);if(r){if(ZB(r.subscriptionOptions,n))return Date.now()>=r.createTime+QB?XB(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await tD(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return r1(t.firebaseDependencies,n)}else return r1(t.firebaseDependencies,n)}async function n1(t){const e=await y0(t.firebaseDependencies);e&&(await tD(t.firebaseDependencies,e.token),await WB(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function XB(t,e){try{const n=await HB(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await _0(t.firebaseDependencies,r),n}catch(n){throw n}}async function r1(t,e){const r={token:await GB(t,e),createTime:Date.now(),subscriptionOptions:e};return await _0(t,r),r.token}async function JB(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$B(e)})}function ZB(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ez(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return tz(e,t),nz(e,t),rz(e,t),e}function tz(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}function nz(t,e){e.data&&(t.data=e.data)}function rz(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iz(t){return typeof t=="object"&&!!t&&VB in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sz(t){return new Promise(e=>{setTimeout(e,t)})}async function oz(t,e){const n=az(e,await t.firebaseDependencies.installations.getId());lz(t,n,e.productId)}function az(t,e){var n,r;const i={};return t.from&&(i.project_number=t.from),t.fcmMessageId&&(i.message_id=t.fcmMessageId),i.instance_id=e,t.notification?i.message_type=mf.DISPLAY_NOTIFICATION.toString():i.message_type=mf.DATA_MESSAGE.toString(),i.sdk_platform=MB.toString(),i.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),t.collapse_key&&(i.collapse_key=t.collapse_key),i.event=FB.toString(),!((n=t.fcmOptions)===null||n===void 0)&&n.analytics_label&&(i.analytics_label=(r=t.fcmOptions)===null||r===void 0?void 0:r.analytics_label),i}function lz(t,e,n){const r={};r.event_time_ms=Math.floor(Date.now()).toString(),r.source_extension_json_proto3=JSON.stringify({messaging_client_event:e}),n&&(r.compliance_data=cz(n)),t.logEvents.push(r)}function cz(t){return{privacy_context:{prequest:{origin_associated_product_id:t}}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uz(t,e){var n,r;const{newSubscription:i}=t;if(!i){await n1(e);return}const s=await y0(e.firebaseDependencies);await n1(e),e.vapidKey=(r=(n=s==null?void 0:s.subscriptionOptions)===null||n===void 0?void 0:n.vapidKey)!==null&&r!==void 0?r:Zx,await YB(e)}async function dz(t,e){const n=pz(t);if(!n)return;e.deliveryMetricsExportedToBigQueryEnabled&&await oz(e,n);const r=await rD();if(gz(r))return vz(r,n);if(n.notification&&await yz(fz(n)),!!e&&e.onBackgroundMessageHandler){const i=ez(n);typeof e.onBackgroundMessageHandler=="function"?await e.onBackgroundMessageHandler(i):e.onBackgroundMessageHandler.next(i)}}async function hz(t){var e,n;const r=(n=(e=t.notification)===null||e===void 0?void 0:e.data)===null||n===void 0?void 0:n[eD];if(r){if(t.action)return}else return;t.stopImmediatePropagation(),t.notification.close();const i=_z(r);if(!i)return;const s=new URL(i,self.location.href),o=new URL(self.location.origin);if(s.host!==o.host)return;let a=await mz(s);if(a?a=await a.focus():(a=await self.clients.openWindow(i),await sz(3e3)),!!a)return r.messageType=gf.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,a.postMessage(r)}function fz(t){const e=Object.assign({},t.notification);return e.data={[eD]:t},e}function pz({data:t}){if(!t)return null;try{return t.json()}catch{return null}}async function mz(t){const e=await rD();for(const n of e){const r=new URL(n.url,self.location.href);if(t.host===r.host)return n}return null}function gz(t){return t.some(e=>e.visibilityState==="visible"&&!e.url.startsWith("chrome-extension://"))}function vz(t,e){e.isFirebaseMessaging=!0,e.messageType=gf.PUSH_RECEIVED;for(const n of t)n.postMessage(e)}function rD(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function yz(t){var e;const{actions:n}=t,{maxActions:r}=Notification;return n&&r&&n.length>r&&console.warn(`This browser only supports ${r} actions. The remaining actions will not be displayed.`),self.registration.showNotification((e=t.title)!==null&&e!==void 0?e:"",t)}function _z(t){var e,n,r;const i=(n=(e=t.fcmOptions)===null||e===void 0?void 0:e.link)!==null&&n!==void 0?n:(r=t.notification)===null||r===void 0?void 0:r.click_action;return i||(iz(t.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wz(t){if(!t||!t.options)throw lg("App Configuration Object");if(!t.name)throw lg("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw lg(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function lg(t){return Tr.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=wz(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tz=t=>{const e=new Ez(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return self.addEventListener("push",n=>{n.waitUntil(dz(n,e))}),self.addEventListener("pushsubscriptionchange",n=>{n.waitUntil(uz(n,e))}),self.addEventListener("notificationclick",n=>{n.waitUntil(hz(n))}),e};function Iz(){zt(new dt("messaging-sw",Tz,"PUBLIC"))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bz(t,e){if(self.document!==void 0)throw Tr.create("only-available-in-sw");return t.onBackgroundMessageHandler=e,()=>{t.onBackgroundMessageHandler=null}}function Sz(t,e){return t=Y(t),bz(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Iz();const Rz="@firebase/messaging-compat",Az="0.2.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pz(){return self&&"ServiceWorkerGlobalScope"in self?kz():Cz()}function Cz(){return typeof window<"u"&&ji()&&s4()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function kz(){return ji()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}class i1{constructor(e,n){this.app=e,this._delegate=n,this.app=e,this._delegate=n}async getToken(e){return Jx(this._delegate,e)}async deleteToken(){return NB(this._delegate)}onMessage(e){return OB(this._delegate,e)}onBackgroundMessage(e){return Sz(this._delegate,e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xz=t=>self&&"ServiceWorkerGlobalScope"in self?new i1(t.getProvider("app-compat").getImmediate(),t.getProvider("messaging-sw").getImmediate()):new i1(t.getProvider("app-compat").getImmediate(),t.getProvider("messaging").getImmediate()),Dz={isSupported:Pz};function Nz(){sn.INTERNAL.registerComponent(new dt("messaging-compat",xz,"PUBLIC").setServiceProps(Dz))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nz();sn.registerVersion(Rz,Az);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oz=new Map,Lz={activated:!1,tokenObservers:[]};function er(t){return Oz.get(t)||Object.assign({},Lz)}const s1={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new mv,this.pending.promise.catch(n=>{}),await Mz(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new mv,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function Mz(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fz={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},vf=new tr("appCheck","AppCheck",Fz);function iD(t){if(!er(t).activated)throw vf.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $z="firebase-app-check-database",Uz=1,ry="firebase-app-check-store";let kd=null;function jz(){return kd||(kd=new Promise((t,e)=>{try{const n=indexedDB.open($z,Uz);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(vf.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(ry,{keyPath:"compositeKey"})}}}catch(n){e(vf.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),kd)}function Bz(t,e){return zz(qz(t),e)}async function zz(t,e){const r=(await jz()).transaction(ry,"readwrite"),s=r.objectStore(ry).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var u;a(vf.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})}function qz(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=new mu("@firebase/app-check");function o1(t,e){return ji()?Bz(t,e).catch(n=>{iy.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wz={error:"UNKNOWN_ERROR"};function Kz(t){return S_.encodeString(JSON.stringify(t),!1)}async function sy(t,e=!1){const n=t.app;iD(n);const r=er(n);let i=r.token,s;if(i&&!Zl(i)&&(r.token=void 0,i=void 0),!i){const l=await r.cachedTokenPromise;l&&(Zl(l)?i=l:await o1(n,void 0))}if(!e&&i&&Zl(i))return{token:i.token};let o=!1;try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await er(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?iy.warn(l.message):iy.error(l),s=l}let a;return i?s?Zl(i)?a={token:i.token,internalError:s}:a=l1(s):(a={token:i.token},r.token=i,await o1(n,i)):a=l1(s),o&&Yz(n,a),a}async function Gz(t){const e=t.app;iD(e);const{provider:n}=er(e);{const{token:r}=await n.getToken();return{token:r}}}function Hz(t,e,n,r){const{app:i}=t,s=er(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Zl(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),a1(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>a1(t))}function sD(t,e){const n=er(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function a1(t){const{app:e}=t,n=er(e);let r=n.tokenRefresher;r||(r=Qz(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Qz(t){const{app:e}=t;return new Vz(async()=>{const n=er(e);let r;if(n.token?r=await sy(t,!0):r=await sy(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=er(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},s1.RETRIAL_MIN_WAIT,s1.RETRIAL_MAX_WAIT)}function Yz(t,e){const n=er(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Zl(t){return t.expireTimeMillis-Date.now()>0}function l1(t){return{token:Kz(Wz),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=er(this.app);for(const n of e)sD(this.app,n.next);return Promise.resolve()}}function Jz(t,e){return new Xz(t,e)}function Zz(t){return{getToken:e=>sy(t,e),getLimitedUseToken:()=>Gz(t),addTokenListener:e=>Hz(t,"INTERNAL",e),removeTokenListener:e=>sD(t.app,e)}}const eq="@firebase/app-check",tq="0.8.8",nq="app-check",c1="app-check-internal";function rq(){zt(new dt(nq,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Jz(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(c1).initialize()})),zt(new dt(c1,t=>{const e=t.getProvider("app-check").getImmediate();return Zz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Et(eq,tq)}rq();const iq={apiKey:"AIzaSyBnLH-WPXrw6LbXTo6FhHogwjFApEOXIos",authDomain:"petzia-f86b4.firebaseapp.com",projectId:"petzia-f86b4",storageBucket:"petzia-f86b4.firebasestorage.app",messagingSenderId:"375896389326",appId:"1:375896389326:web:dddf24146bf368fc88029f",measurementId:"G-SZJ3S8XPKT"};sn.initializeApp(iq);sn.messaging();const pe=sn.firestore(),oy=sn.auth(),sq=sn.storage(),Ml=sn.firestore.FieldValue.serverTimestamp(),UQ=new sn.auth.GoogleAuthProvider,bp=m.createContext(),oq=()=>{const t=m.useContext(bp);if(!t)throw new Error("useAuthContext must be used within an AuthContextProvider");return t},aq=(t,e)=>{switch(e.type){case"LOGIN":return{...t,user:e.payload};case"LOGOUT":return{...t,user:null};case"AUTH_IS_READY":return{...t,user:e.payload,authIsReady:!0};default:return t}};function lq({children:t}){const[e,n]=m.useReducer(aq,{user:null,authIsReady:!1});m.useEffect(()=>{const i=d5(oy,s=>{console.log("Auth state changed:",s?"User logged in":"No user"),n({type:"AUTH_IS_READY",payload:s})});return()=>i()},[]),console.log("AuthContext state:",e);const r=async()=>{try{await oy.signOut(),n({type:"LOGOUT"})}catch(i){throw console.error("Error logging out:",i),i}};return P.jsx(bp.Provider,{value:{...e,dispatch:n,logout:r},children:t})}const us=()=>{const t=m.useContext(bp);if(!t)throw Error("useAuthContext must be inside an AuthContextProvider.");return t},oD=m.createContext(),cq=({children:t})=>{const[e,n]=m.useState(!1),[r,i]=m.useState(!0),{user:s}=us();m.useEffect(()=>{(async()=>{if(!s){i(!1);return}try{const u=Se(pe,"onboarding_data",s.uid),d=await ua(u);d.exists()&&d.data().completed?n(!0):n(!1)}catch(u){console.error("Erro ao verificar status do onboarding:",u),n(!1)}finally{i(!1)}})()},[s]);const o=async l=>{if(s)try{const u=Se(pe,"onboarding_data",s.uid);await Fi(u,{...l,userId:s.uid,completed:!0,completedAt:ye.now()});const d=Se(pe,"dashboards",s.uid);return await Fi(d,{petName:l.petName||""},{merge:!0}),n(!0),!0}catch(u){throw console.error("Erro ao salvar dados do onboarding:",u),u}},a=async()=>{if(s)try{const l=Se(pe,"onboarding_data",s.uid);return await Fi(l,{userId:s.uid,completed:!1,resetAt:ye.now()}),localStorage.removeItem("onboarding_progress"),localStorage.removeItem("onboarding_completed"),n(!1),!0}catch(l){throw console.error("Erro ao resetar onboarding:",l),l}};return P.jsx(oD.Provider,{value:{onboardingCompleted:e,loading:r,completeOnboarding:o,resetOnboarding:a},children:t})},uq=()=>{const t=m.useContext(oD);if(!t)throw new Error("useOnboarding deve ser usado dentro de um OnboardingProvider");return t},dq={theme:"dark",setTheme:()=>null},aD=m.createContext(dq);function hq({children:t,defaultTheme:e="light",storageKey:n="vite-ui-theme",...r}){const[i,s]=m.useState("light");m.useEffect(()=>{const a=window.document.documentElement;a.classList.remove("light","dark"),a.classList.add(i)},[i]);const o={theme:i,setTheme:a=>{localStorage.setItem(n,a),s(a)}};return P.jsx(aD.Provider,{...r,value:o,children:t})}const lD=()=>{const t=m.useContext(aD);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t};function he(){return he=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},he.apply(this,arguments)}function it(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function fq(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function cD(...t){return e=>t.forEach(n=>fq(n,e))}function zn(...t){return m.useCallback(cD(...t),t)}function pq(t,e){const n=m.createContext(e);function r(s){const{children:o,...a}=s,l=m.useMemo(()=>a,Object.values(a));return m.createElement(n.Provider,{value:l},o)}function i(s){const o=m.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return r.displayName=t+"Provider",[r,i]}function Sp(t,e=[]){let n=[];function r(s,o){const a=m.createContext(o),l=n.length;n=[...n,o];function u(h){const{scope:p,children:v,...E}=h,_=(p==null?void 0:p[t][l])||a,I=m.useMemo(()=>E,Object.values(E));return m.createElement(_.Provider,{value:I},v)}function d(h,p){const v=(p==null?void 0:p[t][l])||a,E=m.useContext(v);if(E)return E;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,d]}const i=()=>{const s=n.map(o=>m.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return m.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,mq(i,...e)]}function mq(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const h=l(s)[`__scope${u}`];return{...a,...h}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}const Va=m.forwardRef((t,e)=>{const{children:n,...r}=t,i=m.Children.toArray(n),s=i.find(vq);if(s){const o=s.props.children,a=i.map(l=>l===s?m.Children.count(o)>1?m.Children.only(null):m.isValidElement(o)?o.props.children:null:l);return m.createElement(ay,he({},r,{ref:e}),m.isValidElement(o)?m.cloneElement(o,void 0,a):null)}return m.createElement(ay,he({},r,{ref:e}),n)});Va.displayName="Slot";const ay=m.forwardRef((t,e)=>{const{children:n,...r}=t;return m.isValidElement(n)?m.cloneElement(n,{...yq(r,n.props),ref:e?cD(e,n.ref):n.ref}):m.Children.count(n)>1?m.Children.only(null):null});ay.displayName="SlotClone";const gq=({children:t})=>m.createElement(m.Fragment,null,t);function vq(t){return m.isValidElement(t)&&t.type===gq}function yq(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function _q(t){const e=t+"CollectionProvider",[n,r]=Sp(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:E,children:_}=v,I=Re.useRef(null),w=Re.useRef(new Map).current;return Re.createElement(i,{scope:E,itemMap:w,collectionRef:I},_)},a=t+"CollectionSlot",l=Re.forwardRef((v,E)=>{const{scope:_,children:I}=v,w=s(a,_),y=zn(E,w.collectionRef);return Re.createElement(Va,{ref:y},I)}),u=t+"CollectionItemSlot",d="data-radix-collection-item",h=Re.forwardRef((v,E)=>{const{scope:_,children:I,...w}=v,y=Re.useRef(null),b=zn(E,y),D=s(u,_);return Re.useEffect(()=>(D.itemMap.set(y,{ref:y,...w}),()=>void D.itemMap.delete(y))),Re.createElement(Va,{[d]:"",ref:b},I)});function p(v){const E=s(t+"CollectionConsumer",v);return Re.useCallback(()=>{const I=E.collectionRef.current;if(!I)return[];const w=Array.from(I.querySelectorAll(`[${d}]`));return Array.from(E.itemMap.values()).sort((D,V)=>w.indexOf(D.ref.current)-w.indexOf(V.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:o,Slot:l,ItemSlot:h},p,r]}const wq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],at=wq.reduce((t,e)=>{const n=m.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?Va:e;return m.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),m.createElement(a,he({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function I0(t,e){t&&pu.flushSync(()=>t.dispatchEvent(e))}function yn(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function uD(t,e=globalThis==null?void 0:globalThis.document){const n=yn(t);m.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const ly="dismissableLayer.update",Eq="dismissableLayer.pointerDownOutside",Tq="dismissableLayer.focusOutside";let u1;const dD=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Iq=m.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...u}=t,d=m.useContext(dD),[h,p]=m.useState(null),v=(n=h==null?void 0:h.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,E]=m.useState({}),_=zn(e,T=>p(T)),I=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=I.indexOf(w),b=h?I.indexOf(h):-1,D=d.layersWithOutsidePointerEventsDisabled.size>0,V=b>=y,$=Sq(T=>{const A=T.target,k=[...d.branches].some(N=>N.contains(A));!V||k||(s==null||s(T),a==null||a(T),T.defaultPrevented||l==null||l())},v),R=Rq(T=>{const A=T.target;[...d.branches].some(N=>N.contains(A))||(o==null||o(T),a==null||a(T),T.defaultPrevented||l==null||l())},v);return uD(T=>{b===d.layers.size-1&&(i==null||i(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},v),m.useEffect(()=>{if(h)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(u1=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),d1(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=u1)}},[h,v,r,d]),m.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),d1())},[h,d]),m.useEffect(()=>{const T=()=>E({});return document.addEventListener(ly,T),()=>document.removeEventListener(ly,T)},[]),m.createElement(at.div,he({},u,{ref:_,style:{pointerEvents:D?V?"auto":"none":void 0,...t.style},onFocusCapture:it(t.onFocusCapture,R.onFocusCapture),onBlurCapture:it(t.onBlurCapture,R.onBlurCapture),onPointerDownCapture:it(t.onPointerDownCapture,$.onPointerDownCapture)}))}),bq=m.forwardRef((t,e)=>{const n=m.useContext(dD),r=m.useRef(null),i=zn(e,r);return m.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),m.createElement(at.div,he({},t,{ref:i}))});function Sq(t,e=globalThis==null?void 0:globalThis.document){const n=yn(t),r=m.useRef(!1),i=m.useRef(()=>{});return m.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let u=function(){hD(Eq,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Rq(t,e=globalThis==null?void 0:globalThis.document){const n=yn(t),r=m.useRef(!1);return m.useEffect(()=>{const i=s=>{s.target&&!r.current&&hD(Tq,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function d1(){const t=new CustomEvent(ly);document.dispatchEvent(t)}function hD(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?I0(i,s):i.dispatchEvent(s)}const Aq=Iq,Pq=bq,Cq=m.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=t;return r?tA.createPortal(m.createElement(at.div,he({},i,{ref:e})),r):null}),lu=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{};function kq(t,e){return m.useReducer((n,r)=>{const i=e[n][r];return i??n},t)}const Mu=t=>{const{present:e,children:n}=t,r=xq(e),i=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),s=zn(r.ref,i.ref);return typeof n=="function"||r.isPresent?m.cloneElement(i,{ref:s}):null};Mu.displayName="Presence";function xq(t){const[e,n]=m.useState(),r=m.useRef({}),i=m.useRef(t),s=m.useRef("none"),o=t?"mounted":"unmounted",[a,l]=kq(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=xd(r.current);s.current=a==="mounted"?u:"none"},[a]),lu(()=>{const u=r.current,d=i.current;if(d!==t){const p=s.current,v=xd(u);t?l("MOUNT"):v==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&p!==v?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),lu(()=>{if(e){const u=h=>{const v=xd(r.current).includes(h.animationName);h.target===e&&v&&pu.flushSync(()=>l("ANIMATION_END"))},d=h=>{h.target===e&&(s.current=xd(r.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",u),e.addEventListener("animationend",u),()=>{e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",u),e.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:m.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function xd(t){return(t==null?void 0:t.animationName)||"none"}function fD({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=Dq({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=yn(n),l=m.useCallback(u=>{if(s){const h=typeof u=="function"?u(t):u;h!==t&&a(h)}else i(u)},[s,t,i,a]);return[o,l]}function Dq({defaultProp:t,onChange:e}){const n=m.useState(t),[r]=n,i=m.useRef(r),s=yn(e);return m.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const pD=m.forwardRef((t,e)=>m.createElement(at.span,he({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}))),mD="ToastProvider",[b0,Nq,Oq]=_q("Toast"),[gD,jQ]=Sp("Toast",[Oq]),[Lq,Rp]=gD(mD),vD=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,l]=m.useState(null),[u,d]=m.useState(0),h=m.useRef(!1),p=m.useRef(!1);return m.createElement(b0.Provider,{scope:e},m.createElement(Lq,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:m.useCallback(()=>d(v=>v+1),[]),onToastRemove:m.useCallback(()=>d(v=>v-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p},o))};vD.propTypes={label(t){if(t.label&&typeof t.label=="string"&&!t.label.trim()){const e=`Invalid prop \`label\` supplied to \`${mD}\`. Expected non-empty \`string\`.`;return new Error(e)}return null}};const Vq="ToastViewport",Mq=["F8"],cy="toast.viewportPause",uy="toast.viewportResume",Fq=m.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=Mq,label:i="Notifications ({hotkey})",...s}=t,o=Rp(Vq,n),a=Nq(n),l=m.useRef(null),u=m.useRef(null),d=m.useRef(null),h=m.useRef(null),p=zn(e,h,o.onViewportChange),v=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=o.toastCount>0;m.useEffect(()=>{const I=w=>{var y;r.every(D=>w[D]||w.code===D)&&((y=h.current)===null||y===void 0||y.focus())};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[r]),m.useEffect(()=>{const I=l.current,w=h.current;if(E&&I&&w){const y=()=>{if(!o.isClosePausedRef.current){const $=new CustomEvent(cy);w.dispatchEvent($),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const $=new CustomEvent(uy);w.dispatchEvent($),o.isClosePausedRef.current=!1}},D=$=>{!I.contains($.relatedTarget)&&b()},V=()=>{I.contains(document.activeElement)||b()};return I.addEventListener("focusin",y),I.addEventListener("focusout",D),I.addEventListener("pointermove",y),I.addEventListener("pointerleave",V),window.addEventListener("blur",y),window.addEventListener("focus",b),()=>{I.removeEventListener("focusin",y),I.removeEventListener("focusout",D),I.removeEventListener("pointermove",y),I.removeEventListener("pointerleave",V),window.removeEventListener("blur",y),window.removeEventListener("focus",b)}}},[E,o.isClosePausedRef]);const _=m.useCallback(({tabbingDirection:I})=>{const y=a().map(b=>{const D=b.ref.current,V=[D,...eW(D)];return I==="forwards"?V:V.reverse()});return(I==="forwards"?y.reverse():y).flat()},[a]);return m.useEffect(()=>{const I=h.current;if(I){const w=y=>{const b=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!b){const T=document.activeElement,A=y.shiftKey;if(y.target===I&&A){var V;(V=u.current)===null||V===void 0||V.focus();return}const x=_({tabbingDirection:A?"backwards":"forwards"}),C=x.findIndex(J=>J===T);if(cg(x.slice(C+1)))y.preventDefault();else{var $,R;A?($=u.current)===null||$===void 0||$.focus():(R=d.current)===null||R===void 0||R.focus()}}};return I.addEventListener("keydown",w),()=>I.removeEventListener("keydown",w)}},[a,_]),m.createElement(Pq,{ref:l,role:"region","aria-label":i.replace("{hotkey}",v),tabIndex:-1,style:{pointerEvents:E?void 0:"none"}},E&&m.createElement(h1,{ref:u,onFocusFromOutsideViewport:()=>{const I=_({tabbingDirection:"forwards"});cg(I)}}),m.createElement(b0.Slot,{scope:n},m.createElement(at.ol,he({tabIndex:-1},s,{ref:p}))),E&&m.createElement(h1,{ref:d,onFocusFromOutsideViewport:()=>{const I=_({tabbingDirection:"backwards"});cg(I)}}))}),$q="ToastFocusProxy",h1=m.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=Rp($q,n);return m.createElement(pD,he({"aria-hidden":!0,tabIndex:0},i,{ref:e,style:{position:"fixed"},onFocus:o=>{var a;const l=o.relatedTarget;!((a=s.viewport)!==null&&a!==void 0&&a.contains(l))&&r()}}))}),Ap="Toast",Uq="toast.swipeStart",jq="toast.swipeMove",Bq="toast.swipeCancel",zq="toast.swipeEnd",qq=m.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a=!0,l]=fD({prop:r,defaultProp:i,onChange:s});return m.createElement(Mu,{present:n||a},m.createElement(yD,he({open:a},o,{ref:e,onClose:()=>l(!1),onPause:yn(t.onPause),onResume:yn(t.onResume),onSwipeStart:it(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:it(t.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:it(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:it(t.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})))}),[Wq,Kq]=gD(Ap,{onClose(){}}),yD=m.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:v,...E}=t,_=Rp(Ap,n),[I,w]=m.useState(null),y=zn(e,J=>w(J)),b=m.useRef(null),D=m.useRef(null),V=i||_.duration,$=m.useRef(0),R=m.useRef(V),T=m.useRef(0),{onToastAdd:A,onToastRemove:k}=_,N=yn(()=>{var J;(I==null?void 0:I.contains(document.activeElement))&&((J=_.viewport)===null||J===void 0||J.focus()),o()}),x=m.useCallback(J=>{!J||J===1/0||(window.clearTimeout(T.current),$.current=new Date().getTime(),T.current=window.setTimeout(N,J))},[N]);m.useEffect(()=>{const J=_.viewport;if(J){const Le=()=>{x(R.current),u==null||u()},tt=()=>{const gt=new Date().getTime()-$.current;R.current=R.current-gt,window.clearTimeout(T.current),l==null||l()};return J.addEventListener(cy,tt),J.addEventListener(uy,Le),()=>{J.removeEventListener(cy,tt),J.removeEventListener(uy,Le)}}},[_.viewport,V,l,u,x]),m.useEffect(()=>{s&&!_.isClosePausedRef.current&&x(V)},[s,V,_.isClosePausedRef,x]),m.useEffect(()=>(A(),()=>k()),[A,k]);const C=m.useMemo(()=>I?TD(I):null,[I]);return _.viewport?m.createElement(m.Fragment,null,C&&m.createElement(Gq,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0},C),m.createElement(Wq,{scope:n,onClose:N},pu.createPortal(m.createElement(b0.ItemSlot,{scope:n},m.createElement(Aq,{asChild:!0,onEscapeKeyDown:it(a,()=>{_.isFocusedToastEscapeKeyDownRef.current||N(),_.isFocusedToastEscapeKeyDownRef.current=!1})},m.createElement(at.li,he({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":_.swipeDirection},E,{ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:it(t.onKeyDown,J=>{J.key==="Escape"&&(a==null||a(J.nativeEvent),J.nativeEvent.defaultPrevented||(_.isFocusedToastEscapeKeyDownRef.current=!0,N()))}),onPointerDown:it(t.onPointerDown,J=>{J.button===0&&(b.current={x:J.clientX,y:J.clientY})}),onPointerMove:it(t.onPointerMove,J=>{if(!b.current)return;const Le=J.clientX-b.current.x,tt=J.clientY-b.current.y,gt=!!D.current,W=["left","right"].includes(_.swipeDirection),ee=["left","up"].includes(_.swipeDirection)?Math.min:Math.max,te=W?ee(0,Le):0,we=W?0:ee(0,tt),ae=J.pointerType==="touch"?10:2,ie={x:te,y:we},Dn={originalEvent:J,delta:ie};gt?(D.current=ie,Dd(jq,h,Dn,{discrete:!1})):f1(ie,_.swipeDirection,ae)?(D.current=ie,Dd(Uq,d,Dn,{discrete:!1}),J.target.setPointerCapture(J.pointerId)):(Math.abs(Le)>ae||Math.abs(tt)>ae)&&(b.current=null)}),onPointerUp:it(t.onPointerUp,J=>{const Le=D.current,tt=J.target;if(tt.hasPointerCapture(J.pointerId)&&tt.releasePointerCapture(J.pointerId),D.current=null,b.current=null,Le){const gt=J.currentTarget,W={originalEvent:J,delta:Le};f1(Le,_.swipeDirection,_.swipeThreshold)?Dd(zq,v,W,{discrete:!0}):Dd(Bq,p,W,{discrete:!0}),gt.addEventListener("click",ee=>ee.preventDefault(),{once:!0})}})})))),_.viewport))):null});yD.propTypes={type(t){if(t.type&&!["foreground","background"].includes(t.type)){const e=`Invalid prop \`type\` supplied to \`${Ap}\`. Expected \`foreground | background\`.`;return new Error(e)}return null}};const Gq=t=>{const{__scopeToast:e,children:n,...r}=t,i=Rp(Ap,e),[s,o]=m.useState(!1),[a,l]=m.useState(!1);return Jq(()=>o(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:m.createElement(Cq,{asChild:!0},m.createElement(pD,r,s&&m.createElement(m.Fragment,null,i.label," ",n)))},Hq=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return m.createElement(at.div,he({},r,{ref:e}))}),Qq=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return m.createElement(at.div,he({},r,{ref:e}))}),Yq="ToastAction",_D=m.forwardRef((t,e)=>{const{altText:n,...r}=t;return n?m.createElement(ED,{altText:n,asChild:!0},m.createElement(wD,he({},r,{ref:e}))):null});_D.propTypes={altText(t){return t.altText?null:new Error(`Missing prop \`altText\` expected on \`${Yq}\``)}};const Xq="ToastClose",wD=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=Kq(Xq,n);return m.createElement(ED,{asChild:!0},m.createElement(at.button,he({type:"button"},r,{ref:e,onClick:it(t.onClick,i.onClose)})))}),ED=m.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return m.createElement(at.div,he({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0},i,{ref:e}))});function TD(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Zq(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...TD(r))}}),e}function Dd(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?I0(i,s):i.dispatchEvent(s)}const f1=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function Jq(t=()=>{}){const e=yn(t);lu(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function Zq(t){return t.nodeType===t.ELEMENT_NODE}function eW(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function cg(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}const tW=vD,ID=Fq,bD=qq,SD=Hq,RD=Qq,AD=_D,PD=wD;function CD(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=CD(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function kD(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=CD(t))&&(r&&(r+=" "),r+=e);return r}const p1=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,m1=kD,S0=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return m1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],h=s==null?void 0:s[u];if(d===null)return null;const p=p1(d)||p1(h);return i[u][p]}),a=n&&Object.entries(n).reduce((u,d)=>{let[h,p]=d;return p===void 0||(u[h]=p),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:p,...v}=d;return Object.entries(v).every(E=>{let[_,I]=E;return Array.isArray(I)?I.includes({...s,...a}[_]):{...s,...a}[_]===I})?[...u,h,p]:u},[]);return m1(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nW=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xD=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iW=m.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>m.createElement("svg",{ref:l,...rW,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:xD("lucide",i),...a},[...o.map(([u,d])=>m.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=(t,e)=>{const n=m.forwardRef(({className:r,...i},s)=>m.createElement(iW,{ref:s,iconNode:e,className:xD(`lucide-${nW(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sW=vo("AlignJustify",[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oW=vo("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aW=vo("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lW=vo("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cW=vo("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uW=vo("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=vo("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function dW(){for(var t=0,e,n,r="";t<arguments.length;)(e=arguments[t++])&&(n=DD(e))&&(r&&(r+=" "),r+=n);return r}function DD(t){if(typeof t=="string")return t;for(var e,n="",r=0;r<t.length;r++)t[r]&&(e=DD(t[r]))&&(n&&(n+=" "),n+=e);return n}var A0="-";function hW(t){var e=pW(t),n=t.conflictingClassGroups,r=t.conflictingClassGroupModifiers,i=r===void 0?{}:r;function s(a){var l=a.split(A0);return l[0]===""&&l.length!==1&&l.shift(),ND(l,e)||fW(a)}function o(a,l){var u=n[a]||[];return l&&i[a]?[].concat(u,i[a]):u}return{getClassGroupId:s,getConflictingClassGroupIds:o}}function ND(t,e){var o;if(t.length===0)return e.classGroupId;var n=t[0],r=e.nextPart.get(n),i=r?ND(t.slice(1),r):void 0;if(i)return i;if(e.validators.length!==0){var s=t.join(A0);return(o=e.validators.find(function(a){var l=a.validator;return l(s)}))==null?void 0:o.classGroupId}}var g1=/^\[(.+)\]$/;function fW(t){if(g1.test(t)){var e=g1.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function pW(t){var e=t.theme,n=t.prefix,r={nextPart:new Map,validators:[]},i=gW(Object.entries(t.classGroups),n);return i.forEach(function(s){var o=s[0],a=s[1];dy(a,r,o,e)}),r}function dy(t,e,n,r){t.forEach(function(i){if(typeof i=="string"){var s=i===""?e:v1(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(mW(i)){dy(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(function(o){var a=o[0],l=o[1];dy(l,v1(e,a),n,r)})})}function v1(t,e){var n=t;return e.split(A0).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function mW(t){return t.isThemeGetter}function gW(t,e){return e?t.map(function(n){var r=n[0],i=n[1],s=i.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var l=a[0],u=a[1];return[e+l,u]})):o});return[r,s]}):t}function vW(t){if(t<1)return{get:function(){},set:function(){}};var e=0,n=new Map,r=new Map;function i(s,o){n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get:function(o){var a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return i(o,a),a},set:function(o,a){n.has(o)?n.set(o,a):i(o,a)}}}var OD="!";function yW(t){var e=t.separator||":",n=e.length===1,r=e[0],i=e.length;return function(o){for(var a=[],l=0,u=0,d,h=0;h<o.length;h++){var p=o[h];if(l===0){if(p===r&&(n||o.slice(h,h+i)===e)){a.push(o.slice(u,h)),u=h+i;continue}if(p==="/"){d=h;continue}}p==="["?l++:p==="]"&&l--}var v=a.length===0?o:o.substring(u),E=v.startsWith(OD),_=E?v.substring(1):v,I=d&&d>u?d-u:void 0;return{modifiers:a,hasImportantModifier:E,baseClassName:_,maybePostfixModifierPosition:I}}}function _W(t){if(t.length<=1)return t;var e=[],n=[];return t.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,n.sort().concat([r])),n=[]):n.push(r)}),e.push.apply(e,n.sort()),e}function wW(t){return{cache:vW(t.cacheSize),splitModifiers:yW(t),...hW(t)}}var EW=/\s+/;function TW(t,e){var n=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,s=new Set;return t.trim().split(EW).map(function(o){var a=n(o),l=a.modifiers,u=a.hasImportantModifier,d=a.baseClassName,h=a.maybePostfixModifierPosition,p=r(h?d.substring(0,h):d),v=!!h;if(!p){if(!h)return{isTailwindClass:!1,originalClassName:o};if(p=r(d),!p)return{isTailwindClass:!1,originalClassName:o};v=!1}var E=_W(l).join(":"),_=u?E+OD:E;return{isTailwindClass:!0,modifierId:_,classGroupId:p,originalClassName:o,hasPostfixModifier:v}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,l=o.classGroupId,u=o.hasPostfixModifier,d=a+l;return s.has(d)?!1:(s.add(d),i(l,u).forEach(function(h){return s.add(a+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function IW(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i,s,o=a;function a(u){var d=e[0],h=e.slice(1),p=h.reduce(function(v,E){return E(v)},d());return r=wW(p),i=r.cache.get,s=r.cache.set,o=l,l(u)}function l(u){var d=i(u);if(d)return d;var h=TW(u,r);return s(u,h),h}return function(){return o(dW.apply(null,arguments))}}function ke(t){var e=function(r){return r[t]||[]};return e.isThemeGetter=!0,e}var LD=/^\[(?:([a-z-]+):)?(.+)\]$/i,bW=/^\d+\/\d+$/,SW=new Set(["px","full","screen"]),RW=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,AW=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,PW=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Kn(t){return Ns(t)||SW.has(t)||bW.test(t)||hy(t)}function hy(t){return yo(t,"length",OW)}function CW(t){return yo(t,"size",VD)}function kW(t){return yo(t,"position",VD)}function xW(t){return yo(t,"url",LW)}function Nd(t){return yo(t,"number",Ns)}function Ns(t){return!Number.isNaN(Number(t))}function DW(t){return t.endsWith("%")&&Ns(t.slice(0,-1))}function Fl(t){return y1(t)||yo(t,"number",y1)}function le(t){return LD.test(t)}function $l(){return!0}function mi(t){return RW.test(t)}function NW(t){return yo(t,"",VW)}function yo(t,e,n){var r=LD.exec(t);return r?r[1]?r[1]===e:n(r[2]):!1}function OW(t){return AW.test(t)}function VD(){return!1}function LW(t){return t.startsWith("url(")}function y1(t){return Number.isInteger(Number(t))}function VW(t){return PW.test(t)}function MW(){var t=ke("colors"),e=ke("spacing"),n=ke("blur"),r=ke("brightness"),i=ke("borderColor"),s=ke("borderRadius"),o=ke("borderSpacing"),a=ke("borderWidth"),l=ke("contrast"),u=ke("grayscale"),d=ke("hueRotate"),h=ke("invert"),p=ke("gap"),v=ke("gradientColorStops"),E=ke("gradientColorStopPositions"),_=ke("inset"),I=ke("margin"),w=ke("opacity"),y=ke("padding"),b=ke("saturate"),D=ke("scale"),V=ke("sepia"),$=ke("skew"),R=ke("space"),T=ke("translate"),A=function(){return["auto","contain","none"]},k=function(){return["auto","hidden","clip","visible","scroll"]},N=function(){return["auto",le,e]},x=function(){return[le,e]},C=function(){return["",Kn]},J=function(){return["auto",Ns,le]},Le=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},tt=function(){return["solid","dashed","dotted","double","none"]},gt=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},W=function(){return["start","end","center","between","around","evenly","stretch"]},ee=function(){return["","0",le]},te=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},we=function(){return[Ns,Nd]},ae=function(){return[Ns,le]};return{cacheSize:500,theme:{colors:[$l],spacing:[Kn],blur:["none","",mi,le],brightness:we(),borderColor:[t],borderRadius:["none","","full",mi,le],borderSpacing:x(),borderWidth:C(),contrast:we(),grayscale:ee(),hueRotate:ae(),invert:ee(),gap:x(),gradientColorStops:[t],gradientColorStopPositions:[DW,hy],inset:N(),margin:N(),opacity:we(),padding:x(),saturate:we(),scale:we(),sepia:ee(),skew:ae(),space:x(),translate:x()},classGroups:{aspect:[{aspect:["auto","square","video",le]}],container:["container"],columns:[{columns:[mi]}],"break-after":[{"break-after":te()}],"break-before":[{"break-before":te()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(Le(),[le])}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Fl]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",le]}],grow:[{grow:ee()}],shrink:[{shrink:ee()}],order:[{order:["first","last","none",Fl]}],"grid-cols":[{"grid-cols":[$l]}],"col-start-end":[{col:["auto",{span:["full",Fl]},le]}],"col-start":[{"col-start":J()}],"col-end":[{"col-end":J()}],"grid-rows":[{"grid-rows":[$l]}],"row-start-end":[{row:["auto",{span:[Fl]},le]}],"row-start":[{"row-start":J()}],"row-end":[{"row-end":J()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",le]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",le]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal"].concat(W())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(W(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(W(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[I]}],mx:[{mx:[I]}],my:[{my:[I]}],ms:[{ms:[I]}],me:[{me:[I]}],mt:[{mt:[I]}],mr:[{mr:[I]}],mb:[{mb:[I]}],ml:[{ml:[I]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",le,e]}],"min-w":[{"min-w":["min","max","fit",le,Kn]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[mi]},mi,le]}],h:[{h:[le,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",le,Kn]}],"max-h":[{"max-h":[le,e,"min","max","fit"]}],"font-size":[{text:["base",mi,hy]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Nd]}],"font-family":[{font:[$l]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",le]}],"line-clamp":[{"line-clamp":["none",Ns,Nd]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",le,Kn]}],"list-image":[{"list-image":["none",le]}],"list-style-type":[{list:["none","disc","decimal",le]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(tt(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Kn]}],"underline-offset":[{"underline-offset":["auto",le,Kn]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(Le(),[kW])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",CW]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},xW]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[].concat(tt(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:tt()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(tt())}],"outline-offset":[{"outline-offset":[le,Kn]}],"outline-w":[{outline:[Kn]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Kn]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",mi,NW]}],"shadow-color":[{shadow:[$l]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":gt()}],"bg-blend":[{"bg-blend":gt()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",mi,le]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[V]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[V]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",le]}],duration:[{duration:ae()}],ease:[{ease:["linear","in","out","in-out",le]}],delay:[{delay:ae()}],animate:[{animate:["none","spin","ping","pulse","bounce",le]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[D]}],"scale-x":[{"scale-x":[D]}],"scale-y":[{"scale-y":[D]}],rotate:[{rotate:[Fl,le]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[$]}],"skew-y":[{"skew-y":[$]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",le]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",le]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",le]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Kn,Nd]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var FW=IW(MW);function Ke(...t){return FW(kD(t))}const $W=tW,MD=m.forwardRef(({className:t,...e},n)=>P.jsx(ID,{ref:n,className:Ke("fixed top-4 right-4 z-[100] flex max-h-screen w-full flex-col-reverse gap-2 sm:flex-col md:max-w-[420px]",t),...e}));MD.displayName=ID.displayName;const UW=S0("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),FD=m.forwardRef(({className:t,variant:e,...n},r)=>P.jsx(bD,{ref:r,className:Ke(UW({variant:e}),t),...n}));FD.displayName=bD.displayName;const jW=m.forwardRef(({className:t,...e},n)=>P.jsx(AD,{ref:n,className:Ke("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));jW.displayName=AD.displayName;const $D=m.forwardRef(({className:t,...e},n)=>P.jsx(PD,{ref:n,className:Ke("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-100 transition-opacity hover:text-foreground focus:outline-none focus:ring-2 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:P.jsx(R0,{className:"h-4 w-4"})}));$D.displayName=PD.displayName;const UD=m.forwardRef(({className:t,...e},n)=>P.jsx(SD,{ref:n,className:Ke("text-sm font-semibold",t),...e}));UD.displayName=SD.displayName;const jD=m.forwardRef(({className:t,...e},n)=>P.jsx(RD,{ref:n,className:Ke("text-sm opacity-90",t),...e}));jD.displayName=RD.displayName;const BW=1,BD=5e3;let ug=0;function zW(){return ug=(ug+1)%Number.MAX_SAFE_INTEGER,ug.toString()}const dg=new Map,_1=t=>{if(dg.has(t))return;const e=setTimeout(()=>{dg.delete(t),_c({type:"REMOVE_TOAST",toastId:t})},BD);dg.set(t,e)},qW=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,BW)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?_1(n):t.toasts.forEach(r=>{_1(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},dh=[];let hh={toasts:[]};function _c(t){hh=qW(hh,t),dh.forEach(e=>{e(hh)})}function WW({...t}){const e=zW(),n=i=>_c({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>_c({type:"DISMISS_TOAST",toastId:e});return setTimeout(r,BD),_c({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function KW(){const[t,e]=m.useState(hh);return m.useEffect(()=>(dh.push(e),()=>{const n=dh.indexOf(e);n>-1&&dh.splice(n,1)}),[t]),{...t,toast:WW,dismiss:n=>_c({type:"DISMISS_TOAST",toastId:n})}}function GW(){const{toasts:t}=KW();return P.jsxs($W,{children:[t.map(function({id:e,title:n,description:r,action:i,...s}){return P.jsxs(FD,{...s,children:[P.jsxs("div",{className:"grid gap-1",children:[n&&P.jsx(UD,{children:n}),r&&P.jsx(jD,{children:r})]}),i,P.jsx($D,{})]},e)}),P.jsx(MD,{})]})}const Pp=(t,e)=>{const[n,r]=m.useState(null),[i,s]=m.useState(null);return m.useEffect(()=>{if(!t||!e)return;const o=Vu(Se(pe,t,e),a=>{a.data()?(r({...a.data(),id:a.id}),s(null)):(s("Dados não encontrados."),r(void 0),console.log(`Dados não encontrados. Collection: ${t}, ID: ${e}`))},a=>{s(a.message),r(void 0),console.log(a.message),console.log("Erro ao ler documento da coleção:",t,"com ID:",e)});return()=>o()},[t,e]),{document:n,error:i}};function An(){return lD(),P.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"transparent"},children:P.jsx("img",{src:"/Logo icone app_Transparente_App, loading, botão início (1).png",alt:"Carregando Petzia",className:"petzia-logo-loading",style:{width:80,height:80,animation:"spin 1.2s linear infinite"}})})}const zD=m.createContext();function HW({children:t,user:e}){const{document:n,error:r}=Pp("users",e.uid),[i,s]=m.useState(!1);return m.useEffect(()=>{(async()=>{if(r&&!i){s(!0);try{const a=Se(pe,"users",e.uid);(await ua(a)).exists()||(console.log("Criando documento de usuário para:",e.uid),await Fi(a,{id:e.uid,online:!0,createdAt:new Date,email:e.email,name:e.displayName||"",phone:"",user_agent:navigator.userAgent,origin:window.location.href.split("?")[0],plan:{status:"active",type:"free"}}),console.log("Documento de usuário criado com sucesso!"))}catch(a){console.error("Erro ao criar documento de usuário:",a)}finally{s(!1)}}})()},[e,r,i]),i?P.jsx(An,{}):!n&&!i?P.jsx(An,{}):P.jsx(zD.Provider,{value:{userDoc:n},children:t})}const QW=m.createContext();function YW({children:t,user:e}){const{document:n}=Pp("referrals2",e.uid);return n===null?P.jsx(An,{}):P.jsx(QW.Provider,{value:{referrerDoc2:n},children:t})}const qD=m.createContext();function XW({children:t}){const{user:e}=us(),[n,r]=m.useState([]),[i,s]=m.useState(!0),[o,a]=m.useState(null);m.useEffect(()=>{if(!e){console.log("Usuário não autenticado"),s(!1);return}console.log("Iniciando busca de vacinas para o usuário:",e.uid),s(!0),a(null);const d=En(Tn(pe,"users",e.uid,"health_records"),df("date","desc")),h=Vu(d,p=>{console.log("Snapshot recebido:",p.docs.length,"documentos");const v=p.docs.map(E=>({id:E.id,...E.data()}));console.log("Lista de vacinas processada:",v),r(v),s(!1),a(null)},p=>{console.error("Erro ao buscar vacinas:",p),a(p.message),s(!1)});return()=>h()},[e]);const l=async d=>{if(e)try{console.log("Adicionando nova vacina:",d);const h=await hf(Tn(pe,"users",e.uid,"health_records"),{...d,userId:e.uid,createdAt:an()});return console.log("Vacina adicionada com ID:",h.id),h.id}catch(h){throw console.error("Erro ao adicionar vacina:",h),a(h.message),h}},u=async(d,h)=>{if(e)try{const p={status:h};h==="Aplicada"&&(p.appliedDate=new Date),await Ji(Se(pe,"users",e.uid,"health_records",d),p)}catch(p){throw console.error("Erro ao atualizar status da vacina:",p),a(p.message),p}};return P.jsx(qD.Provider,{value:{vaccines:n,loading:i,error:o,addVaccine:l,updateVaccineStatus:u},children:t})}const BQ=()=>{const t=m.useContext(qD);if(!t)throw new Error("useVaccineContext deve ser usado dentro de um VaccineProvider");return t},or={initializeDashboard:async t=>{try{const e=Se(pe,"dashboards",t),n={userId:t,lastUpdated:an(),mood:"neutral",activities:{food:{lastEntry:null,totalEntries:0,streak:0},walk:{lastEntry:null,totalEntries:0,streak:0}},health:{vaccines:{lastVaccine:null,nextVaccine:null,status:"up_to_date"},checkups:{lastCheckup:null,nextCheckup:null}},training:{completedLessons:0,totalTime:0,currentLevel:"beginner",lastSession:null}};return await Fi(e,n),n}catch(e){throw console.error("Error initializing dashboard:",e),e}},getRecentVaccines:async t=>{try{const e=Tn(pe,"users",t,"health_records"),n=En(e,df("date","desc"),Qv(1)),r=await Jl(n);if(r.empty)return null;const i=r.docs[0].data();console.log("Vacina encontrada:",i);let s=null;if(i.date)try{i.date instanceof Date?s=i.date:typeof i.date=="string"?s=new Date(i.date):i.date.toDate&&(s=i.date.toDate()),isNaN(s.getTime())&&(console.error("Data inválida:",i.date),s=null)}catch(o){console.error("Erro ao converter data:",o),s=null}return{...i,date:s}}catch(e){throw console.error("Error fetching recent vaccines:",e),e}},updateActivity:async(t,e,n)=>{try{const r=Se(pe,"dashboards",t),i=Tn(pe,"activities"),s={...n,userId:t,type:e,createdAt:an()},o=Xm(pe),a=Se(i);o.set(a,s);const l={[`activities.${e}.lastEntry`]:s,[`activities.${e}.totalEntries`]:Qk(1),lastUpdated:an()};return o.update(r,l),await o.commit(),a.id}catch(r){throw console.error(`Error updating ${e} activity:`,r),r}},updateHealth:async(t,e)=>{try{const n=Se(pe,"dashboards",t),r=Tn(pe,"users",t,"health_records"),i=Xm(pe),s=Se(r),o={...e,userId:t,timestamp:an(),createdAt:an()};i.set(s,o);const a=await or.getRecentVaccines(t);return i.update(n,{"health.vaccines.lastVaccine":a,"health.vaccines.status":(a==null?void 0:a.status)==="Aplicada"?"up_to_date":"pending",lastUpdated:an()}),await i.commit(),s.id}catch(n){throw console.error("Error updating health record:",n),n}},updateTraining:async(t,e)=>{try{const n=Se(pe,"dashboards",t),r=Tn(pe,"training_progress"),i=Xm(pe),s=Se(r),o={...e,userId:t,timestamp:an(),createdAt:an()};return i.set(s,o),i.update(n,{training:e,lastUpdated:an()}),await i.commit(),s.id}catch(n){throw console.error("Error updating training progress:",n),n}},getDashboardData:async t=>{var e,n;try{console.log("========== INÍCIO getDashboardData ==========");const r=Se(pe,"dashboards",t),i=await ua(r);if(!i.exists())return await or.initializeDashboard(t);const s=i.data();try{console.log("========== BUSCANDO VACINAS ==========");const l=Tn(pe,"users",t,"health_records"),u=En(l,Xl("type","==","vaccine")),d=await Jl(u);if(d.empty)console.log("Nenhuma vacina encontrada");else{console.log(`Encontradas ${d.size} vacinas no total`);const h=d.docs.map(p=>({id:p.id,...p.data()})).filter(p=>p.status==="Aplicada");if(console.log(`Total de vacinas aplicadas: ${h.length}`),h.forEach((p,v)=>{const E=p.date?p.date.toDate?p.date.toDate().toISOString():p.date:"sem data";console.log(`Vacina aplicada ${v+1}: ${p.name}, Data: ${E}, Doc ID: ${p.id}`)}),h.sort((p,v)=>{const E=_=>{const I=_.date;if(!I)return 0;try{return I.toDate?I.toDate().getTime():typeof I=="string"?new Date(I).getTime():I.seconds?I.seconds*1e3:0}catch(w){return console.error("Erro ao converter data para ordenação:",w),0}};return E(v)-E(p)}),console.log("Vacinas ordenadas por data (mais recente primeiro):"),h.forEach((p,v)=>{const E=p.date?p.date.toDate?p.date.toDate().toISOString():p.date:"sem data";console.log(`${v+1}: ${p.name}, Data: ${E}, Doc ID: ${p.id}`)}),h.length>0){const p=h[0];console.log("Vacina mais recente selecionada:",p);let v=null;if(p.date)try{p.date.toDate?v=p.date.toDate():typeof p.date=="string"?v=new Date(p.date):p.date.seconds&&(v=new Date(p.date.seconds*1e3)),console.log("Data extraída da vacina mais recente:",v)}catch(E){console.error("Erro ao processar data da vacina:",E)}v&&!isNaN(v.getTime())&&(console.log("Atualizando dashboard com a vacina mais recente de",v),s.health||(s.health={}),s.health.vaccines||(s.health.vaccines={}),s.health.vaccines.lastVaccine={...p,date:v},s.health.vaccines.status="up_to_date",await Ji(r,{"health.vaccines.lastVaccine":{...p,date:v},"health.vaccines.status":"up_to_date",lastUpdated:an()}),console.log("Dashboard atualizado com sucesso com a vacina mais recente"))}}}catch(l){console.error("Erro ao buscar vacina mais recente:",l)}const o=await ua(r);if(o.exists()){const l=o.data();(n=(e=l.health)==null?void 0:e.vaccines)!=null&&n.lastVaccine&&(s.health=l.health,console.log("Dashboard recarregado com dados atualizados de vacina"))}const a=await or.getLatestDiaryEntries(t);if(console.log("Entradas mais recentes do diário:",a),a.passeio)if(a.passeio.date&&!isNaN(a.passeio.date.getTime())){console.log("Data válida do último passeio encontrada:",a.passeio.date.toLocaleString()),a.passeio.timestamp||(a.passeio.timestamp=a.passeio.date);const l={...a.passeio,date:a.passeio.date,timestamp:a.passeio.date};s.lastWalkEntry=l,console.log("Último passeio adicionado como lastWalkEntry com timestamp válido"),s.activities||(s.activities={}),s.activities.walk||(s.activities.walk={lastEntry:null,totalEntries:0,streak:0}),s.activities.walk.lastEntry={timestamp:a.passeio.date,details:l,type:"walk"},console.log("Último passeio atualizado na estrutura antiga")}else console.error("Data do último passeio é inválida ou não está disponível");else console.log("Nenhum registro de passeio encontrado");if(a.alimentacao)if(a.alimentacao.date&&!isNaN(a.alimentacao.date.getTime())){console.log("Data válida da última alimentação encontrada:",a.alimentacao.date.toLocaleString()),console.log("Intervalo de alimentação configurado:",a.alimentacao.feedingInterval||"8 (padrão)"),a.alimentacao.timestamp||(a.alimentacao.timestamp=a.alimentacao.date);const l={...a.alimentacao,date:a.alimentacao.date,timestamp:a.alimentacao.date};s.lastFoodEntry=l,console.log("Última alimentação adicionada como lastFoodEntry com timestamp válido"),s.activities||(s.activities={}),s.activities.food||(s.activities.food={lastEntry:null,totalEntries:0,streak:0}),s.activities.food.lastEntry={timestamp:a.alimentacao.date,details:l,type:"food"},console.log("Última alimentação atualizada na estrutura antiga")}else console.error("Data da última alimentação é inválida ou não está disponível");else console.log("Nenhum registro de alimentação encontrado");try{const l={};if(a.passeio&&a.passeio.date&&!isNaN(a.passeio.date.getTime())){const u={...a.passeio};u.date=ye.fromDate(a.passeio.date),u.timestamp=ye.fromDate(a.passeio.date),l.lastWalkEntry=u,l["activities.walk.lastEntry"]={timestamp:ye.fromDate(a.passeio.date),details:u,type:"walk"}}if(a.alimentacao&&a.alimentacao.date&&!isNaN(a.alimentacao.date.getTime())){const u={...a.alimentacao};u.date=ye.fromDate(a.alimentacao.date),u.timestamp=ye.fromDate(a.alimentacao.date),l.lastFoodEntry=u,l["activities.food.lastEntry"]={timestamp:ye.fromDate(a.alimentacao.date),details:u,type:"food"}}Object.keys(l).length>0?(l.lastUpdated=an(),console.log("Atualizando dashboard com dados de timestamp para Firestore"),await Ji(r,l),console.log("Dashboard atualizado com sucesso no Firestore")):console.log("Nenhum dado para atualizar no dashboard")}catch(l){console.error("Erro ao atualizar dashboard com dados do diário:",l)}return console.log("========== FIM getDashboardData =========="),s}catch(r){throw console.error("Error fetching dashboard data:",r),r}},getDocumentDirectly:async t=>{try{const e=await ua(t);return e.exists()?e.data():(console.log("Documento não encontrado"),null)}catch(e){throw console.error("Erro ao buscar documento diretamente:",e),e}},getActivityHistory:async(t,e,n=10)=>{try{const r=Tn(pe,"activities"),i=En(r,Xl("userId","==",t),Xl("type","==",e),df("timestamp","desc"),Qv(n));return(await Jl(i)).docs.map(o=>{var a;return{id:o.id,...o.data(),timestamp:(a=o.data().timestamp)==null?void 0:a.toDate()}})}catch(r){throw console.error(`Error fetching ${e} history:`,r),r}},getLatestDiaryEntries:async(t,e=["alimentacao","passeio"])=>{try{const n=Tn(pe,"diary"),r={},i=En(n,Xl("userId","==",t)),s=await Jl(i);if(s.empty)return console.log("Nenhum registro de diário encontrado para o usuário"),{};console.log(`Encontrados ${s.size} registros de diário`),s.docs.forEach(a=>{const l=a.data();let u="sem data";try{l.date&&(l.date.toDate?u=l.date.toDate().toISOString():l.date.seconds?u=new Date(l.date.seconds*1e3).toISOString():u=String(l.date))}catch(d){u=`Erro ao processar data: ${d.message}`}console.log(`ID: ${a.id}, Categoria: ${l.category}, Data: ${u}`)});const o=s.docs.map(a=>({id:a.id,...a.data()})).sort((a,l)=>{const u=d=>{if(!d)return 0;try{if(d.toDate)return d.toDate().getTime();if(typeof d=="string"||d instanceof Date)return new Date(d).getTime();if(d.seconds)return d.seconds*1e3}catch(h){return console.error("Erro ao processar data para ordenação:",h,d),0}};return u(l.date)-u(a.date)});console.log("Registros ordenados:"),o.slice(0,5).forEach((a,l)=>{let u="sem data";try{a.date&&(a.date.toDate?u=a.date.toDate().toLocaleString():a.date.seconds?u=new Date(a.date.seconds*1e3).toLocaleString():a.date instanceof Date?u=a.date.toLocaleString():u=String(a.date))}catch(d){u=`Erro ao processar data: ${d.message}`}console.log(`${l+1}: Categoria: ${a.category}, Data: ${u}`),(a.category==="alimentacao"||a.category==="alimentação")&&console.log(`   Intervalo de alimentação: ${a.feedingInterval||"não definido"}`)});for(const a of e){const l=a==="alimentacao"?["alimentacao","alimentação","comida","food","Alimentação","ALIMENTACAO","Alimentacao"]:a==="passeio"?["passeio","passeios","walk","walks","Passeio","PASSEIO"]:[a,a.toLowerCase(),a.toUpperCase()],u=o.find(d=>l.includes(d.category));if(u){console.log(`Registro encontrado para ${a}:`,JSON.stringify(u,(p,v)=>v&&typeof v=="object"&&v.toDate?`Timestamp: ${v.toDate().toLocaleString()}`:v)),a==="alimentacao"&&!u.feedingInterval&&(console.log("Intervalo de alimentação não encontrado, usando padrão de 8 horas"),u.feedingInterval="8");let d=null;try{u.date&&(u.date.toDate?(d=u.date.toDate(),console.log(`Data convertida via toDate(): ${d.toLocaleString()}`)):u.date.seconds?(d=new Date(u.date.seconds*1e3),console.log(`Data convertida via seconds: ${d.toLocaleString()}`)):typeof u.date=="string"?(d=new Date(u.date),console.log(`Data convertida via construtor Date (string): ${d.toLocaleString()}`)):u.date instanceof Date&&(d=u.date,console.log(`Data mantida como objeto Date: ${d.toLocaleString()}`)),!d||isNaN(d.getTime())?(console.error("Data inválida após conversão:",d),d=null):console.log(`Data válida convertida para ${a}: ${d.toLocaleString()}`))}catch(p){console.error(`Erro ao converter data para ${a}:`,p),d=null}d||console.error(`ATENÇÃO: Não foi possível converter a data para ${a}. Vai ficar null.`);const h={...u};delete h.date,r[a]={...h,id:u.id,date:d,timestamp:d},console.log(`Resultado final para ${a}:`,r[a]),r[a].date?console.log(`Data final para ${a}: ${r[a].date.toLocaleString()}`):console.error(`NENHUMA DATA VÁLIDA PARA ${a}`)}else console.log(`Nenhum registro de ${a} encontrado`),r[a]=null}return r}catch(n){return console.error("Error fetching latest diary entries:",n),{}}}},WD=m.createContext(),JW=({children:t})=>{const{user:e}=m.useContext(bp),[n,r]=m.useState(null),[i,s]=m.useState(!0),[o,a]=m.useState(null),l=async()=>{if(!e){s(!1);return}try{s(!0),a(null);try{const v=await or.getDashboardData(e.uid);console.log("Dashboard data loaded:",v),r(v)}catch(v){console.error("Error loading dashboard data:",v);try{console.log("Tentando carregar apenas dados básicos do dashboard...");const E=Se(pe,"dashboards",e.uid),_=await or.getDocumentDirectly(E);if(_)console.log("Dados básicos do dashboard carregados com sucesso:",_),r(_);else{console.log("Inicializando dashboard vazio...");const I=await or.initializeDashboard(e.uid);r(I)}}catch(E){console.error("Erro ao carregar dados básicos do dashboard:",E),a("Erro ao carregar dados do dashboard"),r({activities:{food:{lastEntry:null},walk:{lastEntry:null}},health:{vaccines:{lastVaccine:null}}})}}}catch(v){console.error("Error in dashboard loading process:",v),a("Erro ao carregar dados do dashboard"),r({activities:{food:{lastEntry:null},walk:{lastEntry:null}},health:{vaccines:{lastVaccine:null}}})}finally{s(!1)}};m.useEffect(()=>{if(!e)return;const v=Se(pe,"dashboards",e.uid);let E=0;const _=Vu(v,async I=>{if(I.exists()){const w=I.data(),y=w.lastUpdated&&w.lastUpdated.seconds?w.lastUpdated.seconds:Date.now()/1e3;if(y>E+2){E=y;try{const b=await or.getDashboardData(e.uid);r(b)}catch(b){console.error("Erro ao atualizar dados completos:",b),r(w)}}}},I=>{console.error("Error listening to dashboard updates:",I)});return()=>_()},[e]),m.useEffect(()=>{l()},[e]);const p={dashboardData:n,loading:i,error:o,updateActivity:async(v,E)=>{try{await or.updateActivity(e.uid,v,E),await l()}catch(_){throw console.error(`Error updating ${v} activity:`,_),_}},updateHealth:async v=>{try{await or.updateHealth(e.uid,v)}catch(E){throw console.error("Error updating health data:",E),E}},updateTraining:async v=>{try{await or.updateTraining(e.uid,v)}catch(E){throw console.error("Error updating training data:",E),E}},refreshData:l};return P.jsx(WD.Provider,{value:p,children:t})},zQ=()=>{const t=m.useContext(WD);if(!t)throw Error("useDashboard must be inside a DashboardProvider");return t},KD=t=>{const[e,n]=m.useState(window.matchMedia(t).matches);return m.useEffect(()=>{const r=window.matchMedia(t),i=s=>n(s.matches);return r.addEventListener("change",i),()=>r.removeEventListener("change",i)},[t]),e},ZW=S0("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",xs:"h-8 rounded-md px-2",sm:"h-9 rounded-md px-2",md:"h-10 rounded-md px-2",lg:"h-11 rounded-md px-8",icon:"h-10 w-10",smallIcon:"h-8 w-8"}},defaultVariants:{variant:"default",size:"default"}}),P0=m.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?Va:"button";return P.jsx(o,{className:Ke(ZW({variant:e,size:n,className:t})),ref:s,...i})});P0.displayName="Button";function Cp(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var eK=["color"],qQ=m.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Cp(t,eK);return m.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),m.createElement("path",{d:"M14.7649 6.07596C14.9991 6.22231 15.0703 6.53079 14.9239 6.76495C14.4849 7.46743 13.9632 8.10645 13.3702 8.66305L14.5712 9.86406C14.7664 10.0593 14.7664 10.3759 14.5712 10.5712C14.3759 10.7664 14.0593 10.7664 13.8641 10.5712L12.6011 9.30817C11.805 9.90283 10.9089 10.3621 9.93375 10.651L10.383 12.3277C10.4544 12.5944 10.2961 12.8685 10.0294 12.94C9.76267 13.0115 9.4885 12.8532 9.41704 12.5865L8.95917 10.8775C8.48743 10.958 8.00036 10.9999 7.50001 10.9999C6.99965 10.9999 6.51257 10.958 6.04082 10.8775L5.58299 12.5864C5.51153 12.8532 5.23737 13.0115 4.97064 12.94C4.7039 12.8686 4.5456 12.5944 4.61706 12.3277L5.06625 10.651C4.09111 10.3621 3.19503 9.90282 2.3989 9.30815L1.1359 10.5712C0.940638 10.7664 0.624058 10.7664 0.428798 10.5712C0.233537 10.3759 0.233537 10.0593 0.428798 9.86405L1.62982 8.66303C1.03682 8.10643 0.515113 7.46742 0.0760677 6.76495C-0.0702867 6.53079 0.000898544 6.22231 0.235065 6.07596C0.469231 5.9296 0.777703 6.00079 0.924058 6.23496C1.40354 7.00213 1.989 7.68057 2.66233 8.2427C2.67315 8.25096 2.6837 8.25972 2.69397 8.26898C4.00897 9.35527 5.65537 9.99991 7.50001 9.99991C10.3078 9.99991 12.6564 8.5063 14.076 6.23495C14.2223 6.00079 14.5308 5.9296 14.7649 6.07596Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),tK=["color"],WQ=m.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Cp(t,tK);return m.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),m.createElement("path",{d:"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),nK=["color"],rK=m.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Cp(t,nK);return m.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),m.createElement("path",{d:"M1.84998 7.49998C1.84998 4.66458 4.05979 1.84998 7.49998 1.84998C10.2783 1.84998 11.6515 3.9064 12.2367 5H10.5C10.2239 5 10 5.22386 10 5.5C10 5.77614 10.2239 6 10.5 6H13.5C13.7761 6 14 5.77614 14 5.5V2.5C14 2.22386 13.7761 2 13.5 2C13.2239 2 13 2.22386 13 2.5V4.31318C12.2955 3.07126 10.6659 0.849976 7.49998 0.849976C3.43716 0.849976 0.849976 4.18537 0.849976 7.49998C0.849976 10.8146 3.43716 14.15 7.49998 14.15C9.44382 14.15 11.0622 13.3808 12.2145 12.2084C12.8315 11.5806 13.3133 10.839 13.6418 10.0407C13.7469 9.78536 13.6251 9.49315 13.3698 9.38806C13.1144 9.28296 12.8222 9.40478 12.7171 9.66014C12.4363 10.3425 12.0251 10.9745 11.5013 11.5074C10.5295 12.4963 9.16504 13.15 7.49998 13.15C4.05979 13.15 1.84998 10.3354 1.84998 7.49998Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),iK=["color"],sK=m.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Cp(t,iK);return m.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),m.createElement("path",{d:"M7.81825 1.18188C7.64251 1.00615 7.35759 1.00615 7.18185 1.18188L4.18185 4.18188C4.00611 4.35762 4.00611 4.64254 4.18185 4.81828C4.35759 4.99401 4.64251 4.99401 4.81825 4.81828L7.05005 2.58648V9.49996C7.05005 9.74849 7.25152 9.94996 7.50005 9.94996C7.74858 9.94996 7.95005 9.74849 7.95005 9.49996V2.58648L10.1819 4.81828C10.3576 4.99401 10.6425 4.99401 10.8182 4.81828C10.994 4.64254 10.994 4.35762 10.8182 4.18188L7.81825 1.18188ZM2.5 9.99997C2.77614 9.99997 3 10.2238 3 10.5V12C3 12.5538 3.44565 13 3.99635 13H11.0012C11.5529 13 12 12.5528 12 12V10.5C12 10.2238 12.2239 9.99997 12.5 9.99997C12.7761 9.99997 13 10.2238 13 10.5V12C13 13.104 12.1062 14 11.0012 14H3.99635C2.89019 14 2 13.103 2 12V10.5C2 10.2238 2.22386 9.99997 2.5 9.99997Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});const GD=()=>{const[t,e]=m.useState(!1),[n,r]=m.useState(null),[i,s]=m.useState(!1),{dispatch:o,user:a}=us(),l=async()=>{r(null),s(!0);try{const{uid:u}=a,d=Se(pe,"users",u);await Ji(d,{online:!1}),await h5(oy),o({type:"LOGOUT"}),t||(s(!1),r(null))}catch(u){t||(console.log(u.message),r(u.message),s(!1))}};return m.useEffect(()=>()=>e(!0),[]),{logout:l,error:n,isPending:i}};function HD({size:t,justify:e,isTopBar:n}){const r=t||190;lD();const i=Wa(),s=()=>i("/"),o=()=>"/Logo top bar.png";return P.jsx("div",{role:"button",onClick:s,style:{display:"flex",alignItems:"center",justifyContent:e||"center",height:n?140:"auto"},children:P.jsx("img",{src:o(),style:{height:n?128:"auto",width:n?"auto":r,maxHeight:"100%",objectFit:"contain",display:"block"},alt:"Petzia"})})}function oK(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function aK(...t){return e=>t.forEach(n=>oK(n,e))}var QD=m.forwardRef((t,e)=>{const{children:n,...r}=t,i=m.Children.toArray(n),s=i.find(cK);if(s){const o=s.props.children,a=i.map(l=>l===s?m.Children.count(o)>1?m.Children.only(null):m.isValidElement(o)?o.props.children:null:l);return P.jsx(fy,{...r,ref:e,children:m.isValidElement(o)?m.cloneElement(o,void 0,a):null})}return P.jsx(fy,{...r,ref:e,children:n})});QD.displayName="Slot";var fy=m.forwardRef((t,e)=>{const{children:n,...r}=t;if(m.isValidElement(n)){const i=dK(n);return m.cloneElement(n,{...uK(r,n.props),ref:e?aK(e,i):i})}return m.Children.count(n)>1?m.Children.only(null):null});fy.displayName="SlotClone";var lK=({children:t})=>P.jsx(P.Fragment,{children:t});function cK(t){return m.isValidElement(t)&&t.type===lK}function uK(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function dK(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var hK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],fK=hK.reduce((t,e)=>{const n=m.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?QD:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),P.jsx(a,{...o,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),pK="Separator",w1="horizontal",mK=["horizontal","vertical"],YD=m.forwardRef((t,e)=>{const{decorative:n,orientation:r=w1,...i}=t,s=gK(r)?r:w1,a=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return P.jsx(fK.div,{"data-orientation":s,...a,...i,ref:e})});YD.displayName=pK;function gK(t){return mK.includes(t)}var XD=YD;const JD=m.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>P.jsx(XD,{ref:i,decorative:n,orientation:e,className:Ke("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));JD.displayName=XD.displayName;const ZD="Avatar",[vK,KQ]=Sp(ZD),[yK,eN]=vK(ZD),_K=m.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,s]=m.useState("idle");return m.createElement(yK,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:s},m.createElement(at.span,he({},r,{ref:e})))}),wK="AvatarImage",EK=m.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...s}=t,o=eN(wK,n),a=bK(r),l=yn(u=>{i(u),o.onImageLoadingStatusChange(u)});return lu(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?m.createElement(at.img,he({},s,{ref:e,src:r})):null}),TK="AvatarFallback",IK=m.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,s=eN(TK,n),[o,a]=m.useState(r===void 0);return m.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),o&&s.imageLoadingStatus!=="loaded"?m.createElement(at.span,he({},i,{ref:e})):null});function bK(t){const[e,n]=m.useState("idle");return m.useEffect(()=>{if(!t){n("error");return}let r=!0;const i=new window.Image,s=o=>()=>{r&&n(o)};return n("loading"),i.onload=s("loaded"),i.onerror=s("error"),i.src=t,()=>{r=!1}},[t]),e}const tN=_K,nN=EK,rN=IK,iN=m.forwardRef(({className:t,...e},n)=>P.jsx(tN,{ref:n,className:Ke("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));iN.displayName=tN.displayName;const sN=m.forwardRef(({className:t,...e},n)=>P.jsx(nN,{ref:n,className:Ke("aspect-square h-full w-full",t),...e}));sN.displayName=nN.displayName;const oN=m.forwardRef(({className:t,...e},n)=>P.jsx(rN,{ref:n,className:Ke("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));oN.displayName=rN.displayName;const SK=t=>t?t.split(" ").map(e=>e.charAt(0).toUpperCase()).join(""):"",RK=J1.useId||(()=>{});let AK=0;function hg(t){const[e,n]=m.useState(RK());return lu(()=>{t||n(r=>r??String(AK++))},[t]),t||(e?`radix-${e}`:"")}const py="dismissableLayer.update",PK="dismissableLayer.pointerDownOutside",CK="dismissableLayer.focusOutside";let E1;const kK=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),xK=m.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...u}=t,d=m.useContext(kK),[h,p]=m.useState(null),v=(n=h==null?void 0:h.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,E]=m.useState({}),_=zn(e,T=>p(T)),I=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=I.indexOf(w),b=h?I.indexOf(h):-1,D=d.layersWithOutsidePointerEventsDisabled.size>0,V=b>=y,$=DK(T=>{const A=T.target,k=[...d.branches].some(N=>N.contains(A));!V||k||(s==null||s(T),a==null||a(T),T.defaultPrevented||l==null||l())},v),R=NK(T=>{const A=T.target;[...d.branches].some(N=>N.contains(A))||(o==null||o(T),a==null||a(T),T.defaultPrevented||l==null||l())},v);return uD(T=>{b===d.layers.size-1&&(i==null||i(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},v),m.useEffect(()=>{if(h)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(E1=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),T1(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=E1)}},[h,v,r,d]),m.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),T1())},[h,d]),m.useEffect(()=>{const T=()=>E({});return document.addEventListener(py,T),()=>document.removeEventListener(py,T)},[]),m.createElement(at.div,he({},u,{ref:_,style:{pointerEvents:D?V?"auto":"none":void 0,...t.style},onFocusCapture:it(t.onFocusCapture,R.onFocusCapture),onBlurCapture:it(t.onBlurCapture,R.onBlurCapture),onPointerDownCapture:it(t.onPointerDownCapture,$.onPointerDownCapture)}))});function DK(t,e=globalThis==null?void 0:globalThis.document){const n=yn(t),r=m.useRef(!1),i=m.useRef(()=>{});return m.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let u=function(){aN(PK,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function NK(t,e=globalThis==null?void 0:globalThis.document){const n=yn(t),r=m.useRef(!1);return m.useEffect(()=>{const i=s=>{s.target&&!r.current&&aN(CK,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function T1(){const t=new CustomEvent(py);document.dispatchEvent(t)}function aN(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?I0(i,s):i.dispatchEvent(s)}const fg="focusScope.autoFocusOnMount",pg="focusScope.autoFocusOnUnmount",I1={bubbles:!1,cancelable:!0},OK=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=m.useState(null),u=yn(i),d=yn(s),h=m.useRef(null),p=zn(e,_=>l(_)),v=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let _=function(b){if(v.paused||!a)return;const D=b.target;a.contains(D)?h.current=D:gi(h.current,{select:!0})},I=function(b){if(v.paused||!a)return;const D=b.relatedTarget;D!==null&&(a.contains(D)||gi(h.current,{select:!0}))},w=function(b){if(document.activeElement===document.body)for(const V of b)V.removedNodes.length>0&&gi(a)};document.addEventListener("focusin",_),document.addEventListener("focusout",I);const y=new MutationObserver(w);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",I),y.disconnect()}}},[r,a,v.paused]),m.useEffect(()=>{if(a){S1.add(v);const _=document.activeElement;if(!a.contains(_)){const w=new CustomEvent(fg,I1);a.addEventListener(fg,u),a.dispatchEvent(w),w.defaultPrevented||(LK(UK(lN(a)),{select:!0}),document.activeElement===_&&gi(a))}return()=>{a.removeEventListener(fg,u),setTimeout(()=>{const w=new CustomEvent(pg,I1);a.addEventListener(pg,d),a.dispatchEvent(w),w.defaultPrevented||gi(_??document.body,{select:!0}),a.removeEventListener(pg,d),S1.remove(v)},0)}}},[a,u,d,v]);const E=m.useCallback(_=>{if(!n&&!r||v.paused)return;const I=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,w=document.activeElement;if(I&&w){const y=_.currentTarget,[b,D]=VK(y);b&&D?!_.shiftKey&&w===D?(_.preventDefault(),n&&gi(b,{select:!0})):_.shiftKey&&w===b&&(_.preventDefault(),n&&gi(D,{select:!0})):w===y&&_.preventDefault()}},[n,r,v.paused]);return m.createElement(at.div,he({tabIndex:-1},o,{ref:p,onKeyDown:E}))});function LK(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(gi(r,{select:e}),document.activeElement!==n)return}function VK(t){const e=lN(t),n=b1(e,t),r=b1(e.reverse(),t);return[n,r]}function lN(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function b1(t,e){for(const n of t)if(!MK(n,{upTo:e}))return n}function MK(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function FK(t){return t instanceof HTMLInputElement&&"select"in t}function gi(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&FK(t)&&e&&t.select()}}const S1=$K();function $K(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=R1(t,e),t.unshift(e)},remove(e){var n;t=R1(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function R1(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function UK(t){return t.filter(e=>e.tagName!=="A")}const jK=m.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=t;return r?tA.createPortal(m.createElement(at.div,he({},i,{ref:e})),r):null});let mg=0;function BK(){m.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:A1()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:A1()),mg++,()=>{mg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),mg--}},[])}function A1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}var fh="right-scroll-bar-position",ph="width-before-scroll-bar",zK="with-scroll-bars-hidden",qK="--removed-body-scroll-bar-size";function WK(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function KK(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}function GK(t,e){return KK(null,function(n){return t.forEach(function(r){return WK(r,n)})})}function HK(t){return t}function QK(t,e){e===void 0&&(e=HK);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var d=o;o=[],d.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return i}function YK(t){t===void 0&&(t={});var e=QK(null);return e.options=lr({async:!0,ssr:!1},t),e}var cN=function(t){var e=t.sideCar,n=gu(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,lr({},n))};cN.isSideCarExport=!0;function XK(t,e){return t.useMedium(e),cN}var uN=YK(),gg=function(){},kp=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:gg,onWheelCapture:gg,onTouchMoveCapture:gg}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,p=t.sideCar,v=t.noIsolation,E=t.inert,_=t.allowPinchZoom,I=t.as,w=I===void 0?"div":I,y=gu(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),b=p,D=GK([n,e]),V=lr(lr({},y),i);return m.createElement(m.Fragment,null,d&&m.createElement(b,{sideCar:uN,removeScrollBar:u,shards:h,noIsolation:v,inert:E,setCallbacks:s,allowPinchZoom:!!_,lockRef:n}),o?m.cloneElement(m.Children.only(a),lr(lr({},V),{ref:D})):m.createElement(w,lr({},V,{className:l,ref:D}),a))});kp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};kp.classNames={fullWidth:ph,zeroRight:fh};var JK=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ZK(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=JK();return e&&t.setAttribute("nonce",e),t}function eG(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function tG(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var nG=function(){var t=0,e=null;return{add:function(n){t==0&&(e=ZK())&&(eG(e,n),tG(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},rG=function(){var t=nG();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},dN=function(){var t=rG(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},iG={left:0,top:0,right:0,gap:0},vg=function(t){return parseInt(t||"",10)||0},sG=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[vg(n),vg(r),vg(i)]},oG=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return iG;var e=sG(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},aG=dN(),lG=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(zK,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(fh,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(ph,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(fh," .").concat(fh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ph," .").concat(ph,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body {
    `).concat(qK,": ").concat(a,`px;
  }
`)},cG=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r,s=m.useMemo(function(){return oG(i)},[i]);return m.createElement(aG,{styles:lG(s,!e,i,n?"":"!important")})},my=!1;if(typeof window<"u")try{var Od=Object.defineProperty({},"passive",{get:function(){return my=!0,!0}});window.addEventListener("test",Od,Od),window.removeEventListener("test",Od,Od)}catch{my=!1}var ko=my?{passive:!1}:!1,uG=function(t){return t.tagName==="TEXTAREA"},hN=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!uG(t)&&n[e]==="visible")},dG=function(t){return hN(t,"overflowY")},hG=function(t){return hN(t,"overflowX")},P1=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=fN(t,n);if(r){var i=pN(t,n),s=i[1],o=i[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},fG=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},pG=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},fN=function(t,e){return t==="v"?dG(e):hG(e)},pN=function(t,e){return t==="v"?fG(e):pG(e)},mG=function(t,e){return t==="h"&&e==="rtl"?-1:1},gG=function(t,e,n,r,i){var s=mG(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),u=!1,d=o>0,h=0,p=0;do{var v=pN(t,a),E=v[0],_=v[1],I=v[2],w=_-I-s*E;(E||w)&&fN(t,a)&&(h+=w,p+=E),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&(h===0||!i)||!d&&(p===0||!i))&&(u=!0),u},Ld=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},C1=function(t){return[t.deltaX,t.deltaY]},k1=function(t){return t&&"current"in t?t.current:t},vG=function(t,e){return t[0]===e[0]&&t[1]===e[1]},yG=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},_G=0,xo=[];function wG(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),i=m.useState(_G++)[0],s=m.useState(function(){return dN()})[0],o=m.useRef(t);m.useEffect(function(){o.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var _=DM([t.lockRef.current],(t.shards||[]).map(k1),!0).filter(Boolean);return _.forEach(function(I){return I.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),_.forEach(function(I){return I.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=m.useCallback(function(_,I){if("touches"in _&&_.touches.length===2)return!o.current.allowPinchZoom;var w=Ld(_),y=n.current,b="deltaX"in _?_.deltaX:y[0]-w[0],D="deltaY"in _?_.deltaY:y[1]-w[1],V,$=_.target,R=Math.abs(b)>Math.abs(D)?"h":"v";if("touches"in _&&R==="h"&&$.type==="range")return!1;var T=P1(R,$);if(!T)return!0;if(T?V=R:(V=R==="v"?"h":"v",T=P1(R,$)),!T)return!1;if(!r.current&&"changedTouches"in _&&(b||D)&&(r.current=V),!V)return!0;var A=r.current||V;return gG(A,I,_,A==="h"?b:D,!0)},[]),l=m.useCallback(function(_){var I=_;if(!(!xo.length||xo[xo.length-1]!==s)){var w="deltaY"in I?C1(I):Ld(I),y=e.current.filter(function(V){return V.name===I.type&&V.target===I.target&&vG(V.delta,w)})[0];if(y&&y.should){I.cancelable&&I.preventDefault();return}if(!y){var b=(o.current.shards||[]).map(k1).filter(Boolean).filter(function(V){return V.contains(I.target)}),D=b.length>0?a(I,b[0]):!o.current.noIsolation;D&&I.cancelable&&I.preventDefault()}}},[]),u=m.useCallback(function(_,I,w,y){var b={name:_,delta:I,target:w,should:y};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(D){return D!==b})},1)},[]),d=m.useCallback(function(_){n.current=Ld(_),r.current=void 0},[]),h=m.useCallback(function(_){u(_.type,C1(_),_.target,a(_,t.lockRef.current))},[]),p=m.useCallback(function(_){u(_.type,Ld(_),_.target,a(_,t.lockRef.current))},[]);m.useEffect(function(){return xo.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",l,ko),document.addEventListener("touchmove",l,ko),document.addEventListener("touchstart",d,ko),function(){xo=xo.filter(function(_){return _!==s}),document.removeEventListener("wheel",l,ko),document.removeEventListener("touchmove",l,ko),document.removeEventListener("touchstart",d,ko)}},[]);var v=t.removeScrollBar,E=t.inert;return m.createElement(m.Fragment,null,E?m.createElement(s,{styles:yG(i)}):null,v?m.createElement(cG,{gapMode:"margin"}):null)}const EG=XK(uN,wG);var mN=m.forwardRef(function(t,e){return m.createElement(kp,lr({},t,{ref:e,sideCar:EG}))});mN.classNames=kp.classNames;var TG=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Do=new WeakMap,Vd=new WeakMap,Md={},yg=0,gN=function(t){return t&&(t.host||gN(t.parentNode))},IG=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=gN(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},bG=function(t,e,n,r){var i=IG(e,Array.isArray(t)?t:[t]);Md[n]||(Md[n]=new WeakMap);var s=Md[n],o=[],a=new Set,l=new Set(i),u=function(h){!h||a.has(h)||(a.add(h),u(h.parentNode))};i.forEach(u);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(p){if(a.has(p))d(p);else{var v=p.getAttribute(r),E=v!==null&&v!=="false",_=(Do.get(p)||0)+1,I=(s.get(p)||0)+1;Do.set(p,_),s.set(p,I),o.push(p),_===1&&E&&Vd.set(p,!0),I===1&&p.setAttribute(n,"true"),E||p.setAttribute(r,"true")}})};return d(e),a.clear(),yg++,function(){o.forEach(function(h){var p=Do.get(h)-1,v=s.get(h)-1;Do.set(h,p),s.set(h,v),p||(Vd.has(h)||h.removeAttribute(r),Vd.delete(h)),v||h.removeAttribute(n)}),yg--,yg||(Do=new WeakMap,Do=new WeakMap,Vd=new WeakMap,Md={})}},SG=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=TG(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),bG(r,i,n,"aria-hidden")):function(){return null}};const vN="Dialog",[yN,GQ]=Sp(vN),[RG,nr]=yN(vN),AG=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=m.useRef(null),l=m.useRef(null),[u=!1,d]=fD({prop:r,defaultProp:i,onChange:s});return m.createElement(RG,{scope:e,triggerRef:a,contentRef:l,contentId:hg(),titleId:hg(),descriptionId:hg(),open:u,onOpenChange:d,onOpenToggle:m.useCallback(()=>d(h=>!h),[d]),modal:o},n)},PG="DialogTrigger",CG=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=nr(PG,n),s=zn(e,i.triggerRef);return m.createElement(at.button,he({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":C0(i.open)},r,{ref:s,onClick:it(t.onClick,i.onOpenToggle)}))}),_N="DialogPortal",[kG,wN]=yN(_N,{forceMount:void 0}),xG=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=nr(_N,e);return m.createElement(kG,{scope:e,forceMount:n},m.Children.map(r,o=>m.createElement(Mu,{present:n||s.open},m.createElement(jK,{asChild:!0,container:i},o))))},gy="DialogOverlay",DG=m.forwardRef((t,e)=>{const n=wN(gy,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=nr(gy,t.__scopeDialog);return s.modal?m.createElement(Mu,{present:r||s.open},m.createElement(NG,he({},i,{ref:e}))):null}),NG=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=nr(gy,n);return m.createElement(mN,{as:Va,allowPinchZoom:!0,shards:[i.contentRef]},m.createElement(at.div,he({"data-state":C0(i.open)},r,{ref:e,style:{pointerEvents:"auto",...r.style}})))}),Ma="DialogContent",OG=m.forwardRef((t,e)=>{const n=wN(Ma,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=nr(Ma,t.__scopeDialog);return m.createElement(Mu,{present:r||s.open},s.modal?m.createElement(LG,he({},i,{ref:e})):m.createElement(VG,he({},i,{ref:e})))}),LG=m.forwardRef((t,e)=>{const n=nr(Ma,t.__scopeDialog),r=m.useRef(null),i=zn(e,n.contentRef,r);return m.useEffect(()=>{const s=r.current;if(s)return SG(s)},[]),m.createElement(EN,he({},t,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:it(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)===null||o===void 0||o.focus()}),onPointerDownOutside:it(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:it(t.onFocusOutside,s=>s.preventDefault())}))}),VG=m.forwardRef((t,e)=>{const n=nr(Ma,t.__scopeDialog),r=m.useRef(!1),i=m.useRef(!1);return m.createElement(EN,he({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o;if((o=t.onCloseAutoFocus)===null||o===void 0||o.call(t,s),!s.defaultPrevented){var a;r.current||(a=n.triggerRef.current)===null||a===void 0||a.focus(),s.preventDefault()}r.current=!1,i.current=!1},onInteractOutside:s=>{var o,a;(o=t.onInteractOutside)===null||o===void 0||o.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=s.target;((a=n.triggerRef.current)===null||a===void 0?void 0:a.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}}))}),EN=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=nr(Ma,n),l=m.useRef(null),u=zn(e,l);return BK(),m.createElement(m.Fragment,null,m.createElement(OK,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s},m.createElement(xK,he({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":C0(a.open)},o,{ref:u,onDismiss:()=>a.onOpenChange(!1)}))),!1)}),TN="DialogTitle",MG=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=nr(TN,n);return m.createElement(at.h2,he({id:i.titleId},r,{ref:e}))}),FG="DialogDescription",$G=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=nr(FG,n);return m.createElement(at.p,he({id:i.descriptionId},r,{ref:e}))}),UG="DialogClose",jG=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=nr(UG,n);return m.createElement(at.button,he({type:"button"},r,{ref:e,onClick:it(t.onClick,()=>i.onOpenChange(!1))}))});function C0(t){return t?"open":"closed"}const BG="DialogTitleWarning",[HQ,QQ]=pq(BG,{contentName:Ma,titleName:TN,docsSlug:"dialog"}),zG=AG,qG=CG,xp=xG,Dp=DG,Np=OG,Op=MG,Lp=$G,IN=jG,WG=zG,KG=qG,bN=({className:t,...e})=>P.jsx(xp,{className:Ke(t),...e});bN.displayName=xp.displayName;const SN=m.forwardRef(({className:t,...e},n)=>P.jsx(Dp,{ref:n,className:Ke("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));SN.displayName=Dp.displayName;const RN=m.forwardRef(({className:t,children:e,...n},r)=>P.jsxs(bN,{children:[P.jsx(SN,{}),P.jsxs(Np,{ref:r,className:Ke("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",t),...n,children:[e,P.jsxs(IN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[P.jsx(R0,{className:"h-4 w-4"}),P.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));RN.displayName=Np.displayName;const AN=({className:t,...e})=>P.jsx("div",{className:Ke("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});AN.displayName="DialogHeader";const PN=({className:t,...e})=>P.jsx("div",{className:Ke("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});PN.displayName="DialogFooter";const CN=m.forwardRef(({className:t,...e},n)=>P.jsx(Op,{ref:n,className:Ke("text-lg font-semibold leading-none tracking-tight",t),...e}));CN.displayName=Op.displayName;const kN=m.forwardRef(({className:t,...e},n)=>P.jsx(Lp,{ref:n,className:Ke("text-sm text-muted-foreground",t),...e}));kN.displayName=Lp.displayName;const GG={document:null,isPending:!1,error:null,success:null},HG=(t,e)=>{switch(e.type){case"IS_PENDING":return{isPending:!0,document:null,success:!1,error:null};case"ADDED_DOCUMENT":return{isPending:!1,document:e.payload,success:!0,error:null};case"SET_DOCUMENT":return{isPending:!1,document:e.payload,success:!0,error:null};case"DELETED_DOCUMENT":return{isPending:!1,document:null,success:!0,error:null};case"UPDATED_DOCUMENT":return{isPending:!1,document:e.payload,success:!0,error:null};case"ERROR":return{isPending:!1,document:null,success:!1,error:e.payload};default:return{...t,isPending:!1}}},QG=t=>{const[e,n]=m.useReducer(HG,GG),[r,i]=m.useState(!1),s=Tn(pe,t),o=E=>{r||n(E)},a=async E=>{n({type:"IS_PENDING"});try{const I=await hf(s,{...E,createdAt:Ml});return o({type:"ADDED_DOCUMENT",payload:I}),{type:"SUCCESS",payload:I.id}}catch(_){return console.log("Error adding document: ",E,_.message),o({type:"ERROR",payload:_.message}),{type:"ERROR",payload:_.message}}},l=async(E,_)=>{try{const I=Ml,w=await Fi(Se(pe,t,E),{..._,createdAt:I});o({type:"SET_DOCUMENT",payload:w})}catch(I){return o({type:"ERROR",payload:I.message}),{type:"ERROR",payload:I.message}}},u=async(E,_)=>{n({type:"IS_PENDING"});try{const I=Se(pe,t,E);console.log("id"," => ",E);const w=await Ji(I,{..._,lastEdited:Ml});return o({type:"UPDATED_DOCUMENT",payload:w}),{type:"SUCCESS",payload:w}}catch(I){return o({type:"ERROR",payload:I.message}),console.log(I),console.log(_),{type:"ERROR",payload:I.message}}},d=async E=>{n({type:"IS_PENDING"});try{return await Yv(Se(s,E)),o({type:"DELETED_DOCUMENT"}),{type:"SUCCESS",payload:""}}catch(_){return o({type:"ERROR",payload:_.message}),{type:"ERROR",payload:_.message}}},h=async(E,_,I)=>{n({type:"IS_PENDING"});try{const w=Ml,y=Tn(pe,`${t}/${E}/${_}`),b=await hf(y,{...I,createdAt:w});return o({type:"ADDED_DOCUMENT",payload:b}),{type:"SUCCESS",payload:b.id}}catch(w){return o({type:"ERROR",payload:w.message}),{type:"ERROR",payload:w.message}}},p=async(E,_,I)=>{n({type:"IS_PENDING"});try{const w=Se(pe,`${t}/${E}/${_}`,I);return await Yv(w),o({type:"DELETED_DOCUMENT"}),{type:"SUCCESS",payload:""}}catch(w){return o({type:"ERROR",payload:w.message}),{type:"ERROR",payload:w.message}}},v=async(E,_,I,w)=>{n({type:"IS_PENDING"});try{const y=Se(pe,`${t}/${E}/${_}`,I),b=await Ji(y,{...w,lastEdited:Ml});return o({type:"UPDATED_DOCUMENT",payload:b}),{type:"SUCCESS",payload:b}}catch(y){return o({type:"ERROR",payload:y.message}),console.log(y),{type:"ERROR",payload:y.message}}};return m.useEffect(()=>()=>i(!0),[]),{addDocument:a,deleteDocument:d,createDocument:l,updateDocument:u,addSubDocument:h,updateSubDocument:v,deleteSubDocument:p,response:e,serverTimestamp:an}},YG=async(t,e,n)=>new Promise((r,i)=>{const s=ty(sq,`${e}/${n}.${t.type.split("/")[1]}`),o=bx(s,t);o.on("state_changed",a=>{console.log(a)},a=>{i(a)},()=>{Sx(o.snapshot.ref).then(a=>{console.log("Arquivo disponível na URL: ",a),r(a)})})});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vy=function(t,e){return vy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},vy(t,e)};function XG(t,e){vy(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var $t=function(){return $t=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$t.apply(this,arguments)},x1=!1,Ss,yy,_y,mh,gh,xN,vh,wy,Ey,Ty,DN,Iy,by,NN,ON;function on(){if(!x1){x1=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),n=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(Iy=/\b(iPhone|iP[ao]d)/.exec(t),by=/\b(iP[ao]d)/.exec(t),Ty=/Android/i.exec(t),NN=/FBAN\/\w+;/i.exec(t),ON=/Mobile/i.exec(t),DN=!!/Win64/.exec(t),e){Ss=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,Ss&&document&&document.documentMode&&(Ss=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(t);xN=r?parseFloat(r[1])+4:Ss,yy=e[2]?parseFloat(e[2]):NaN,_y=e[3]?parseFloat(e[3]):NaN,mh=e[4]?parseFloat(e[4]):NaN,mh?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),gh=e&&e[1]?parseFloat(e[1]):NaN):gh=NaN}else Ss=yy=_y=gh=mh=NaN;if(n){if(n[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);vh=i?parseFloat(i[1].replace("_",".")):!0}else vh=!1;wy=!!n[2],Ey=!!n[3]}else vh=wy=Ey=!1}}var Sy={ie:function(){return on()||Ss},ieCompatibilityMode:function(){return on()||xN>Ss},ie64:function(){return Sy.ie()&&DN},firefox:function(){return on()||yy},opera:function(){return on()||_y},webkit:function(){return on()||mh},safari:function(){return Sy.webkit()},chrome:function(){return on()||gh},windows:function(){return on()||wy},osx:function(){return on()||vh},linux:function(){return on()||Ey},iphone:function(){return on()||Iy},mobile:function(){return on()||Iy||by||Ty||ON},nativeApp:function(){return on()||NN},android:function(){return on()||Ty},ipad:function(){return on()||by}},JG=Sy,Fd=!!(typeof window<"u"&&window.document&&window.document.createElement),ZG={canUseDOM:Fd,canUseWorkers:typeof Worker<"u",canUseEventListeners:Fd&&!!(window.addEventListener||window.attachEvent),canUseViewport:Fd&&!!window.screen,isInWorker:!Fd},eH=ZG,LN=eH,VN;LN.canUseDOM&&(VN=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function tH(t,e){if(!LN.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var i=document.createElement("div");i.setAttribute(n,"return;"),r=typeof i[n]=="function"}return!r&&VN&&t==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var nH=tH,rH=JG,iH=nH,D1=10,N1=40,O1=800;function MN(t){var e=0,n=0,r=0,i=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*D1,i=n*D1,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||i)&&t.deltaMode&&(t.deltaMode==1?(r*=N1,i*=N1):(r*=O1,i*=O1)),r&&!e&&(e=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:e,spinY:n,pixelX:r,pixelY:i}}MN.getEventType=function(){return rH.firefox()?"DOMMouseScroll":iH("wheel")?"wheel":"mousewheel"};var sH=MN,oH=sH;const aH=Ry(oH);function lH(t,e,n,r,i,s){s===void 0&&(s=0);var o=Fa(t,e,s),a=o.width,l=o.height,u=Math.min(a,n),d=Math.min(l,r);return u>d*i?{width:d*i,height:d}:{width:u,height:u/i}}function cH(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function $d(t,e,n,r,i){i===void 0&&(i=0);var s=Fa(e.width,e.height,i),o=s.width,a=s.height;return{x:L1(t.x,o,n.width,r),y:L1(t.y,a,n.height,r)}}function L1(t,e,n,r){var i=e*r/2-n/2;return Vp(t,-i,i)}function V1(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function M1(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI}function uH(t,e,n,r,i,s,o){s===void 0&&(s=0),o===void 0&&(o=!0);var a=o?dH:hH,l=Fa(e.width,e.height,s),u=Fa(e.naturalWidth,e.naturalHeight,s),d={x:a(100,((l.width-n.width/i)/2-t.x/i)/l.width*100),y:a(100,((l.height-n.height/i)/2-t.y/i)/l.height*100),width:a(100,n.width/l.width*100/i),height:a(100,n.height/l.height*100/i)},h=Math.round(a(u.width,d.width*u.width/100)),p=Math.round(a(u.height,d.height*u.height/100)),v=u.width>=u.height*r,E=v?{width:Math.round(p*r),height:p}:{width:h,height:Math.round(h/r)},_=$t($t({},E),{x:Math.round(a(u.width-E.width,d.x*u.width/100)),y:Math.round(a(u.height-E.height,d.y*u.height/100))});return{croppedAreaPercentages:d,croppedAreaPixels:_}}function dH(t,e){return Math.min(t,Math.max(0,e))}function hH(t,e){return e}function fH(t,e,n,r,i,s){var o=Fa(e.width,e.height,n),a=Vp(r.width/o.width*(100/t.width),i,s),l={x:a*o.width/2-r.width/2-o.width*a*(t.x/100),y:a*o.height/2-r.height/2-o.height*a*(t.y/100)};return{crop:l,zoom:a}}function pH(t,e,n){var r=cH(e);return n.height>n.width?n.height/(t.height*r):n.width/(t.width*r)}function mH(t,e,n,r,i,s){n===void 0&&(n=0);var o=Fa(e.naturalWidth,e.naturalHeight,n),a=Vp(pH(t,e,r),i,s),l=r.height>r.width?r.height/t.height:r.width/t.width,u={x:((o.width-t.width)/2-t.x)*l,y:((o.height-t.height)/2-t.y)*l};return{crop:u,zoom:a}}function F1(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function gH(t){return t*Math.PI/180}function Fa(t,e,n){var r=gH(n);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*e)}}function Vp(t,e,n){return Math.min(Math.max(t,e),n)}function Ud(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(n){return typeof n=="string"&&n.length>0}).join(" ").trim()}var vH=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,yH=1,_H=3,wH=function(t){XG(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.imageRef=Re.createRef(),n.videoRef=Re.createRef(),n.containerPosition={x:0,y:0},n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.gestureZoomStart=0,n.gestureRotationStart=0,n.isTouching=!1,n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.currentDoc=typeof document<"u"?document:null,n.currentWindow=typeof window<"u"?window:null,n.resizeObserver=null,n.state={cropSize:null,hasWheelJustStarted:!1},n.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!n.containerRef)){var r=!0;n.resizeObserver=new window.ResizeObserver(function(i){if(r){r=!1;return}n.computeSizes()}),n.resizeObserver.observe(n.containerRef)}},n.preventZoomSafari=function(r){return r.preventDefault()},n.cleanEvents=function(){n.currentDoc&&(n.currentDoc.removeEventListener("mousemove",n.onMouseMove),n.currentDoc.removeEventListener("mouseup",n.onDragStopped),n.currentDoc.removeEventListener("touchmove",n.onTouchMove),n.currentDoc.removeEventListener("touchend",n.onDragStopped),n.currentDoc.removeEventListener("gesturemove",n.onGestureMove),n.currentDoc.removeEventListener("gestureend",n.onGestureEnd),n.currentDoc.removeEventListener("scroll",n.onScroll))},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var r=n.computeSizes();r&&(n.emitCropData(),n.setInitialCrop(r)),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(r){if(n.props.initialCroppedAreaPercentages){var i=fH(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),s=i.crop,o=i.zoom;n.props.onCropChange(s),n.props.onZoomChange&&n.props.onZoomChange(o)}else if(n.props.initialCroppedAreaPixels){var a=mH(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),s=a.crop,o=a.zoom;n.props.onCropChange(s),n.props.onZoomChange&&n.props.onZoomChange(o)}},n.computeSizes=function(){var r,i,s,o,a,l,u=n.imageRef.current||n.videoRef.current;if(u&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect(),n.saveContainerPosition();var d=n.containerRect.width/n.containerRect.height,h=((r=n.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((i=n.videoRef.current)===null||i===void 0?void 0:i.videoWidth)||0,p=((s=n.imageRef.current)===null||s===void 0?void 0:s.naturalHeight)||((o=n.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,v=u.offsetWidth<h||u.offsetHeight<p,E=h/p,_=void 0;if(v){var I=n.getObjectFit();switch(I){default:case"contain":_=d>E?{width:n.containerRect.height*E,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/E};break;case"horizontal-cover":_={width:n.containerRect.width,height:n.containerRect.width/E};break;case"vertical-cover":_={width:n.containerRect.height*E,height:n.containerRect.height};break}}else _={width:u.offsetWidth,height:u.offsetHeight};n.mediaSize=$t($t({},_),{naturalWidth:h,naturalHeight:p}),n.props.setMediaSize&&n.props.setMediaSize(n.mediaSize);var w=n.props.cropSize?n.props.cropSize:lH(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(((a=n.state.cropSize)===null||a===void 0?void 0:a.height)!==w.height||((l=n.state.cropSize)===null||l===void 0?void 0:l.width)!==w.width)&&n.props.onCropSizeChange&&n.props.onCropSizeChange(w),n.setState({cropSize:w},n.recomputeCropPosition),n.props.setCropSize&&n.props.setCropSize(w),w}},n.saveContainerPosition=function(){if(n.containerRef){var r=n.containerRef.getBoundingClientRect();n.containerPosition={x:r.left,y:r.top}}},n.onMouseDown=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("mousemove",n.onMouseMove),n.currentDoc.addEventListener("mouseup",n.onDragStopped),n.saveContainerPosition(),n.onDragStart(e.getMousePoint(r)))},n.onMouseMove=function(r){return n.onDrag(e.getMousePoint(r))},n.onScroll=function(r){n.currentDoc&&(r.preventDefault(),n.saveContainerPosition())},n.onTouchStart=function(r){n.currentDoc&&(n.isTouching=!0,!(n.props.onTouchRequest&&!n.props.onTouchRequest(r))&&(n.currentDoc.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.currentDoc.addEventListener("touchend",n.onDragStopped),n.saveContainerPosition(),r.touches.length===2?n.onPinchStart(r):r.touches.length===1&&n.onDragStart(e.getTouchPoint(r.touches[0]))))},n.onTouchMove=function(r){r.preventDefault(),r.touches.length===2?n.onPinchMove(r):r.touches.length===1&&n.onDrag(e.getTouchPoint(r.touches[0]))},n.onGestureStart=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("gesturechange",n.onGestureMove),n.currentDoc.addEventListener("gestureend",n.onGestureEnd),n.gestureZoomStart=n.props.zoom,n.gestureRotationStart=n.props.rotation)},n.onGestureMove=function(r){if(r.preventDefault(),!n.isTouching){var i=e.getMousePoint(r),s=n.gestureZoomStart-1+r.scale;if(n.setNewZoom(s,i,{shouldUpdatePosition:!0}),n.props.onRotationChange){var o=n.gestureRotationStart+r.rotation;n.props.onRotationChange(o)}}},n.onGestureEnd=function(r){n.cleanEvents()},n.onDragStart=function(r){var i,s,o=r.x,a=r.y;n.dragStartPosition={x:o,y:a},n.dragStartCrop=$t({},n.props.crop),(s=(i=n.props).onInteractionStart)===null||s===void 0||s.call(i)},n.onDrag=function(r){var i=r.x,s=r.y;n.currentWindow&&(n.rafDragTimeout&&n.currentWindow.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=n.currentWindow.requestAnimationFrame(function(){if(n.state.cropSize&&!(i===void 0||s===void 0)){var o=i-n.dragStartPosition.x,a=s-n.dragStartPosition.y,l={x:n.dragStartCrop.x+o,y:n.dragStartCrop.y+a},u=n.props.restrictPosition?$d(l,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):l;n.props.onCropChange(u)}}))},n.onDragStopped=function(){var r,i;n.isTouching=!1,n.cleanEvents(),n.emitCropData(),(i=(r=n.props).onInteractionEnd)===null||i===void 0||i.call(r)},n.onWheel=function(r){if(n.currentWindow&&!(n.props.onWheelRequest&&!n.props.onWheelRequest(r))){r.preventDefault();var i=e.getMousePoint(r),s=aH(r).pixelY,o=n.props.zoom-s*n.props.zoomSpeed/200;n.setNewZoom(o,i,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},function(){var a,l;return(l=(a=n.props).onInteractionStart)===null||l===void 0?void 0:l.call(a)}),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=n.currentWindow.setTimeout(function(){return n.setState({hasWheelJustStarted:!1},function(){var a,l;return(l=(a=n.props).onInteractionEnd)===null||l===void 0?void 0:l.call(a)})},250)}},n.getPointOnContainer=function(r,i){var s=r.x,o=r.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(s-i.x),y:n.containerRect.height/2-(o-i.y)}},n.getPointOnMedia=function(r){var i=r.x,s=r.y,o=n.props,a=o.crop,l=o.zoom;return{x:(i+a.x)/l,y:(s+a.y)/l}},n.setNewZoom=function(r,i,s){var o=s===void 0?{}:s,a=o.shouldUpdatePosition,l=a===void 0?!0:a;if(!(!n.state.cropSize||!n.props.onZoomChange)){var u=Vp(r,n.props.minZoom,n.props.maxZoom);if(l){var d=n.getPointOnContainer(i,n.containerPosition),h=n.getPointOnMedia(d),p={x:h.x*u-d.x,y:h.y*u-d.y},v=n.props.restrictPosition?$d(p,n.mediaSize,n.state.cropSize,u,n.props.rotation):p;n.props.onCropChange(v)}n.props.onZoomChange(u)}},n.getCropData=function(){if(!n.state.cropSize)return null;var r=n.props.restrictPosition?$d(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;return uH(r,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition)},n.emitCropData=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,s=r.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(i,s),n.props.onCropAreaChange&&n.props.onCropAreaChange(i,s)}},n.emitCropAreaChange=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,s=r.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(i,s)}},n.recomputeCropPosition=function(){if(n.state.cropSize){var r=n.props.restrictPosition?$d(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;n.props.onCropChange(r),n.emitCropData()}},n}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=vH,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},e.prototype.componentWillUnmount=function(){var n,r;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(n=this.resizeObserver)===null||n===void 0||n.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((r=this.styleRef.parentNode)===null||r===void 0||r.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(n){var r,i,s,o,a,l,u,d,h;n.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):n.aspect!==this.props.aspect?this.computeSizes():n.objectFit!==this.props.objectFit?this.computeSizes():n.zoom!==this.props.zoom?this.recomputeCropPosition():((r=n.cropSize)===null||r===void 0?void 0:r.height)!==((i=this.props.cropSize)===null||i===void 0?void 0:i.height)||((s=n.cropSize)===null||s===void 0?void 0:s.width)!==((o=this.props.cropSize)===null||o===void 0?void 0:o.width)?this.computeSizes():(((a=n.crop)===null||a===void 0?void 0:a.x)!==((l=this.props.crop)===null||l===void 0?void 0:l.x)||((u=n.crop)===null||u===void 0?void 0:u.y)!==((d=this.props.crop)===null||d===void 0?void 0:d.y))&&this.emitCropAreaChange(),n.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),n.video!==this.props.video&&((h=this.videoRef.current)===null||h===void 0||h.load())},e.prototype.getAspect=function(){var n=this.props,r=n.cropSize,i=n.aspect;return r?r.width/r.height:i},e.prototype.getObjectFit=function(){var n,r,i,s;if(this.props.objectFit==="cover"){var o=this.imageRef.current||this.videoRef.current;if(o&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var a=this.containerRect.width/this.containerRect.height,l=((n=this.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((r=this.videoRef.current)===null||r===void 0?void 0:r.videoWidth)||0,u=((i=this.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((s=this.videoRef.current)===null||s===void 0?void 0:s.videoHeight)||0,d=l/u;return d<a?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(n){var r=e.getTouchPoint(n.touches[0]),i=e.getTouchPoint(n.touches[1]);this.lastPinchDistance=V1(r,i),this.lastPinchRotation=M1(r,i),this.onDragStart(F1(r,i))},e.prototype.onPinchMove=function(n){var r=this;if(!(!this.currentDoc||!this.currentWindow)){var i=e.getTouchPoint(n.touches[0]),s=e.getTouchPoint(n.touches[1]),o=F1(i,s);this.onDrag(o),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var a=V1(i,s),l=r.props.zoom*(a/r.lastPinchDistance);r.setNewZoom(l,o,{shouldUpdatePosition:!1}),r.lastPinchDistance=a;var u=M1(i,s),d=r.props.rotation+(u-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(d),r.lastPinchRotation=u})}},e.prototype.render=function(){var n=this,r=this.props,i=r.image,s=r.video,o=r.mediaProps,a=r.transform,l=r.crop,u=l.x,d=l.y,h=r.rotation,p=r.zoom,v=r.cropShape,E=r.showGrid,_=r.style,I=_.containerStyle,w=_.cropAreaStyle,y=_.mediaStyle,b=r.classes,D=b.containerClassName,V=b.cropAreaClassName,$=b.mediaClassName,R=this.getObjectFit();return Re.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(A){return n.containerRef=A},"data-testid":"container",style:I,className:Ud("reactEasyCrop_Container",D)},i?Re.createElement("img",$t({alt:"",className:Ud("reactEasyCrop_Image",R==="contain"&&"reactEasyCrop_Contain",R==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",R==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",$)},o,{src:i,ref:this.imageRef,style:$t($t({},y),{transform:a||"translate(".concat(u,"px, ").concat(d,"px) rotate(").concat(h,"deg) scale(").concat(p,")")}),onLoad:this.onMediaLoad})):s&&Re.createElement("video",$t({autoPlay:!0,loop:!0,muted:!0,className:Ud("reactEasyCrop_Video",R==="contain"&&"reactEasyCrop_Contain",R==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",R==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",$)},o,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:$t($t({},y),{transform:a||"translate(".concat(u,"px, ").concat(d,"px) rotate(").concat(h,"deg) scale(").concat(p,")")}),controls:!1}),(Array.isArray(s)?s:[{src:s}]).map(function(T){return Re.createElement("source",$t({key:T.src},T))})),this.state.cropSize&&Re.createElement("div",{style:$t($t({},w),{width:this.state.cropSize.width,height:this.state.cropSize.height}),"data-testid":"cropper",className:Ud("reactEasyCrop_CropArea",v==="round"&&"reactEasyCrop_CropAreaRound",E&&"reactEasyCrop_CropAreaGrid",V)}))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:_H,minZoom:yH,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0},e.getMousePoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e.getTouchPoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e}(Re.Component);const EH=t=>new Promise((e,n)=>{const r=new Image;r.addEventListener("load",()=>e(r)),r.addEventListener("error",i=>n(i)),r.setAttribute("crossOrigin","anonymous"),r.src=t});function FN(t){return t*Math.PI/180}function TH(t,e,n){const r=FN(n);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*e)}}async function IH(t,e,n=0,r={horizontal:!1,vertical:!1}){const i=await EH(t),s=document.createElement("canvas"),o=s.getContext("2d");if(!o)return null;const a=FN(n),{width:l,height:u}=TH(i.width,i.height,n);s.width=l,s.height=u,o.translate(l/2,u/2),o.rotate(a),o.scale(r.horizontal?-1:1,r.vertical?-1:1),o.translate(-i.width/2,-i.height/2),o.drawImage(i,0,0);const d=document.createElement("canvas"),h=d.getContext("2d");return h?(d.width=e.width,d.height=e.height,h.drawImage(s,e.x,e.y,e.width,e.height,0,0,e.width,e.height),new Promise((p,v)=>{d.toBlob(E=>{p(URL.createObjectURL(E))},"image/jpeg")})):null}const Mp=()=>{const t=m.useContext(zD);if(!t)throw Error("useUserContext must be inside an UserDocProvider.");return t};function bH({children:t,setRerender:e}){var N;const{user:n}=us(),{userDoc:r}=Mp(),[i,s]=m.useState(!1),[o,a]=m.useState(!1),[l,u]=m.useState({x:0,y:0}),[d,h]=m.useState(0),[p,v]=m.useState(1),[E,_]=m.useState(null),[I,w]=m.useState(""),{updateDocument:y}=QG("users"),b=m.useRef(),D=(x,C)=>{_(C)},V=async()=>{try{return await IH(I,E,d)}catch(x){return console.error(x),null}},$=async x=>{if(x.target.files&&x.target.files.length>0){const C=x.target.files[0];if(console.log(x),!C){alert("Por favor, selecione um arquivo.");return}if(!C.type.includes("image")){alert("Por favor, selecione uma imagem.");return}if(C.size>15e5){alert("Por favor, selecione uma imagem menor do que 1,5 MB.");return}const J=URL.createObjectURL(C);w(J)}},R=async x=>(await fetch(x)).blob(),T=(x,C)=>new File([x],C,{type:x.type}),A=async()=>{s(!0);try{const x=await V(),C=await R(x),J=T(C,"profile-pic.jpg"),Le=await YG(J,`users/${n.uid}`,"profilePic");await y(n.uid,{profilePic:Le}),await aP(n,{photoURL:Le}),await $A(n),e(tt=>!tt)}catch(x){console.error("Erro ao atualizar o perfil: ",x)}s(!1),a(!1),w("")};if(m.useEffect(()=>()=>{w("")},[]),!r)return P.jsx(An,{});const k=r.latam;return P.jsxs(WG,{open:o,onOpenChange:a,children:[P.jsx(KG,{asChild:!0,children:t}),P.jsxs(RN,{className:"sm:max-w-[425px]",children:[P.jsxs(AN,{children:[P.jsx(CN,{children:"Foto de perfil"}),P.jsx(kN,{children:k?"Cambia tu foto de perfil":"Altere a sua foto de perfil."})]}),!I&&P.jsx("div",{className:"mt-2.5 bg-primary-foreground h-64 border border-border rounded-lg flex justify-center items-center",style:{backgroundImage:`url(${(N=n.photoURL)==null?void 0:N.replace("=s96-c","")})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},role:"button",onClick:()=>b.current.click(),children:P.jsx("div",{className:"p-2.5 rounded-md",children:P.jsx(sK,{className:"text-primary w-8 h-8"})})}),I&&P.jsx("div",{className:"mt-5 relative h-64",children:P.jsx(wH,{image:I,crop:l,rotation:d,zoom:p,aspect:1/1,onCropChange:u,onRotationChange:h,onCropComplete:D,onZoomChange:v})}),P.jsx("input",{onChange:$,accept:"image/*",ref:b,type:"file",className:"hidden"}),P.jsx(PN,{className:"mt-1",children:P.jsxs(P0,{disabled:i,onClick:A,children:[i&&P.jsx(rK,{className:"mr-2 animate-spin"}),i?k?"Guardando la foto...":"Salvando a foto...":k?"Guardar nueva foto":"Salvar nova foto"]})})]})]})}const SH=[{route:"/",name:"Início",icon:P.jsx(aW,{className:"h-6 sm:h-5"})},{route:"/adestramento",name:"Adestramento",icon:P.jsx(cW,{className:"h-6 sm:h-5"})},{route:"/diario",name:"Diário",icon:P.jsx(oW,{className:"h-6 sm:h-5"})},{route:"/vacinas",name:"Vacinas",icon:P.jsx(uW,{className:"h-6 sm:h-5"})},{route:"/mais",name:"Mais",icon:P.jsx(sW,{className:"h-6 sm:h-5"})}];function RH({rerender:t,setRerender:e,sidebarExpanded:n,setSidebarExpanded:r,isWatching:i,setIsWatching:s}){const o=Wa(),a=KD("(min-width: 1920px)"),{logout:l,isPending:u}=GD();us();const{userDoc:d}=Mp(),[h,p]=m.useState(0),v=()=>{l()};return d?P.jsxs("nav",{className:`${n?"w-[282px]":"w-[88px]"} bg-white transition-all relative overflow-y-auto min-h-[calc(100vh_-_120px)] hidden sm:flex sm:flex-col sm:justify-between h-full border-none`,children:[u&&P.jsx(An,{}),P.jsxs("div",{className:`${n?"w-[282px]":"w-[88px]"} fixed h-[calc(100vh_-_120px)] sm:flex-grow sm:flex sm:flex-col sm:justify-between p-5`,children:[P.jsx("div",{className:"flex flex-col gap-3 box-border",children:SH.map((E,_)=>E.admin&&!d.admin||E.hidden||d.name==="Aluno Teste"&&E.route==="/maia"?null:P.jsxs("div",{role:"button",className:`${n?"w-full py-3 pl-2":"w-fit p-3"} relative flex items-center gap-3 transition-all duration-300 hover:bg-[#dfdfff55] rounded-md  ${_===h?"bg-[#dfdfff55] font-medium":""}`,onClick:()=>{p(_),E.external?window.open(E.route,"_blank"):(E.route==="/assistir"&&!a?(a||r(!1),s(!0)):r(!0),o(E.route))},children:[E.icon,n&&P.jsx("p",{className:"text-sm text-black/75 font-normal",children:E.name}),E.badge&&n&&P.jsx("p",{className:"absolute top-0 -right-3 text-[11px] font-light bg-brand text-white px-1 rounded-sm",children:E.badge}),E.miniBadge&&!n&&P.jsx("p",{className:"absolute -top-[2px] right-[3px] text-[15px]",children:E.miniBadge})]},E.route))}),P.jsxs("div",{children:[P.jsx(JD,{className:"my-3 opacity-15"}),P.jsx("div",{className:"flex flex-col py-2.5",children:P.jsxs(P0,{size:"noPadding",variant:"ghost",onClick:v,className:`${n?"w-full py-3 pl-2":"w-fit p-3"} gap-3 rounded-md justify-start transition-all duration-300 hover:bg-[#dfdfff55] text-black/75 font-normal`,children:[P.jsx(lW,{className:"w-5 h-5 text-brand"}),n?"Sair da conta":null]})})]})]}),t&&P.jsx("span",{className:"hidden"})]}):P.jsx(An,{})}const $N=({className:t,...e})=>P.jsx(xp,{className:Ke(t),...e});$N.displayName=xp.displayName;const UN=m.forwardRef(({className:t,...e},n)=>P.jsx(Dp,{className:Ke("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));UN.displayName=Dp.displayName;const AH=S0("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),PH=m.forwardRef(({side:t="right",className:e,children:n,...r},i)=>P.jsxs($N,{children:[P.jsx(UN,{}),P.jsxs(Np,{ref:i,className:Ke(AH({side:t}),e),...r,children:[n,P.jsxs(IN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[P.jsx(R0,{className:"h-4 w-4"}),P.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));PH.displayName=Np.displayName;const CH=m.forwardRef(({className:t,...e},n)=>P.jsx(Op,{ref:n,className:Ke("text-lg font-semibold text-foreground",t),...e}));CH.displayName=Op.displayName;const kH=m.forwardRef(({className:t,...e},n)=>P.jsx(Lp,{ref:n,className:Ke("text-sm text-muted-foreground",t),...e}));kH.displayName=Lp.displayName;const jN=()=>{const[t,e]=m.useState(!1);return m.useEffect(()=>{const n=()=>{const r=window.matchMedia("(display-mode: standalone)").matches,i=window.navigator.standalone;e(r||i)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),t};function xH({setRerender:t}){var r;const{userDoc:e}=Mp();jN(),m.useState(!1);const{user:n}=us();return GD(),Wa(),Pp("tokens",n.uid),e?e?P.jsxs("div",{className:"fixed w-full bg-white border border-border h-[72px] flex justify-between items-center px-5 z-[50]",children:[P.jsx(HD,{isTopBar:!0}),P.jsx("div",{className:"flex gap-2.5",children:P.jsx(bH,{setRerender:t,children:P.jsxs(iN,{className:"h-12 w-12",role:"button",children:[P.jsx(sN,{src:(r=n.photoURL)==null?void 0:r.replace("=s96-c","")}),P.jsx(oN,{className:"bg-[#dfdfff] text-[#820ad1]",children:SK(e.name)})]})})})]}):P.jsx(An,{}):P.jsx(An,{})}function DH({setRerender:t}){const{userDoc:e}=Mp();jN(),m.useState(!1);const{user:n}=us();return Pp("tokens",n.uid),e?e?P.jsx("div",{className:"fixed w-full bg-muted border border-border h-16 flex justify-between items-center z-50",children:P.jsx("div",{className:"w-full flex justify-center",children:P.jsx(HD,{isTopBar:!0})})}):P.jsx(An,{}):P.jsx(An,{})}var BN={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},$1=Re.createContext&&Re.createContext(BN),NH=["attr","size","title"];function OH(t,e){if(t==null)return{};var n=LH(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function LH(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function yf(){return yf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yf.apply(this,arguments)}function U1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _f(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U1(Object(n),!0).forEach(function(r){VH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VH(t,e,n){return e=MH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MH(t){var e=FH(t,"string");return typeof e=="symbol"?e:e+""}function FH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zN(t){return t&&t.map((e,n)=>Re.createElement(e.tag,_f({key:n},e.attr),zN(e.child)))}function rr(t){return e=>Re.createElement($H,yf({attr:_f({},t.attr)},e),zN(t.child))}function $H(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=OH(t,NH),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Re.createElement("svg",yf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:_f(_f({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Re.createElement("title",null,s),t.children)};return $1!==void 0?Re.createElement($1.Consumer,null,n=>e(n)):e(BN)}function YQ(t){return rr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function UH(t){return rr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.034 8 8 119.033 8 256s111.034 248 248 248 248-111.034 248-248S392.967 8 256 8zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676zM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676z"},child:[]}]})(t)}function XQ(t){return rr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(t)}function jH(t){return rr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 168v-16c0-13.255 10.745-24 24-24h360V80c0-21.367 25.899-32.042 40.971-16.971l80 80c9.372 9.373 9.372 24.569 0 33.941l-80 80C409.956 271.982 384 261.456 384 240v-48H24c-13.255 0-24-10.745-24-24zm488 152H128v-48c0-21.314-25.862-32.08-40.971-16.971l-80 80c-9.372 9.373-9.372 24.569 0 33.941l80 80C102.057 463.997 128 453.437 128 432v-48h360c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24z"},child:[]}]})(t)}function JQ(t){return rr({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"},child:[]}]})(t)}function ZQ(t){return rr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(t)}function eY(t){return rr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M201.5 174.8l55.7 55.8c3.1 3.1 3.1 8.2 0 11.3l-11.3 11.3c-3.1 3.1-8.2 3.1-11.3 0l-55.7-55.8-45.3 45.3 55.8 55.8c3.1 3.1 3.1 8.2 0 11.3l-11.3 11.3c-3.1 3.1-8.2 3.1-11.3 0L111 265.2l-26.4 26.4c-17.3 17.3-25.6 41.1-23 65.4l7.1 63.6L2.3 487c-3.1 3.1-3.1 8.2 0 11.3l11.3 11.3c3.1 3.1 8.2 3.1 11.3 0l66.3-66.3 63.6 7.1c23.9 2.6 47.9-5.4 65.4-23l181.9-181.9-135.7-135.7-64.9 65zm308.2-93.3L430.5 2.3c-3.1-3.1-8.2-3.1-11.3 0l-11.3 11.3c-3.1 3.1-3.1 8.2 0 11.3l28.3 28.3-45.3 45.3-56.6-56.6-17-17c-3.1-3.1-8.2-3.1-11.3 0l-33.9 33.9c-3.1 3.1-3.1 8.2 0 11.3l17 17L424.8 223l17 17c3.1 3.1 8.2 3.1 11.3 0l33.9-34c3.1-3.1 3.1-8.2 0-11.3l-73.5-73.5 45.3-45.3 28.3 28.3c3.1 3.1 8.2 3.1 11.3 0l11.3-11.3c3.1-3.2 3.1-8.2 0-11.4z"},child:[]}]})(t)}function BH(t){return rr({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function tY(t){return rr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function nY(t){return rr({tag:"svg",attr:{viewBox:"0 0 416 512"},child:[{tag:"path",attr:{d:"M207.9 15.2c.8 4.7 16.1 94.5 16.1 128.8 0 52.3-27.8 89.6-68.9 104.6L168 486.7c.7 13.7-10.2 25.3-24 25.3H80c-13.7 0-24.7-11.5-24-25.3l12.9-238.1C27.7 233.6 0 196.2 0 144 0 109.6 15.3 19.9 16.1 15.2 19.3-5.1 61.4-5.4 64 16.3v141.2c1.3 3.4 15.1 3.2 16 0 1.4-25.3 7.9-139.2 8-141.8 3.3-20.8 44.7-20.8 47.9 0 .2 2.7 6.6 116.5 8 141.8.9 3.2 14.8 3.4 16 0V16.3c2.6-21.6 44.8-21.4 48-1.1zm119.2 285.7l-15 185.1c-1.2 14 9.9 26 23.9 26h56c13.3 0 24-10.7 24-24V24c0-13.2-10.7-24-24-24-82.5 0-221.4 178.5-64.9 300.9z"},child:[]}]})(t)}function rY(t){return rr({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M208 96c26.5 0 48-21.5 48-48S234.5 0 208 0s-48 21.5-48 48 21.5 48 48 48zm94.5 149.1l-23.3-11.8-9.7-29.4c-14.7-44.6-55.7-75.8-102.2-75.9-36-.1-55.9 10.1-93.3 25.2-21.6 8.7-39.3 25.2-49.7 46.2L17.6 213c-7.8 15.8-1.5 35 14.2 42.9 15.6 7.9 34.6 1.5 42.5-14.3L81 228c3.5-7 9.3-12.5 16.5-15.4l26.8-10.8-15.2 60.7c-5.2 20.8.4 42.9 14.9 58.8l59.9 65.4c7.2 7.9 12.3 17.4 14.9 27.7l18.3 73.3c4.3 17.1 21.7 27.6 38.8 23.3 17.1-4.3 27.6-21.7 23.3-38.8l-22.2-89c-2.6-10.3-7.7-19.9-14.9-27.7l-45.5-49.7 17.2-68.7 5.5 16.5c5.3 16.1 16.7 29.4 31.7 37l23.3 11.8c15.6 7.9 34.6 1.5 42.5-14.3 7.7-15.7 1.4-35.1-14.3-43zM73.6 385.8c-3.2 8.1-8 15.4-14.2 21.5l-50 50.1c-12.5 12.5-12.5 32.8 0 45.3s32.7 12.5 45.2 0l59.4-59.4c6.1-6.1 10.9-13.4 14.2-21.5l13.5-33.8c-55.3-60.3-38.7-41.8-47.4-53.7l-20.7 51.5z"},child:[]}]})(t)}const zH=({isOpen:t,onClose:e,userEmail:n})=>{const[r,i]=m.useState(null),[s,o]=m.useState(!0),[a,l]=m.useState(null),[u,d]=m.useState(null);m.useEffect(()=>{t&&n&&h()},[t,n]);const h=async()=>{try{o(!0),l(null);const v=await fetch(`https://api.petziapp.com/api/subscription/${n}`,{credentials:"include"});if(!v.ok)throw new Error("Erro ao buscar informações da assinatura");const E=await v.json();i(E.plan)}catch(v){l(v.message)}finally{o(!1)}},p=async()=>{try{if(o(!0),l(null),!(await fetch("https://api.petziapp.com/api/subscription/cancel",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:n})})).ok)throw new Error("Erro ao solicitar cancelamento");d("Solicitação de cancelamento enviada com sucesso!")}catch(v){l(v.message)}finally{o(!1)}};return t?P.jsx("div",{className:"subscription-modal-overlay",children:P.jsxs("div",{className:"subscription-modal",children:[P.jsx("button",{className:"close-button",onClick:e,children:P.jsx(BH,{})}),P.jsx("h2",{children:"Gerenciar Assinatura"}),s?P.jsx("div",{className:"loading",children:"Carregando..."}):a?P.jsx("div",{className:"error-message",children:a}):P.jsxs(P.Fragment,{children:[P.jsxs("div",{className:"current-plan",children:[P.jsx("h3",{children:"Plano Atual"}),P.jsx("p",{className:"plan-name",children:r})]}),P.jsxs("div",{className:"actions",children:[P.jsxs("a",{href:"https://petziapp.com/changeplans/",target:"_blank",rel:"noopener noreferrer",className:"action-button upgrade bg-green-600 text-white rounded",style:{backgroundColor:"#16a34a",color:"#fff",borderRadius:"8px"},children:[P.jsx(jH,{}),"Trocar de Plano"]}),P.jsxs("button",{onClick:p,className:"action-button cancel",disabled:s,children:[P.jsx(UH,{}),"Solicitar Cancelamento"]})]}),u&&P.jsx("div",{className:"feedback-message",children:u})]})]})}):null},qH=({isOpen:t,onClose:e})=>{const n=Wa(),{logout:r,user:i}=oq(),{resetOnboarding:s}=uq(),[o,a]=m.useState(null),[l,u]=m.useState(!1),[d,h]=m.useState(!1),[p,v]=m.useState(!1),E=[{id:"profile",icon:"👤",label:"Perfil",description:"Gerencie suas informações pessoais"},{id:"notifications",icon:"🔔",label:"Notificações",description:"Configure suas preferências de notificação"},{id:"subscription",icon:"💳",label:"Gerenciar Assinatura",description:"Troque de plano ou cancele sua assinatura"},{id:"updatePet",icon:"🐾",label:"Atualizar Informações do Pet",description:"Refaça o cadastro para atualizar os dados do seu pet"},{id:"help",icon:"❓",label:"Ajuda",description:"Encontre respostas para suas dúvidas"},{id:"reportProblem",icon:"🐞",label:"Reporte um Problema",description:"Informe-nos sobre algum problema que encontrou"},{id:"terms",icon:"📜",label:"Termos de Uso",description:"Leia nossos termos e condições"},{id:"privacy",icon:"🔒",label:"Privacidade",description:"Conheça nossa política de privacidade"}],_=y=>{switch(a(y),y){case"profile":n("/profile"),e();break;case"notifications":n("/notifications"),e();break;case"subscription":v(!0);break;case"updatePet":h(!0);break;case"help":n("/help"),e();break;case"reportProblem":n("/report-problem"),e();break;case"terms":n("/terms"),e();break;case"privacy":n("/privacy"),e();break}},I=async()=>{u(!0);try{await s(),n("/onboarding")}catch(y){console.error("Erro ao resetar onboarding:",y)}finally{u(!1),h(!1)}},w=async()=>{try{await r(),n("/login")}catch(y){console.error("Erro ao fazer logout:",y)}};return t?P.jsxs(P.Fragment,{children:[P.jsx("div",{className:"settings-overlay",onClick:e,children:P.jsxs("div",{className:"settings-menu",onClick:y=>y.stopPropagation(),children:[P.jsxs("div",{className:"settings-header",children:[P.jsx("h2",{children:"Configurações"}),P.jsx("button",{className:"close-button",onClick:e,children:"×"})]}),P.jsx("div",{className:"settings-content",children:E.map(y=>P.jsxs("div",{className:`settings-item ${o===y.id?"active":""}`,onClick:()=>_(y.id),children:[P.jsx("span",{className:"item-icon",children:y.icon}),P.jsxs("div",{className:"item-info",children:[P.jsx("h3",{children:y.label}),P.jsx("p",{children:y.description})]}),P.jsx("span",{className:"item-arrow",children:"→"})]},y.id))}),d&&P.jsx("div",{className:"confirmation-modal",children:P.jsxs("div",{className:"confirmation-content",children:[P.jsx("h3",{children:"Atualizar Informações do Pet"}),P.jsx("p",{children:"Esta ação irá resetar as informações do seu pet e você precisará refazer o cadastro. Deseja continuar?"}),P.jsxs("div",{className:"confirmation-buttons",children:[P.jsx("button",{className:"cancel-button",onClick:()=>h(!1),disabled:l,children:"Cancelar"}),P.jsx("button",{className:"confirm-button",onClick:I,disabled:l,children:l?"Processando...":"Confirmar"})]})]})}),P.jsx("div",{className:"settings-footer",children:P.jsx("button",{className:"logout-button",onClick:w,children:"Sair"})})]})}),P.jsx(zH,{isOpen:p,onClose:()=>v(!1),userEmail:i==null?void 0:i.email})]}):null},WH=()=>{const t=qa(),[e,n]=m.useState(!1),r=i=>t.pathname===i;return P.jsxs(P.Fragment,{children:[P.jsxs("nav",{className:"bottom-bar",children:[P.jsxs(_d,{to:"/dashboard",className:`nav-item ${r("/dashboard")?"active":""}`,children:[P.jsx("span",{className:"nav-icon",children:"🏠"}),P.jsx("span",{className:"nav-label",children:"Início"})]}),P.jsxs(_d,{to:"/content/training",className:`nav-item ${r("/content/training")?"active":""}`,children:[P.jsx("span",{className:"nav-icon",children:"🎓"}),P.jsx("span",{className:"nav-label",children:"Adestramento"})]}),P.jsxs(_d,{to:"/content/diary",className:`nav-item ${r("/content/diary")?"active":""}`,children:[P.jsx("span",{className:"nav-icon",children:"📝"}),P.jsx("span",{className:"nav-label",children:"Diário"})]}),P.jsxs(_d,{to:"/content/vaccines",className:`nav-item ${r("/content/vaccines")?"active":""}`,children:[P.jsx("span",{className:"nav-icon",children:"💉"}),P.jsx("span",{className:"nav-label",children:"Vacinas"})]}),P.jsxs("button",{className:`nav-item ${r("/more")?"active":""}`,onClick:()=>n(!0),children:[P.jsx("span",{className:"nav-icon",children:"⚙️"}),P.jsx("span",{className:"nav-label",children:"Mais"})]})]}),P.jsx(qH,{isOpen:e,onClose:()=>n(!1)})]})},KH=m.lazy(()=>_e(()=>import("./Login-C6tSW6R_.js"),__vite__mapDeps([0,1,2,3,4]))),GH=m.lazy(()=>_e(()=>import("./Signup-CcuizVjM.js"),__vite__mapDeps([5,1,2]))),HH=m.lazy(()=>_e(()=>import("./Recover-Cl3J5MRx.js"),__vite__mapDeps([6,1,3,4]))),QH=m.lazy(()=>_e(()=>import("./Home-DUcXHnaL.js"),__vite__mapDeps([7,1,8,9,10,11]))),YH=m.lazy(()=>_e(()=>import("./Profile-CifhFPOZ.js"),__vite__mapDeps([12,13]))),XH=m.lazy(()=>_e(()=>import("./index-BYHbKHUD.js"),__vite__mapDeps([9,10,11]))),JH=m.lazy(()=>_e(()=>import("./Onboarding-1klAsVmF.js"),__vite__mapDeps([14,10]))),ZH=m.lazy(()=>_e(()=>import("./ResetOnboarding-CwNNMvXy.js"),[])),eQ=m.lazy(()=>_e(()=>import("./Content-BU9tvtIm.js"),__vite__mapDeps([15,1,8,16,17,18,19,20,21]))),tQ=m.lazy(()=>_e(()=>import("./index-BRc3gxY8.js"),__vite__mapDeps([22,10,23,24,19,20,21]))),nQ=m.lazy(()=>_e(()=>import("./index-DC6XDsyU.js"),__vite__mapDeps([25,10,26]))),rQ=m.lazy(()=>_e(()=>import("./index-D4x0O_Ul.js"),__vite__mapDeps([27,10,28,26,29,30,31,32,23,24,19,20,21]))),iQ=m.lazy(()=>_e(()=>import("./index-DZtpemRo.js"),__vite__mapDeps([33,10,26]))),sQ=m.lazy(()=>_e(()=>import("./index-CVwATjzb.js"),__vite__mapDeps([34,10,26,23,24,19,20,21]))),oQ=m.lazy(()=>_e(()=>import("./index-ijajo3Mj.js"),__vite__mapDeps([35,10,26,23,24,19,20,21]))),aQ=m.lazy(()=>_e(()=>import("./index-CckdP5sZ.js"),__vite__mapDeps([36,10]))),lQ=m.lazy(()=>_e(()=>import("./index-_gu0-adU.js"),__vite__mapDeps([37,10,38,39]))),cQ=m.lazy(()=>_e(()=>import("./index-CVNfKgZp.js"),__vite__mapDeps([40,10,21,41,16,38,24,42]))),uQ=m.lazy(()=>_e(()=>import("./index-w2Ws4Msb.js"),__vite__mapDeps([43,41,44,17,45,46]))),dQ=m.lazy(()=>_e(()=>import("./index-ChrS23wx.js"),__vite__mapDeps([47,42,44,24,48,49]))),hQ=m.lazy(()=>_e(()=>import("./index-BLm4bh5T.js"),__vite__mapDeps([50,19,45,39,51,18,52]))),fQ=m.lazy(()=>_e(()=>import("./index-CN9iQ1Kq.js"),__vite__mapDeps([53,45,54,48,51,55]))),pQ=m.lazy(()=>_e(()=>import("./index-CxF9PEeA.js"),__vite__mapDeps([56,45,17,54,51,57]))),mQ=m.lazy(()=>_e(()=>import("./index-IR0i_ucf.js"),__vite__mapDeps([58,59]))),gQ=m.lazy(()=>_e(()=>import("./Success-COBrDSWP.js"),__vite__mapDeps([60,59]))),vQ=m.lazy(()=>_e(()=>import("./index-DRgcTdL3.js"),__vite__mapDeps([61,62]))),yQ=m.lazy(()=>_e(()=>import("./Behavior1-CsoG-TDr.js"),__vite__mapDeps([28,10,26]))),_Q=m.lazy(()=>_e(()=>import("./Behavior2-J10O8qQw.js"),__vite__mapDeps([29,10,26]))),wQ=m.lazy(()=>_e(()=>import("./Behavior3-Cd51p6wW.js"),__vite__mapDeps([30,10,26]))),EQ=m.lazy(()=>_e(()=>import("./Behavior4-C-CGhiKB.js"),__vite__mapDeps([31,10,26]))),TQ=m.lazy(()=>_e(()=>import("./Behavior5-Dd0skT2T.js"),__vite__mapDeps([32,10,26])));function IQ(){const{user:t,authIsReady:e}=us(),n=KD("(max-width: 768px)"),[r,i]=m.useState(!1),[s,o]=m.useState(!1),[a,l]=m.useState(!1);return e?P.jsx("div",{className:"App",children:P.jsxs(hq,{defaultTheme:"light",storageKey:"vite-ui-theme",children:[P.jsx(GW,{}),P.jsx(cq,{children:t?P.jsx(HW,{user:t,children:P.jsx(YW,{user:t,children:P.jsx(XW,{children:P.jsxs(JW,{children:[n?P.jsx(DH,{setRerender:i}):P.jsx(xH,{setRerender:i}),n?null:P.jsx("div",{className:`$${s?"w-[284px]":"w-[90px]"} w-[286px] h-[calc(100vh_-_120px)] fixed top-24 left-5 bottom-5 overflow-y-hidden border rounded-md`,children:P.jsx(RH,{rerender:r,setRerender:i,sidebarExpanded:s,setSidebarExpanded:o,isWatching:a,setIsWatching:l})}),P.jsx("div",{className:`$$${n?"w-full":s?"w-[calc(100%_-_300px)]":"w-[calc(100%_-_100px)]"} pt-20 $$${n?"mb-20":"mb-5"} $$${n?"mx-0":"mx-5"} float-right overflow-y-auto h-[calc(100vh_-_76px)]`,children:P.jsx(m.Suspense,{fallback:P.jsx(An,{}),children:P.jsxs(zT,{children:[P.jsx(de,{path:"/",element:P.jsx(QH,{})}),P.jsx(de,{path:"/dashboard",element:P.jsx(XH,{})}),P.jsx(de,{path:"/content",element:P.jsx(eQ,{})}),P.jsx(de,{path:"/content/training",element:P.jsx(tQ,{})}),P.jsx(de,{path:"/training",element:P.jsx(Om,{to:"/content/training"})}),P.jsx(de,{path:"/content/training/start-here",element:P.jsx(nQ,{})}),P.jsx(de,{path:"/content/training/behavior",element:P.jsx(rQ,{})}),P.jsx(de,{path:"/content/training/socialization",element:P.jsx(iQ,{})}),P.jsx(de,{path:"/content/training/hygiene",element:P.jsx(sQ,{})}),P.jsx(de,{path:"/content/training/badhabits",element:P.jsx(oQ,{})}),P.jsx(de,{path:"/content/training/mental",element:P.jsx(aQ,{})}),P.jsx(de,{path:"/content/training/behavior/lessons/behavior1",element:P.jsx(yQ,{})}),P.jsx(de,{path:"/content/training/behavior/lessons/behavior2",element:P.jsx(_Q,{})}),P.jsx(de,{path:"/content/training/behavior/lessons/behavior3",element:P.jsx(wQ,{})}),P.jsx(de,{path:"/content/training/behavior/lessons/behavior4",element:P.jsx(EQ,{})}),P.jsx(de,{path:"/content/training/behavior/lessons/behavior5",element:P.jsx(TQ,{})}),P.jsx(de,{path:"/content/vaccines",element:P.jsx(lQ,{})}),P.jsx(de,{path:"/content/diary",element:P.jsx(cQ,{})}),P.jsx(de,{path:"/notifications",element:P.jsx(dQ,{})}),P.jsx(de,{path:"/profile",element:P.jsx(YH,{})}),P.jsx(de,{path:"/help",element:P.jsx(uQ,{})}),P.jsx(de,{path:"/about",element:P.jsx(hQ,{})}),P.jsx(de,{path:"/terms",element:P.jsx(fQ,{})}),P.jsx(de,{path:"/privacy",element:P.jsx(pQ,{})}),P.jsx(de,{path:"/report-problem",element:P.jsx(vQ,{})}),P.jsx(de,{path:"/report",element:P.jsx(mQ,{})}),P.jsx(de,{path:"/report/success",element:P.jsx(gQ,{})}),P.jsx(de,{path:"/onboarding",element:P.jsx(JH,{})}),P.jsx(de,{path:"/reset-onboarding",element:P.jsx(ZH,{})}),P.jsx(de,{path:"*",element:P.jsx(Om,{to:"/"})})]})})}),n&&P.jsx(WH,{})]})})})}):P.jsx(m.Suspense,{fallback:P.jsx(An,{}),children:P.jsxs(zT,{children:[P.jsx(de,{path:"/login",element:P.jsx(KH,{})}),P.jsx(de,{path:"/signup",element:P.jsx(GH,{})}),P.jsx(de,{path:"/recover",element:P.jsx(HH,{})}),P.jsx(de,{path:"*",element:P.jsx(Om,{to:"/login"})})]})})})]})}):P.jsx(An,{})}function bQ(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const u=async(h=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(a=await _e(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-D5gOYdM7.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/sw.js",{scope:"/",type:"classic"})).catch(h=>{o==null||o(h)}),!a)return;a.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),a.addEventListener("installed",h=>{h.isUpdate||r==null||r()}),a.register({immediate:e}).then(h=>{s?s("/sw.js",h):i==null||i(h)}).catch(h=>{o==null||o(h)})}}return l=d(),u}"serviceWorker"in navigator&&navigator.serviceWorker.register("/firebase-messaging-sw.js").then(function(t){console.log("Service Worker registrado com sucesso:",t),Notification.requestPermission().then(e=>{console.log("Requested permission ",e),e==="granted"&&(console.log("Permission granted."),Jx(messaging,{vapidKey:"BJaZkU7IEQWsEg9YpG_cryhAbGCyc8btkFIPaKKoeZ-QXNHP9ZYfI5-1uaeeDyfXqzzF-f6jAwtTbTb78bvAu2k"}).then(n=>{n?(console.log(n),updateToken(n),console.log("Token de inscrição:",n)):console.log("Não foi possível obter o token.")}).catch(n=>{console.log("Erro ao obter o token:",n)}))})}).catch(function(t){console.log("Falha ao registrar o Service Worker:",t)});bQ({immediate:!0});const j1=document.getElementById("splash");j1&&j1.remove();_g.createRoot(document.getElementById("root")).render(P.jsx(lq,{children:P.jsx(zV,{children:P.jsx(IQ,{})})}));export{zn as $,vo as A,P0 as B,uD as C,at as D,WQ as E,it as F,yn as G,I0 as H,pu as I,lu as J,Sp as K,_d as L,tA as M,_q as N,fD as O,hg as P,Mu as Q,rK as R,SG as S,BK as T,cD as U,mN as V,Va as W,Ke as X,lD as Y,zQ as Z,he as _,qQ as a,JQ as a0,rY as a1,nY as a2,eY as a3,JW as a4,QG as a5,ye as a6,BQ as a7,R0 as a8,WW as a9,lr as aA,KW as aa,Tn as ab,En as ac,Xl as ad,Vu as ae,df as af,GQ as ag,Dp as ah,HQ as ai,Np as aj,gq as ak,Op as al,Lp as am,IN as an,zG as ao,xp as ap,ZW as aq,WG as ar,RN as as,oW as at,uW as au,YQ as av,tY as aw,ZQ as ax,XQ as ay,DM as az,oy as b,us as c,G3 as d,aP as e,Fi as f,Se as g,pe as h,HD as i,P as j,qa as k,Re as l,Z5 as m,UQ as n,Ji as o,H3 as p,ua as q,m as r,B3 as s,Ml as t,Wa as u,z3 as v,Mp as w,uq as x,KD as y,An as z};
